<!DOCTYPE html>
<html lang="en" aria-theme="light">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Vitra AI – Dashboard</title>
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <style>
    /*──────── VARIABLES ────────*/
    :root {
      --primary: #4A78C4;
      --secondary: #FFFFFF;
      --bg: #F0F4FF;
      --surface: #FFFFFF;
      --text: #1A1A1A;
      --muted: #555555;
      --radius: 0.75rem;
      --padding: 1.5rem;
      --gap: 1rem;
      --max-width: 1200px;
    }
    html.dark {
      --bg: #1F2233;
      --surface: #2B2E44;
      --text: #E0E0E0;
      --muted: #888888;
    }
    /*──────── BASE ────────*/
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family:'Montserrat',sans-serif;
      display:flex;
      min-height:100vh;
      transition: background .3s, color .3s;
    }
    a { text-decoration:none; color:inherit; }
    button { font:inherit; cursor:pointer; border:none; }

    /*──────── SIDEBAR ────────*/
    .sidebar {
      width:250px;
      background: var(--surface);
      padding:2rem 1rem;
      display:flex;
      flex-direction:column;
      gap:1rem;
      box-shadow:2px 0 8px rgba(0,0,0,0.1);
    }
    .sidebar .logo {
      display:flex;
      align-items:center;
      gap:.5rem;
      justify-content:center;
      font-size:1.5rem;
      font-weight:700;
      color:var(--primary);
    }
    .sidebar .logo svg { width:2rem; height:2rem; fill:var(--primary); }
    .sidebar nav { margin-top:2rem; display:flex; flex-direction:column; gap:.5rem; }
    .sidebar nav a {
      padding:.75rem 1rem;
      border-radius:var(--radius);
      transition:background .2s, color .2s;
      display:flex;
      align-items:center;
      gap:.75rem;
      color: var(--text);
    }
    .sidebar nav a.active,
    .sidebar nav a:hover {
      background: var(--primary);
      color: var(--secondary);
    }

    /*──────── MAIN AREA ────────*/
    .main {
      flex:1;
      display:flex;
      flex-direction:column;
    }
    .topbar {
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:1rem 2rem;
      background:var(--surface);
      box-shadow:0 2px 8px rgba(0,0,0,0.1);
    }
    .topbar .welcome { font-size:1.25rem; }
    .topbar .controls {
      display:flex;
      align-items:center;
      gap:1rem;
    }
    .topbar button {
      padding:.5rem 1rem;
      border-radius:var(--radius);
      background:var(--primary);
      color:#fff;
    }
    .topbar i { font-size:1.2rem; cursor:pointer; }

    /*──────── CONTENT GRID ────────*/
    .content {
      padding:2rem;
      max-width:var(--max-width);
      margin:auto;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
      gap:var(--gap);
    }
    .card {
      background:var(--surface);
      border-radius:var(--radius);
      box-shadow:0 2px 8px rgba(0,0,0,0.1);
      padding:var(--padding);
      display:flex;
      flex-direction:column;
      transition:transform .2s, box-shadow .2s;
    }
    .card:hover {
      transform:translateY(-5px);
      box-shadow:0 4px 12px rgba(0,0,0,0.15);
    }
    .card i {
      font-size:2.5rem;
      color:var(--primary);
      margin-bottom:1rem;
    }
    .card h4 { margin-bottom:.5rem; }
    .card p { flex:1; margin-bottom:1rem; color:var(--muted); }
    .card a {
      margin-top:auto;
      display:inline-block;
      padding:.5rem 1rem;
      background:var(--primary);
      color:#fff;
      border-radius:var(--radius);
      text-align:center;
    }
    /*──────── STAT INPUTS ────────*/
    .stat-input {
      display:flex;
      align-items:center;
      gap:.5rem;
      margin-top:1rem;
    }
    .stat-input input {
      width:60px;
      padding:.25rem .5rem;
      border:1px solid var(--muted);
      border-radius:var(--radius);
      text-align:center;
    }

    /*──────── FULL-WIDTH CHART CARD ────────*/
    .chart-card {
      grid-column:1/-1;
    }
    canvas { width:100%!important; height:250px!important; }

    @media(max-width:768px){
      .sidebar { display:none; }
      body { flex-direction:column; }
      .topbar { justify-content:center; }
    }
  </style>
</head>
<body>

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="logo">
      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <polygon points="10,10 25,90 50,40 75,90 90,10 65,10 50,70 35,10"/>
      </svg>
      <span>Vitra AI</span>
    </div>
    <nav>
      <a href="#profile" class="active"><i class="fas fa-user-circle"></i> Profile</a>
      <a href="#epharmacy"><i class="fas fa-pills"></i> E-Pharmacy</a>
      <a href="#consult"><i class="fas fa-calendar-check"></i> Consults</a>
      <a href="#diet"><i class="fas fa-apple-alt"></i> Diet Plan</a>
      <a href="#therapy"><i class="fas fa-brain"></i> AI Therapist</a>
      <a href="#stats"><i class="fas fa-chart-line"></i> My Stats</a>
    </nav>
  </aside>

  <!-- MAIN -->
  <div class="main">
    <header class="topbar">
      <div class="welcome">Hello, <strong id="userName">User</strong>!</div>
      <div class="controls">
        <i id="themeToggle" class="fas fa-moon"></i>
        <button id="signOutBtn"><i class="fas fa-sign-out-alt"></i> Sign Out</button>
      </div>
    </header>

    <section class="content">
      <!-- Profile Card -->
      <div id="profile" class="card">
        <i class="fas fa-user-circle"></i>
        <h4>My Profile</h4>
        <p id="userEmail">user@example.com</p>
        <a href="profile.html">Edit Profile</a>
      </div>

      <!-- E-Pharmacy -->
      <div id="epharmacy" class="card">
        <i class="fas fa-pills"></i>
        <h4>E-Pharmacy</h4>
        <p>Order prescriptions with AI dose checks.</p>
        <a href="epharmacy.html">Go</a>
      </div>

      <!-- Consult Booking -->
      <div id="consult" class="card">
        <i class="fas fa-calendar-check"></i>
        <h4>Consult Booking</h4>
        <p>Manage your upcoming video consults.</p>
        <a href="consult.html">Go</a>
      </div>

      <!-- Diet Plan -->
      <div id="diet" class="card">
        <i class="fas fa-apple-alt"></i>
        <h4>Diet Plan</h4>
        <p>View & update your personalized meals.</p>
        <a href="dietetics.html">Go</a>
      </div>

      <!-- AI Therapist -->
      <div id="therapy" class="card">
        <i class="fas fa-brain"></i>
        <h4>AI Therapist</h4>
        <p>Continue your confidential chat session.</p>
        <a href="psychology.html#therapybot">Go</a>
      </div>

      <!-- Stats Card -->
      <div id="stats" class="card">
        <i class="fas fa-chart-bar"></i>
        <h4>My Stats</h4>
        <p>Track your health metrics over time.</p>
        <!-- inputs to adjust stats -->
        <div class="stat-input">
          <label>Weight (kg):</label>
          <input type="number" id="statWeight" value="70" min="30" max="200"/>
        </div>
        <div class="stat-input">
          <label>Steps/Day:</label>
          <input type="number" id="statSteps" value="5000" min="0" max="50000"/>
        </div>
        <button id="updateStatsBtn">Update Charts</button>
      </div>

      <!-- Chart: Health Overview -->
      <div class="card chart-card">
        <h4>Health Overview</h4>
        <canvas id="healthChart"></canvas>
      </div>
    </section>
  </div>

  <!-- SCRIPTS -->
  <script>
    // Firebase config (copy yours)
    const firebaseConfig = {
      apiKey: "AIzaSyBhaYOcLMXuobCT-vaXr-zXTZnBfaheAIY",
      authDomain: "vitra-ai-712ea.firebaseapp.com",
      projectId: "vitra-ai-712ea",
      storageBucket: "vitra-ai-712ea.appspot.com",
      messagingSenderId: "306868103753",
      appId: "1:306868103753:web:e2d7700f8ad34c1e17ed98"
    };
    firebase.initializeApp(firebaseConfig);

    document.addEventListener('DOMContentLoaded', () => {
      // THEME TOGGLE
      const themeToggle = document.getElementById('themeToggle');
      themeToggle.onclick = () => {
        document.documentElement.classList.toggle('dark');
        themeToggle.classList.toggle('fa-moon');
        themeToggle.classList.toggle('fa-sun');
      };

      // SIGN OUT
      document.getElementById('signOutBtn').onclick = () => {
        firebase.auth().signOut().then(() => {
          window.location.href = 'index.html';
        });
      };

      // AUTH STATE
      firebase.auth().onAuthStateChanged(user => {
        if (!user) return window.location.href = 'index.html';
        document.getElementById('userName').textContent = user.displayName || "User";
        document.getElementById('userEmail').textContent = user.email;
      });

      // CHART.JS SETUP
      const ctx = document.getElementById('healthChart').getContext('2d');
      const healthChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
          datasets: [
            {
              label: 'Weight (kg)',
              data: [70,70,70,70,70,70,70],
              fill: false,
              tension: 0.3,
              borderColor: '#4A78C4'
            },
            {
              label: 'Steps',
              data: [5000,5000,5000,5000,5000,5000,5000],
              fill: false,
              tension: 0.3,
              borderColor: '#FFA500'
            }
          ]
        },
        options: {
          responsive: true,
          scales: {
            y: { beginAtZero: true }
          }
        }
      });

      // UPDATE CHARTS ON INPUT
      document.getElementById('updateStatsBtn').onclick = () => {
        const w = +document.getElementById('statWeight').value;
        const s = +document.getElementById('statSteps').value;
        healthChart.data.datasets[0].data = Array(7).fill(w);
        healthChart.data.datasets[1].data = Array(7).fill(s);
        healthChart.update();
      };
    });
  </script>
</body>
</html>
