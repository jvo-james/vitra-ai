<!DOCTYPE html>
<html lang="en" aria-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Vitra AI â€“ Neuropharma Command Center</title>
  <!-- Montserrat + FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet"/>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <!-- Pale Blue + FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet"/>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet"/>
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  
  <style>
  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Theme & Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  :root {
    --primary: #5A8DEE; --primary-alt: #7DA4E8; --secondary: #FF758C;
    --accent: rgba(255,255,255,0.4); --bg: #F0F4F8; --surface: rgba(255,255,255,0.85);
    --text: #1F2937; --muted: #546E7A; --radius: .75rem; --padding: 1rem;
    --transition: .3s ease; --shadow-light: 0 4px 20px rgba(0,0,0,.05);
  }
  html.dark {
    --bg:#111827; --surface:rgba(30,35,54,.85); --text:#E0E6F0; --muted:#9AA5B1; --accent:rgba(30,35,54,.5);
  }
  *,*::before,*::after {margin:0;padding:0;box-sizing:border-box;}
  html {font-family:'Montserrat',sans-serif;scroll-behavior:smooth;}
  body {display:flex;min-height:100vh;background:var(--bg);color:var(--text);overflow-x:hidden;}
  a{color:inherit;text-decoration:none;}button,input,textarea,select{font:inherit;transition:all var(--transition);}
  :focus{outline:2px solid var(--primary);outline-offset:2px;}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  aside{flex:0 0 260px;background:var(--surface);backdrop-filter:blur(12px);box-shadow:var(--shadow-light);
    position:sticky;top:0;height:100vh;display:flex;flex-direction:column;transition:flex var(--transition);}
  aside.collapsed{flex:0 0 72px;}
  .brand{display:flex;align-items:center;gap:.75rem;padding:var(--padding);font-size:1.2rem;color:var(--primary);}
  aside.collapsed .brand span{opacity:0;}
  nav{flex:1;overflow-y:auto;margin-top:.5rem;}
  nav a{display:flex;align-items:center;gap:1rem;padding:.75rem var(--padding);border-radius:var(--radius);
       transition:background var(--transition),transform var(--transition);}
  nav a:hover,nav a.active{background:var(--primary);color:#fff;transform:translateX(4px);}
  #shrinkBtn{margin:var(--padding) auto;width:36px;height:36px;border-radius:50%;
             background:var(--primary);color:#fff;box-shadow:0 8px 40px rgba(0,0,0,.1);}
  #shrinkBtn:hover{transform:scale(1.1);}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  header{position:fixed;top:0;left:260px;right:0;height:60px;
    background:var(--surface);backdrop-filter:blur(12px);display:flex;align-items:center;
    justify-content:space-between;padding:0 var(--padding);box-shadow:var(--shadow-light);transition:left var(--transition);z-index:1000;}
  header.sidebar-collapsed{left:72px;}
  header h1{font-size:1.4rem;}
  .hamburger,.theme-toggle{font-size:1.5rem;color:var(--primary);cursor:pointer;}
  .hamburger:hover,.theme-toggle:hover{transform:scale(1.1);}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Main & Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  main{flex:1;margin-top:60px;padding:var(--padding);overflow-x:hidden;}
  .hero{position:relative;background:var(--surface);backdrop-filter:blur(12px);border-radius:var(--radius);
        padding:3rem var(--padding);text-align:center;box-shadow:0 8px 40px rgba(0,0,0,.1);margin-bottom:2rem;}
  .hero h1{font-size:2.75rem;color:var(--primary);margin-bottom:1rem;}
  .hero p{font-size:1.2rem;color:var(--muted);margin-bottom:2rem;max-width:600px;margin-inline:auto;}
  .hero .actions{display:flex;flex-direction:column;gap:1rem;max-width:360px;margin-inline:auto;}
  .hero .actions a{background:var(--primary);color:#fff;padding:1rem;font-size:1rem;border-radius:var(--radius);
                   box-shadow:var(--shadow-light);transition:transform var(--transition),background var(--transition);}
  .hero .actions a.btn-secondary{background:var(--secondary);}
  .hero .actions a:hover{transform:translateY(-3px);}
  .hero-icons{position:absolute;top:1rem;right:1rem;display:flex;flex-direction:column;gap:.5rem;
              font-size:2rem;opacity:.15;}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Modules â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  section.module{background:var(--surface);backdrop-filter:blur(8px);border-radius:var(--radius);
                 padding:var(--padding);margin-bottom:1.5rem;box-shadow:var(--shadow-light);
                 transition:transform var(--transition);}
  section.module:hover{transform:translateY(-4px);}
  section.module h2{display:flex;align-items:center;gap:.5rem;font-size:1.5rem;color:var(--primary);margin-bottom:.75rem;}
  section.module p.desc{color:var(--muted);font-size:1rem;margin-bottom:1rem;}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Inputs & Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  input[type="text"],input[type="number"],textarea,select{width:100%;padding:.75rem;border:1px solid var(--muted);
    border-radius:var(--radius);background:var(--accent);color:var(--text);}
  input:focus,textarea:focus,select:focus{border-color:var(--primary);box-shadow:0 0 8px var(--primary);}
  input[type="range"]{width:100%;accent-color:var(--primary);}
  .checkbox-group{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.5rem;}
  fieldset{border:1px solid var(--muted);border-radius:var(--radius);padding:.75rem;}
  legend{padding:0 .5rem;font-weight:600;color:var(--secondary);}
  button.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;border:none;
             border-radius:var(--radius);background:var(--primary);color:#fff;font-weight:600;
             box-shadow:var(--shadow-light);cursor:pointer;transition:background var(--transition),transform var(--transition);}
  button.btn-secondary{background:var(--secondary);}
  button.btn:hover{transform:translateY(-2px);box-shadow:0 8px 40px rgba(0,0,0,.1);}
  button.btn-secondary:hover{background:var(--primary-alt);}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Response Panels â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  .response{background:var(--surface);backdrop-filter:blur(8px);border-left:4px solid var(--secondary);
            padding:var(--padding);border-radius:var(--radius);margin-top:1rem;position:relative;box-shadow:var(--shadow-light);}
  .response .result-content{white-space:pre-wrap;line-height:1.5;}
  .close-btn{position:absolute;top:var(--padding);right:var(--padding);background:none;border:none;
             font-size:1.2rem;color:var(--secondary);cursor:pointer;}
  .tool-row{position:absolute;bottom:var(--padding);right:var(--padding);display:flex;gap:.5rem;}
  .tool-row button{background:var(--accent);border:none;border-radius:50%;width:1.6rem;height:1.6rem;
                   display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform var(--transition);}
  .tool-row button:hover{transform:scale(1.2);}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Chat UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  .chat-box{background:var(--bg);border:1px solid var(--muted);border-radius:var(--radius);
            padding:var(--padding);max-height:300px;overflow-y:auto;display:flex;flex-direction:column;}
  .user-msg,.bot-msg{max-width:75%;padding:.75rem 1rem;margin:.5rem 0;border-radius:1rem;position:relative;}
  .user-msg{background:var(--primary);color:#fff;align-self:flex-end;}
  .bot-msg{background:var(--accent);color:var(--text);align-self:flex-start;}
  .timestamp{font-size:.65rem;color:var(--muted);position:absolute;bottom:-1.2rem;right:1rem;}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Charts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  .charts{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;}
  .chart-card{background:var(--surface);backdrop-filter:blur(8px);border-radius:var(--radius);
              padding:var(--padding);box-shadow:var(--shadow-light);display:flex;flex-direction:column;}
  .chart-card canvas{flex:1;}

  /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
  @media(max-width:1024px){header{padding:0 .5rem;} .hero{padding:2rem .75rem;}}
  @media(max-width:640px){.hero h1{font-size:2rem;}section.module{padding:.75rem;}
    .hero-icons{display:none;} .checkbox-group{grid-template-columns:1fr;}}
  </style>
</head>
<body>

  <!-- SIDEBAR -->
  <aside id="sidebar">
    <div class="brand"><i class="fas fa-brain"></i><span>Vitra AI</span></div>
    <nav>
      <a href="index.html"><i class="fas fa-seedling"></i><span>Herbal Medicine</span></a>
      <a href="psychology.html" class="active"><i class="fas fa-brain"></i><span>Psych &amp; MH</span></a>
      <a href="dietetics.html"><i class="fas fa-utensils"></i><span>Dietetics</span></a>
      <a href="pharmacy.html"><i class="fas fa-prescription-bottle-alt"></i><span>E-Pharmacy</span></a>
      <a href="consult.html"><i class="fas fa-calendar-check"></i><span>Consult Booking</span></a>
    </nav>
    <button id="shrinkBtn" aria-label="Toggle sidebar"><i class="fas fa-angle-double-left"></i></button>
  </aside>

  <!-- HEADER -->
  <header>
    <i id="hamburger" class="fas fa-bars"></i>
    <h1>Neuropharma Command Center</h1>
    <i id="themeToggle" class="fas fa-moon"></i>
  </header>

  <!-- MAIN CONTENT -->
  <main>

    <!-- HERO -->
    <section class="hero" id="hero">
      <h1><i class="fas fa-brain"></i> Empower Your Neuro-Health</h1>
      <p>Integrate genetics, neurotransmitters, EEG, and drug dataâ€”AI-driven insights for precision psychiatry.</p>
      <div class="actions">
        <a href="#therapybot" class="btn"><i class="fas fa-comments"></i> Therapy Bot</a>
        <a href="#moodTracker" class="btn btn-secondary"><i class="fas fa-sliders-h"></i> Mood Tracker</a>
        <a href="#neurotransmitter" class="btn"><i class="fas fa-flask"></i> Neuro Balance</a>
        <a href="#pharmacogenomics" class="btn btn-secondary"><i class="fas fa-dna"></i> Pharmaco-Genomics</a>
      </div>
      <div class="hero-icons">
        <i class="fas fa-microscope"></i>
        <i class="fas fa-pills"></i>
        <i class="fas fa-wave-square"></i>
        <i class="fas fa-chart-line"></i>
      </div>
    </section>

    <!-- 1. Conversational Therapy Bot -->
    <section class="module" id="therapybot">
      <h2><i class="fas fa-robot"></i> 1. Conversational Therapy Bot</h2>
      <p class="desc">Guided CBT, mindfulness, or emotional supportâ€”AI adapts to your modality, length, and language.</p>
      <form id="therapy-form">
        <label>Modality:
          <select id="therapyModality">
            <option value="CBT">CBT Exercises</option>
            <option value="mindfulness">Mindfulness</option>
            <option value="emotional">Emotional Support</option>
            <option value="guidedImagery">Guided Imagery</option>
          </select>
        </label>
        <label>Length:
          <select id="therapyLength">
            <option>5 minutes</option>
            <option>10 minutes</option>
            <option>20 minutes</option>
          </select>
        </label>
        <label>Language:
          <select id="therapyLang">
            <option>English</option>
            <option>Spanish</option>
            <option>French</option>
          </select>
        </label>
        <div style="display:flex;gap:.5rem;">
          <input id="therapyInput" type="text" placeholder="Describe what you needâ€¦" />
          <button id="sendChat" class="btn"><i class="fas fa-paper-plane"></i></button>
        </div>
      </form>
      <div id="chatBox" class="chat-box"></div>
      <div id="chatHint" class="desc" style="display:none;">Bot is thinkingâ€¦ <span class="spinner"></span></div>
    </section>

    <!-- 2. Daily Mood Tracker -->
    <section class="module" id="moodTracker">
      <h2><i class="fas fa-sliders-h"></i> 2. Daily Mood Tracker</h2>
      <p class="desc">Log mood, triggers, and journal entriesâ€”AI spots patterns and suggests self-care tips.</p>
      <form id="mood-form">
        <label for="moodRange">Mood Score: <strong><span id="moodValue">5</span>/10</strong></label>
        <input type="range" id="moodRange" min="1" max="10" value="5" />
        <fieldset>
          <legend>Emotions:</legend>
          <div class="checkbox-group">
            <label><input type="checkbox" name="emotions" value="Happy"> <i class="far fa-smile"></i> Happy</label>
            <label><input type="checkbox" name="emotions" value="Sad"> <i class="far fa-frown"></i> Sad</label>
            <label><input type="checkbox" name="emotions" value="Anxious"> <i class="fas fa-exclamation-triangle"></i> Anxious</label>
            <label><input type="checkbox" name="emotions" value="Calm"> <i class="fas fa-water"></i> Calm</label>
          </div>
        </fieldset>
        <fieldset>
          <legend>Triggers:</legend>
          <div class="checkbox-group">
            <label><input type="checkbox" name="triggers" value="Work"> Work</label>
            <label><input type="checkbox" name="triggers" value="Relationships"> Relationships</label>
            <label><input type="checkbox" name="triggers" value="Sleep"> Sleep</label>
            <label><input type="checkbox" name="triggers" value="Diet"> Diet</label>
          </div>
        </fieldset>
        <label for="moodNote">Journal:</label>
        <textarea id="moodNote" rows="3" placeholder="How are you feeling?"></textarea>
        <label for="selfCare">Self-Care:</label>
        <select id="selfCare">
          <option disabled selected>Selectâ€¦</option>
          <option>Guided Breathing</option><option>Stretch Break</option><option>Mindfulness</option>
        </select>
        <button type="submit" class="btn"><i class="fas fa-chart-line"></i> Analyze Mood</button>
      </form>
      <div id="moodPanel" class="response" hidden>
        <button class="close-btn"><i class="fas fa-times"></i></button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-download"></i></button>
        </div>
      </div>
    </section>

    <!-- 3. Neurotransmitter Balance Analyzer -->
    <section class="module" id="neurotransmitter">
      <h2><i class="fas fa-flask"></i> 3. Neurotransmitter Balance Analyzer</h2>
      <p class="desc">
        Map your symptom scores to dopamine, serotonin, GABA & acetylcholine profilesâ€”AI suggests targeted nutraceutical  
        or Rx interventions for optimal brain chemistry.
      </p>
      <form id="neuro-form">
        <label>Mood & Anxiety (1â€“10):<input type="range" id="ntMood" min="1" max="10" value="5"></label>
        <label>Sleep Quality (1â€“10):<input type="range" id="ntSleep" min="1" max="10" value="5"></label>
        <label>Appetite:
          <select id="ntAppetite">
            <option>Decreased</option><option>Normal</option><option>Increased</option>
          </select>
        </label>
        <label>Adherence (%):<input type="number" id="ntAdherence" min="0" max="100" value="80"></label>
        <button id="analyzeNeuro" class="btn"><i class="fas fa-brain"></i> Analyze Balance</button>
      </form>
      <div id="neuroPanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-file-medical"></i></button>
        </div>
      </div>
    </section>

    <!-- 4. Pharmacogenomics & Personalized Dosing -->
    <section class="module" id="pharmacogenomics">
      <h2><i class="fas fa-dna"></i> 4. Pharmacogenomics & Personalized Dosing</h2>
      <p class="desc">
        Upload your CYP450 genotype or select statusâ€”AI cross-references hundreds of meds and suggests  
        dose adjustments, flags rapid/poor metabolizers, and optimizes therapy.
      </p>
      <form id="pgx-form">
        <label>Upload Genotype (.json):<input type="file" id="pgxUpload" accept=".json"></label>
        <label>Medication:
          <select id="pgxDrug">
            <option>Sertraline</option><option>Fluoxetine</option><option>Carbamazepine</option>
            <option>Lamotrigine</option><option>Donepezil</option>
          </select>
        </label>
        <button id="runPGx" class="btn"><i class="fas fa-prescription-bottle-alt"></i> Generate Dosing</button>
      </form>
      <div id="pgxPanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-file-export"></i></button>
        </div>
      </div>
    </section>

    <!-- 5. Drug Interaction & Safety Profiler -->
    <section class="module" id="interactions">
      <h2><i class="fas fa-exchange-alt"></i> 5. Drug Interaction & Safety Profiler</h2>
      <p class="desc">
        Paste your full med list (Rx, OTC, supplements). AI checks CYP interactions, QT-risk, sedation stacking,  
        and suggests safer alternatives or dose tweaks.
      </p>
      <form id="int-form">
        <label>Medications:
          <input type="text" id="intList" placeholder="e.g. Sertraline, Ibuprofen, St. John's Wort">
        </label>
        <button id="checkInt" class="btn"><i class="fas fa-exclamation-triangle"></i> Check Interactions</button>
      </form>
      <div id="intPanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-download"></i></button>
        </div>
      </div>
    </section>

    <!-- 6. EEG & Brainwave Pattern Interpreter -->
    <section class="module" id="eeg">
      <h2><i class="fas fa-wave-square"></i> 6. EEG & Brainwave Pattern Interpreter</h2>
      <p class="desc">
        Upload your EEG (.edf/.bdf) or a 30s .wav of brainwave capture. AI detects alpha/theta/delta patterns,  
        flags anomalies, and suggests neurofeedback protocols.
      </p>
      <form id="eeg-form">
        <label>Upload EEG File:
          <input type="file" id="eegFile" accept=".edf,.bdf,.wav">
        </label>
        <button id="analyzeEEG" class="btn"><i class="fas fa-file-audio"></i> Analyze Brainwaves</button>
      </form>
      <div id="eegPanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-file-export"></i></button>
        </div>
      </div>
    </section>

    <!-- 7. Clinical Trial Matching Engine -->
    <section class="module" id="trialmatch">
      <h2><i class="fas fa-search"></i> 7. Clinical Trial Matching Engine</h2>
      <p class="desc">
        Enter diagnosis, region, and lab values. AI scans global trial registries in real time and  
        returns ranked matches with inclusion/exclusion flags.
      </p>
      <form id="trial-form">
        <label>Diagnosis:
          <input type="text" id="trialDx" placeholder="e.g. Parkinsonâ€™s, MDD">
        </label>
        <label>Region:
          <input type="text" id="trialLoc" placeholder="e.g. United States, EU">
        </label>
        <button id="findTrials" class="btn"><i class="fas fa-clinic-medical"></i> Find Trials</button>
      </form>
      <div id="trialPanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-file-export"></i></button>
        </div>
      </div>
    </section>

    <!-- 8. AI-Curated Creative Therapies -->
    <section class="module" id="creative">
      <h2><i class="fas fa-palette"></i> 8. AI-Curated Creative Therapies</h2>
      <p class="desc">Generate art, music, poetry or journaling promptsâ€”tailored to your mood and style.</p>
      <form id="creative-form">
        <label>Type:
          <select id="creativeType">
            <option value="art">Abstract Art</option>
            <option value="music">Soundscape</option>
            <option value="poetry">Poetry</option>
            <option value="journaling">Journaling</option>
          </select>
        </label>
        <label>Style:
          <select id="creativeStyle">
            <option>Calm & Soft</option><option>Vibrant & Bold</option><option>Mystical</option><option>Minimalist</option>
          </select>
        </label>
        <label>Detail (1â€“10):<input type="range" id="creativeDetail" min="1" max="10" value="5"></label>
        <button id="artEmotion" class="btn"><i class="fas fa-brush"></i> Generate</button>
      </form>
      <div id="creativePanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-download"></i></button>
        </div>
      </div>
    </section>

    <!-- 9. Dynamic Cognitive Games -->
    <section class="module" id="games">
      <h2><i class="fas fa-gamepad"></i> 9. Dynamic Cognitive Games</h2>
      <p class="desc">Logic puzzles, memory matches, and story co-creation for brain training.</p>
      <form id="games-form">
        <label>Game:
          <select id="gameType">
            <option value="puzzle">Logic Puzzle</option><option value="memory">Memory Match</option><option value="story">Story Co-Write</option>
          </select>
        </label>
        <label>Difficulty:
          <select id="gameDifficulty"><option>Easy</option><option>Medium</option><option>Hard</option></select>
        </label>
        <button id="puzzles" class="btn"><i class="fas fa-puzzle-piece"></i> Start</button>
      </form>
      <div id="gamesPanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-download"></i></button>
        </div>
      </div>
    </section>

    <!-- 10. Medication Management & Safety -->
    <section class="module" id="medsafety">
      <h2><i class="fas fa-pills"></i> 10. Medication Management & Safety</h2>
      <p class="desc">Enter meds, check interactions, set adherence reminders.</p>
      <form id="medsafety-form">
        <label>Medications:
          <input type="text" id="medList" placeholder="e.g. Sertraline, Ibuprofen">
        </label>
        <button id="medInteraction" class="btn"><i class="fas fa-exchange-alt"></i> Check Interactions</button>
        <button id="adherence" class="btn btn-secondary"><i class="fas fa-check-circle"></i> Set Reminders</button>
      </form>
      <div id="medsafetyPanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-download"></i></button>
        </div>
      </div>
    </section>

    <!-- 11. Symptom Questionnaire -->
    <section class="module" id="symptomQuiz">
      <h2><i class="fas fa-clipboard-list"></i> 11. Symptom Questionnaire</h2>
      <p class="desc">Standardized surveyâ€”AI scores severity and suggests next steps.</p>
      <form id="quiz-form">
        <label>Sleep:
          <select name="sleep"><option>Poor</option><option>Fair</option><option>Good</option></select>
        </label>
        <label>Appetite:
          <select name="appetite"><option>Low</option><option>Normal</option><option>High</option></select>
        </label>
        <label>Concentration:
          <select name="concentration"><option>Impaired</option><option>Average</option><option>Sharp</option></select>
        </label>
        <button id="launchQuiz" class="btn"><i class="fas fa-play"></i> Submit & Analyze</button>
      </form>
      <div id="quizPanel" class="response" hidden>
        <button class="close-btn">&times;</button>
        <div class="result-content"></div>
        <div class="tool-row">
          <button class="copy-btn"><i class="fas fa-copy"></i></button>
          <button class="dl-btn"><i class="fas fa-download"></i></button>
        </div>
      </div>
    </section>

    <!-- 12. Data Analytics & ROI -->
    <section class="module" id="analytics">
      <h2><i class="fas fa-chart-pie"></i> 12. Data Analytics & ROI</h2>
      <p class="desc">Visualize sessions, outcome metrics, and export CSV reports.</p>
      <div class="charts">
        <div class="chart-card"><canvas id="engagementChart" height="200"></canvas><figcaption>Sessions Over Time</figcaption></div>
        <div class="chart-card"><canvas id="outcomeChart" height="200"></canvas><figcaption>Outcome Metrics</figcaption></div>
      </div>
      <div style="display:flex;gap:1rem;margin-top:1rem;">
        <label>Date Range:
          <input type="date" id="analyticsFrom"/>â€“
          <input type="date" id="analyticsTo"/>
        </label>
        <button id="exportCharts" class="btn"><i class="fas fa-file-export"></i> Export CSV</button>
      </div>
    </section>

    <!-- FOOTER -->
    <footer style="text-align:center;padding:1rem;background:var(--surface);color:var(--muted)">
      &copy; 2025 Vitra AI â€“ Neuropharma Command Center
    </footer>

  </main>

  <!-- Chart.js + AI Proxy Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
  // â”€â”€ OpenAI Proxy + Markdownâ†’HTML â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function callOpenAI(messages) {
    const res = await fetch('/.netlify/functions/openai-proxy', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({messages})
    });
    if(!res.ok) throw new Error('OpenAI error');
    const j = await res.json();
    return j.choices[0].message.content;
  }
  function formatHTML(txt) {
    return txt.replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>')
              .replace(/\*(.+?)\*/g,'<em>$1</em>')
              .split(/\n{2,}/).map(p=>`<p>${p.trim()}</p>`).join('');
  }

  document.addEventListener('DOMContentLoaded',()=>{
    // Utility to show panel
    function getPanel(id){
      const sec = document.getElementById(id);
      let panel = sec.querySelector('.response');
      if(!panel){ panel = document.createElement('div'); panel.className='response'; sec.append(panel); }
      panel.hidden = false;
      return panel;
    }
    // Sidebar + Theme toggles
    document.getElementById('shrinkBtn').onclick = ()=>document.getElementById('sidebar').classList.toggle('collapsed');
    document.getElementById('hamburger').onclick = ()=>document.getElementById('sidebar').classList.toggle('open');
    document.getElementById('themeToggle').onclick = ()=>{
      document.documentElement.classList.toggle('dark');
      document.getElementById('themeToggle').classList.toggle('fa-sun');
    };

    // â”€â”€ Therapy Bot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const chatBox=document.getElementById('chatBox'),
          chatHint=document.getElementById('chatHint'),
          chatInput=document.getElementById('therapyInput'),
          history=[];
    function addMessage(who,txt){
      const msg=document.createElement('div');
      msg.className=who==='You'?'user-msg':'bot-msg';
      msg.innerHTML=`${formatHTML(txt)}<div class="timestamp">${new Date().toLocaleTimeString()}</div>`;
      chatBox.append(msg); chatBox.scrollTop=chatBox.scrollHeight;
    }
    document.getElementById('sendChat').onclick=async e=>{
      e.preventDefault();
      const txt=chatInput.value.trim();
      if(!txt)return;
      addMessage('You',txt); history.push({who:'You',text:txt});
      chatInput.value=''; chatHint.style.display='block';
      const sys=`You are a therapist. Modality=${document.getElementById('therapyModality').value};Length=${document.getElementById('therapyLength').value};Language=${document.getElementById('therapyLang').value}.`;
      try{
        const reply=await callOpenAI([{role:'system',content:sys},{role:'user',content:txt}]);
        addMessage('Therapist',reply); history.push({who:'Therapist',text:reply});
      }catch{
        addMessage('Therapist','âš ï¸ Something went wrong.');
      }finally{chatHint.style.display='none';}
    };

    // â”€â”€ Mood Tracker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const moodR=document.getElementById('moodRange'), moodV=document.getElementById('moodValue');
    moodR.oninput=()=>moodV.textContent=moodR.value;
    document.getElementById('mood-form').onsubmit=async e=>{
      e.preventDefault();
      const panel=getPanel('moodTracker');
      panel.innerHTML=`<div class="result-content">Analyzingâ€¦ <span class="spinner"></span></div>`;
      const data={
        mood:moodR.value,
        emotions:[...document.querySelectorAll('input[name="emotions"]:checked')].map(c=>c.value),
        triggers:[...document.querySelectorAll('input[name="triggers"]:checked')].map(c=>c.value),
        note:document.getElementById('moodNote').value.trim(),
        selfCare:document.getElementById('selfCare').value
      };
      try{
        const reply=await callOpenAI([{role:'system',content:'You are a mental health assistant.'},{role:'user',content:`Daily Mood Entry:\n${JSON.stringify(data)}`}]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{
        panel.innerHTML=`<div class="result-content">ğŸ˜• Something went wrong.</div>`;
      }
    };

    // â”€â”€ Dream Explorer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('analyzeDream').onclick=async()=>{
      const panel=getPanel('dream');
      panel.innerHTML=`<div class="result-content">Analyzingâ€¦ <span class="spinner"></span></div>`;
      const narrative=document.getElementById('dreamText').value.trim();
      const symbols=[...document.querySelectorAll('#dream input[type="checkbox"]:checked')].map(cb=>cb.value).join(', ');
      const pre=document.getElementById('preMood').value, post=document.getElementById('postMood').value;
      const tags=document.getElementById('dreamTags').value.trim(), reflect=document.getElementById('dreamReflect').value.trim();
      try{
        const reply=await callOpenAI([
          {role:'system',content:'You are a dream interpreter.'},
          {role:'user',content:`Narrative: ${narrative}\nSymbols: ${symbols}\nBefore sleep: ${pre}\nOn waking: ${post}\nTags: ${tags}\nReflection: ${reflect}`}
        ]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{panel.innerHTML=`<div class="result-content">ğŸ˜• Oops! Something went wrong.</div>`;}
    };
    document.getElementById('interpretSymbols').onclick=async()=>{
      const panel=getPanel('dream');
      panel.innerHTML=`<div class="result-content">Interpretingâ€¦ <span class="spinner"></span></div>`;
      const symbols=[...document.querySelectorAll('#dream input[type="checkbox"]:checked')].map(cb=>cb.value).join(', ');
      try{
        const reply=await callOpenAI([{role:'system',content:'You are a dream symbol interpreter.'},{role:'user',content:`Symbols: ${symbols}`}]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{panel.innerHTML=`<div class="result-content">ğŸ˜• Oops! Something went wrong.</div>`;}
    };
    document.getElementById('generatePrompts').onclick=async()=>{
      const panel=getPanel('dream');
      panel.innerHTML=`<div class="result-content">Generatingâ€¦ <span class="spinner"></span></div>`;
      const narrative=document.getElementById('dreamText').value.trim();
      try{
        const reply=await callOpenAI([{role:'system',content:'You are a creative writing assistant.'},{role:'user',content:`Generate 3 journaling prompts inspired by: ${narrative}`}]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{panel.innerHTML=`<div class="result-content">ğŸ˜• Oops! Something went wrong.</div>`;}
    };

    // â”€â”€ Neurotransmitter Balance â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('analyzeNeuro').onclick=async()=>{
      const panel=getPanel('neurotransmitter');
      panel.innerHTML=`<div class="result-content">Analyzingâ€¦ <span class="spinner"></span></div>`;
      const data={
        mood:document.getElementById('ntMood').value,
        sleep:document.getElementById('ntSleep').value,
        appetite:document.getElementById('ntAppetite').value,
        adherence:document.getElementById('ntAdherence').value
      };
      try{
        const reply=await callOpenAI([{role:'system',content:'You are a neurotransmitter balance expert.'},{role:'user',content:`Symptom profile:\n${JSON.stringify(data)}`}]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{panel.innerHTML=`<div class="result-content">ğŸ˜• Something went wrong.</div>`;}
    };

    // â”€â”€ Pharmacogenomics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('runPGx').onclick=async e=>{
      e.preventDefault();
      const panel=getPanel('pharmacogenomics');
      panel.innerHTML=`<div class="result-content">Processingâ€¦ <span class="spinner"></span></div>`;
      const fileInput=document.getElementById('pgxUpload');
      if(!fileInput.files.length) return panel.innerHTML='';
      const med=document.getElementById('pgxDrug').value;
      // In practice you'd read and send the JSON; here we just note â€œuploadedâ€
      try{
        const reply=await callOpenAI([{role:'system',content:'You are a pharmacogenomics specialist.'},{role:'user',content:`Genotype uploaded. Medication: ${med}`}]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{panel.innerHTML=`<div class="result-content">ğŸ˜• Something went wrong.</div>`;}
    };

    // â”€â”€ Drug Interactions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('checkInt').onclick=async e=>{
      e.preventDefault();
      const panel=getPanel('interactions');
      panel.innerHTML=`<div class="result-content">Checkingâ€¦ <span class="spinner"></span></div>`;
      const meds=document.getElementById('intList').value.trim();
      if(!meds) return panel.innerHTML='';
      try{
        const reply=await callOpenAI([{role:'system',content:'You are a drug interaction checker.'},{role:'user',content:`Med list: ${meds}`}]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{panel.innerHTML=`<div class="result-content">ğŸ˜• Something went wrong.</div>`;}
    };

    // â”€â”€ EEG Analysis â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('analyzeEEG').onclick=async e=>{
      e.preventDefault();
      const panel=getPanel('eeg');
      panel.innerHTML=`<div class="result-content">Analyzingâ€¦ <span class="spinner"></span></div>`;
      const f=document.getElementById('eegFile');
      if(!f.files.length) return panel.innerHTML='';
      try{
        const reply=await callOpenAI([{role:'system',content:'You are an EEG interpreter.'},{role:'user',content:'EEG file uploaded.'}]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{panel.innerHTML=`<div class="result-content">ğŸ˜• Something went wrong.</div>`;}
    };

    // â”€â”€ Trial Matching â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('findTrials').onclick=async e=>{
      e.preventDefault();
      const panel=getPanel('trialmatch');
      panel.innerHTML=`<div class="result-content">Searchingâ€¦ <span class="spinner"></span></div>`;
      const dx=document.getElementById('trialDx').value.trim();
      const loc=document.getElementById('trialLoc').value.trim();
      if(!dx||!loc) return panel.innerHTML='';
      try{
        const reply=await callOpenAI([{role:'system',content:'You are a clinical trial matching engine.'},{role:'user',content:`Diagnosis: ${dx}\nLocation: ${loc}`}]);
        panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
      }catch{panel.innerHTML=`<div class="result-content">ğŸ˜• Something went wrong.</div>`;}
    };

    // â”€â”€ Creative Therapies â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function wire(id,sys,ask,sec){
      const btn=document.getElementById(id);
      if(!btn)return;
      btn.onclick=async()=>{ 
        const panel=getPanel(sec);
        panel.innerHTML=`<div class="result-content">Generatingâ€¦ <span class="spinner"></span></div>`;
        const val=document.querySelector(`#${id.replace(/[^a-z]/g,'')}Type, #creativeDetail`)?.value||prompt(ask);
        if(!val)return panel.innerHTML='';
        try{
          const reply=await callOpenAI([{role:'system',content:sys},{role:'user',content:val}]);
          panel.innerHTML=`<div class="result-content">${formatHTML(reply)}</div>`;
        }catch{panel.innerHTML=`<div class="result-content">âš ï¸ Something went wrong.</div>`;}
      };
    }
    wire('artEmotion','Generate an AI creative prompt','Enter a themeâ€¦','creative');

    // â”€â”€ Cognitive Games â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    wire('puzzles','Create an adaptive puzzle','Enter a topicâ€¦','games');

    // â”€â”€ Medication Management & Symptom Quiz (reuse moodTracker style) â”€â”€â”€â”€â”€
    wire('medInteraction','Warn of drug interactions','Enter med listâ€¦','medsafety');
    wire('adherence','Set adherence reminders','What schedule?','medsafety');
    wire('launchQuiz','Evaluate symptoms & advise','Enter survey answersâ€¦','symptomQuiz');

    // â”€â”€ Chart.js & CSV Export â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const engCtx=document.getElementById('engagementChart').getContext('2d'),
          outCtx=document.getElementById('outcomeChart').getContext('2d');
    const engChart=new Chart(engCtx,{type:'line',data:{labels:['Mon','Tue','Wed','Thu','Fri'],datasets:[{label:'Sessions',data:[12,9,14,11,13],borderColor:getComputedStyle(document.documentElement).getPropertyValue('--primary').trim(),fill:false}]}});
    const outChart=new Chart(outCtx,{type:'bar',data:{labels:['Week 1','Week 2','Week 3'],datasets:[{label:'Outcome',data:[3.2,4.1,4.5],backgroundColor:getComputedStyle(document.documentElement).getPropertyValue('--secondary').trim()}]}});
    document.getElementById('exportCharts').onclick=()=>{
      let csv='Chart,Label,Value\n';
      [['Sessions',engChart],['Outcome',outChart]].forEach(([name,ch])=>{
        ch.data.labels.forEach((lab,i)=>csv+=`${name},${lab},${ch.data.datasets[0].data[i]}\n`);
      });
      const blob=new Blob([csv],{type:'text/csv'}),url=URL.createObjectURL(blob),a=document.createElement('a');
      a.href=url;a.download='analytics.csv';a.click();URL.revokeObjectURL(url);
    };

  });
  </script>
</body>
</html>
