<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Vitra AI – Herbal Medicine Hub</title>

  <!-- Fonts & Icons (only one of each) -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet"/>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
  /*────────────────── RESET & BASE ──────────────────*/
  *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
  html { font-family:'Montserrat',sans-serif; font-size:16px; scroll-behavior:smooth; }
  h1,h2,h3,h4 { font-family:'Playfair Display',serif; }
  body { display:flex; min-height:100vh; background:#F9F5EF; color:#333; overflow-x:hidden; }

  /*────────────────── VARIABLES ──────────────────*/
  :root {
    --primary-green:   #2E7D32;
    --primary-brown:   #6D4C41;
    --accent-gold:     #D4AF37;
    --ivory:           #F9F5EF;
    --text:            #333333;
    --muted:           #7A8A93;
    --surface:         #FFFFFF;
    --radius:          .75rem;
    --padding:         1rem;
    --transition:      .3s ease;
    --sidebar-w:       280px;
    --header-h:        64px;
  }
  html.dark {
    --surface: #2A2A2A;
    background:#121212; color:#ECECEC;
  }

  /*────────────────── LAYOUT ──────────────────*/
  aside { width:var(--sidebar-w); background:var(--surface); box-shadow:2px 0 12px rgba(0,0,0,0.05); position:fixed; height:100vh; }
  main  { margin-left:var(--sidebar-w); flex:1; padding:calc(var(--header-h) + var(--padding)) var(--padding) var(--padding) var(--padding); }
  header { position:fixed; top:0; left:var(--sidebar-w); right:0; height:var(--header-h); background:var(--surface); display:flex; align-items:center; justify-content:space-between; padding:0 var(--padding); box-shadow:0 1px 4px rgba(0,0,0,0.1); z-index:100; }

  /*────────────────── TYPOGRAPHY ──────────────────*/
  header h1 { font-size:1.5rem; color:var(--primary-green); }
  .hero h2 { font-size:2rem; margin-bottom:.5rem; color:var(--primary-green); }
  .hero p  { margin-bottom:1rem; color:var(--text); }

  /*────────────────── NAVIGATION ──────────────────*/
  aside .brand { font-size:1.4rem; padding:var(--padding); color:var(--primary-brown); display:flex; align-items:center; gap:.5rem; }
  aside nav a { display:flex; align-items:center; gap:.75rem; padding:.75rem var(--padding); color:var(--text); text-decoration:none; transition:background var(--transition); }
  aside nav a.active, aside nav a:hover { background:rgba(47, 105, 78, 0.1); color:var(--primary-green); }
  aside nav a i { width:1.2rem; text-align:center; }

  /*────────────────── MODULE CARDS ──────────────────*/
  .module { background:var(--surface); border-radius:var(--radius); padding:var(--padding); margin-bottom:1.5rem; box-shadow:0 2px 8px rgba(0,0,0,0.03); transition:transform var(--transition),box-shadow var(--transition); }
  .module:hover { transform:translateY(-4px); box-shadow:0 4px 16px rgba(0,0,0,0.06); }
  .module h2 { display:flex; align-items:center; gap:.75rem; margin-bottom:.5rem; color:var(--primary-green); }
  .module p.desc { color:var(--muted); margin-bottom:1rem; }

  /*────────────────── FORMS & INPUTS ──────────────────*/
  .module form { display:flex; flex-wrap:wrap; gap:1rem; align-items:flex-end; }
  .module input, .module select, .module textarea { flex:1 1 200px; padding:.75rem; border:1.5px solid #D1DCE5; border-radius:var(--radius); transition:border-color var(--transition),box-shadow var(--transition); }
  .module input:focus, .module select:focus, .module textarea:focus { outline:none; border-color:var(--primary-green); box-shadow:0 0 8px rgba(46,125,50,.2); }
  .hint { width:100%; font-size:.85rem; color:var(--muted); }

  /*────────────────── BUTTONS ──────────────────*/
  button { background:var(--primary-green); color:#FFF; border:none; border-radius:var(--radius); padding:.7rem 1.4rem; font-weight:600; cursor:pointer; transition:transform var(--transition),box-shadow var(--transition); }
  button:disabled { opacity:.6; cursor:not-allowed; }
  button:hover:not(:disabled) { transform:scale(1.03); box-shadow:0 5px 14px rgba(0,0,0,0.12); }

  /*────────────────── RESPONSE PANELS ──────────────────*/
  .response { background:rgba(47,125,50,.1); border-left:4px solid var(--primary-green); padding:var(--padding); border-radius:var(--radius); position:relative; margin-top:1rem; aria-live:polite; }
  .response .close-btn { position:absolute; top:.5rem; right:.5rem; background:var(--primary-green); color:#FFF; border:none; border-radius:50%; width:24px; height:24px; display:flex; align-items:center; justify-content:center; cursor:pointer; }

  /*────────────────── HERO SECTION ──────────────────*/
  .hero { text-align:center; padding:4rem 1rem; background:linear-gradient(135deg, rgba(47,125,50,.1), rgba(109,76,65,.1)); border-radius:0 0 var(--radius) var(--radius); margin-bottom:2rem; }
  .hero video { max-width:100%; border-radius:var(--radius); margin:1rem 0; }

  /*────────────────── FOOTER ──────────────────*/
  footer { padding:1rem; text-align:center; background:var(--surface); }
  footer a { color:var(--primary-green); margin:0 .5rem; font-size:.9rem; }

  /*────────────────── RESPONSIVE ──────────────────*/
  @media(max-width:1024px){ aside{position:fixed;transform:translateX(-100%);z-index:200;} aside.open{transform:translateX(0);} header{left:0;} main{margin-left:0;} }
  @media(max-width:640px){ .module form{flex-direction:column;} .hero{padding:2rem 1rem;} }

  </style>
</head>

<body>
  <!-- SIDEBAR / NAVIGATION -->
  <aside id="sidebar">
    <div class="brand"><i class="fas fa-leaf"></i><span>Vitra AI</span></div>
    <nav>
      <a href="#hero" class="active"><i class="fas fa-home"></i><span>Home</span></a>
      <a href="#dx"><i class="fas fa-stethoscope"></i><span>Herb Diagnostics</span></a>
      <a href="#identify"><i class="fas fa-camera"></i><span>Identify Herb</span></a>
      <a href="#formulate"><i class="fas fa-flask"></i><span>Formulations</span></a>
      <a href="#research"><i class="fas fa-chart-pie"></i><span>Efficacy</span></a>
      <a href="#chat"><i class="fas fa-comments"></i><span>Herbalist Chat</span></a>
      <!-- Advanced / less-used -->
      <a href="#safety"><i class="fas fa-exclamation-triangle"></i><span>Safety Checker</span></a>
      <a href="#research-sum"><i class="fas fa-book-reader"></i><span>Research</span></a>
      <a href="#inventory"><i class="fas fa-warehouse"></i><span>Inventory</span></a>
      <a href="#genetics"><i class="fas fa-dna"></i><span>Genetics</span></a>
      <a href="#dosage"><i class="fas fa-calculator"></i><span>Dosage</span></a>
      <a href="#interaction"><i class="fas fa-exchange-alt"></i><span>Interactions</span></a>
      <hr/>
      <a href="#analytics"><i class="fas fa-chart-line"></i><span>Analytics</span></a>
      <a href="#about"><i class="fas fa-info-circle"></i><span>About & Tech</span></a>
      <a href="#contact"><i class="fas fa-envelope"></i><span>Contact</span></a>
    </nav>
  </aside>

  <!-- HEADER -->
  <header>
    <div>
      <i id="hamburger" class="fas fa-bars"></i>
      <h1>Herbal Medicine Hub</h1>
    </div>
    <div>
      <i id="themeToggle" class="fas fa-moon" title="Toggle dark mode"></i>
      <button onclick="openLogin()">Login</button>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main>
    <!-- 1. HERO SECTION -->
    <section id="hero" class="hero">
      <h2>Empowering Traditional Healing with Artificial Intelligence</h2>
      <p>Scan herbs, get personalized formulations, and chat with our AI herbalist—all in one place.</p>
      <!-- placeholder intro video -->
      <video controls muted loop>
        <source src="intro-demo.mp4" type="video/mp4">
        Your browser does not support video.
      </video>
      <div>
        <button onclick="scrollToSection('identify')">Try Herb Identifier</button>
        <button onclick="scrollToSection('chat')">Chat with Herbalist</button>
      </div>
    </section>

    <!-- 2. AI Diagnostics (Symptom → Herb) -->
    <section id="dx" class="module">
      <h2><i class="fas fa-stethoscope"></i> AI Diagnostics</h2>
      <p class="desc">Describe symptoms; get herb suggestions with evidence levels.</p>
      <small>Levels of evidence: <strong>Well-studied</strong>, <em>Anecdotal</em></small>
      <form id="dx-form">
        <label for="dxInput" class="visually-hidden">Describe your symptoms</label>
        <textarea id="dxInput" rows="2" placeholder="e.g. Persistent headaches & fatigue…" required></textarea>
        <button id="dxSubmit" type="submit">Analyze</button>
        <div class="hint">Include duration, intensity. For serious signs, consult a professional.</div>
      </form>
      <div id="dxResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <div class="result-content"></div>
        <div><button onclick="scrollToSection('chat')">Discuss with Herbalist</button>
             <button onclick="scrollToSection('formulate')">Go to Formulations</button></div>
      </div>
    </section>

    <!-- 3. Herb Identification (Image Upload) -->
    <section id="identify" class="module">
      <h2><i class="fas fa-camera"></i> Herb Identification</h2>
      <p class="desc">Upload a clear photo; we’ll identify the plant (likely match).</p>
      <form id="id-form">
        <input id="idUpload" type="file" accept="image/*" required/>
        <small id="idFilename" class="hint"></small>
        <button id="idSubmit" type="submit">Identify</button>
        <div class="hint">Use a close-up of leaf/flower. Do not ingest without confirmation.</div>
      </form>
      <div id="idResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <!-- Placeholder -->
        <p>Our AI thinks this is <em>Moringa oleifera</em></p>
        <ul>
          <li><strong>Uses:</strong> Anti-inflammatory, antioxidant</li>
          <li><strong>Cautions:</strong> Possible GI upset</li>
          <li><strong>Regions:</strong> West Africa, South Asia</li>
        </ul>
        <button>Add to My Herb Shelf</button>
      </div>
    </section>

    <!-- 4. Personalized Formulations -->
    <section id="formulate" class="module">
      <h2><i class="fas fa-flask"></i> Personalized Formulations</h2>
      <p class="desc">Select herbs, age & weight for a safe custom blend.</p>
      <form id="pf-form">
        <label for="pfHerbs" class="visually-hidden">Select herbs</label>
        <select id="pfHerbs" multiple size="5" required>
          <!-- …options… -->
        </select>
        <input id="pfAge" type="number" min="1" max="120" placeholder="Age (years)" required/>
        <input id="pfWeight" type="number" min="10" max="300" placeholder="Weight (kg)" required/>
        <button id="pfSubmit" type="submit">Generate</button>
        <div class="hint">Hold Ctrl/Cmd to multi-select. Dosage safety enforced.</div>
      </form>
      <div id="pfResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <div class="result-content"></div>
      </div>
    </section>

    <!-- 5. Efficacy Prediction -->
    <section id="research" class="module">
      <h2><i class="fas fa-chart-pie"></i> Efficacy Prediction</h2>
      <p class="desc">See efficacy score with study citations.</p>
      <form id="pred-form">
        <input id="predInput" placeholder="e.g. Turmeric for arthritis" required/>
        <button id="predSubmit" type="submit">Predict</button>
        <div class="hint">Score contextualized: “Based on 3 RCTs…”</div>
      </form>
      <div id="predResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <div class="result-content"></div>
      </div>
    </section>

    <!-- 6. Safety Checker -->
    <section id="safety" class="module">
      <h2><i class="fas fa-exclamation-triangle"></i> Safety Checker</h2>
      <p class="desc">Enter herbs/medications to check dangerous combos.</p>
      <form id="safety-form">
        <select id="safetyA" required><!-- …options… --></select>
        <select id="safetyB" required><!-- …options… --></select>
        <button id="safetySubmit" type="submit">Check</button>
        <div class="hint">Pick two distinct items. Severity color-coded.</div>
      </form>
      <div id="safetyResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <div class="result-content"></div>
      </div>
    </section>

    <!-- 7. Education Chatbot -->
    <section id="chat" class="module">
      <h2><i class="fas fa-comments"></i> AI Herbalist Chat</h2>
      <p class="desc">Ask our LLM herbalist anything—urgent flags auto-escalate.</p>
      <div id="chatBox"></div>
      <div style="display:flex;gap:.5rem">
        <input id="chatInput" placeholder="e.g. Menstrual cramp remedy?" aria-label="Your question"/>
        <button id="chatSubmit"><i class="fas fa-paper-plane"></i></button>
      </div>
      <div id="chatHint" class="hint" hidden>Thinking… <span class="spinner"></span></div>
    </section>

    <!-- 8. Research Summaries -->
    <section id="research-sum" class="module">
      <h2><i class="fas fa-book-reader"></i> Research Summaries</h2>
      <p class="desc">Get concise summaries + DOIs.</p>
      <form id="rs-form">
        <input id="rsInput" placeholder="e.g. ‘Ashwagandha anxiety RCT’" required/>
        <button id="rsSubmit" type="submit">Summarize</button>
        <div class="hint">Include herb & focus. Links to original.</div>
      </form>
      <div id="rsResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <div class="result-content"></div>
      </div>
    </section>

    <!-- 9. Inventory Forecast -->
    <section id="inventory" class="module">
      <h2><i class="fas fa-warehouse"></i> Inventory Forecast</h2>
      <p class="desc">Forecast stock with seasonality & buffer stock.</p>
      <form id="inv-form">
        <select id="invHerb" required><!-- …options… --></select>
        <input id="invWeeks" type="number" min="1" max="52" value="4" required/>
        <button id="invSubmit" type="submit">Forecast</button>
        <div class="hint">1–52 weeks ahead. Includes safety stock.</div>
      </form>
      <div id="invResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <canvas id="invChart"></canvas>
      </div>
    </section>

    <!-- 10. Genetics Match -->
    <section id="genetics" class="module">
      <h2><i class="fas fa-dna"></i> Genetics Match</h2>
      <p class="desc">Upload your genetic report (Tiered evidence).</p>
      <form id="gen-form">
        <input id="genFile" type="file" accept=".csv,.json" required/>
        <button id="genSubmit" type="submit">Analyze</button>
        <div class="hint">Tier 1=established; Tier 2=emerging science.</div>
      </form>
      <div id="genResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <div class="result-content"></div>
      </div>
    </section>

    <!-- 11. Dosage Calculator -->
    <section id="dosage" class="module">
      <h2><i class="fas fa-calculator"></i> Dosage Calculator</h2>
      <p class="desc">Specify form & extract concentration for accurate dosing.</p>
      <form id="dose-form">
        <input id="doseWeight" type="number" min="10" max="300" placeholder="Weight (kg)" required/>
        <select id="doseForm" required>
          <option value="">Select form…</option>
          <option value="tea">Tea</option>
          <option value="tincture">Tincture</option>
          <option value="capsule">Capsule</option>
        </select>
        <input id="doseConc" type="text" placeholder="Extract % (e.g. 5%)" required/>
        <input id="doseSymptom" placeholder="Symptom (e.g. headache)" required/>
        <button id="doseSubmit" type="submit">Calculate</button>
      </form>
      <div id="doseResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <div class="result-content"></div>
      </div>
    </section>

    <!-- 12. Business Insights & ROI Calculator -->
    <section id="analytics" class="module">
      <h2><i class="fas fa-chart-line"></i> Executive Dashboard & ROI</h2>
      <form id="roi-form" style="margin-bottom:1rem;">
        <input id="roiPrescriptions" type="number" placeholder="Avg monthly prescriptions" required/>
        <input id="roiHerbCost" type="number" placeholder="Avg herb cost per Rx ($)" required/>
        <button id="roiSubmit" type="submit">Calculate ROI</button>
      </form>
      <div id="roiResult" class="response" aria-live="polite" hidden>
        <button class="close-btn" aria-label="Close result">×</button>
        <div id="roiContent"></div>
      </div>
      <!-- Sample charts -->
      <canvas id="usageChart"></canvas>
      <canvas id="supplyChart"></canvas>
    </section>

    <!-- 13. About & Architecture -->
    <section id="about" class="module">
      <h2><i class="fas fa-info-circle"></i> About & Tech Architecture</h2>
      <p>Vitra AI is the CTO’s unified platform for AI-driven health services across five pillars. We adhere to HIPAA compliance, audit logging, and secure role-based access.</p>
      <!-- Replace with your SVG -->
      <img src="architecture-diagram.svg" alt="Architecture & data flow diagram" style="max-width:100%;"/>
    </section>

    <!-- 14. Contact & Footer -->
    <section id="contact" class="module">
      <h2><i class="fas fa-envelope"></i> Contact & Policies</h2>
      <p>Have questions or partnership inquiries? Reach us at <a href="mailto:contact@vitra.ai">contact@vitra.ai</a>.</p>
      <p class="hint">By using this site, you consent to our <a href="#privacy" onclick="openPrivacy()">Privacy Policy</a> and <a href="#disclaimer" onclick="openDisclaimer()">Disclaimer</a>.</p>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    © 2025 Vitra AI · <a href="#terms">Terms</a> · <a href="#privacy" onclick="openPrivacy()">Privacy</a> · <a href="#disclaimer" onclick="openDisclaimer()">Disclaimer</a>
  </footer>

  <!-- LOGIN & MODALS (hidden by default) -->
  <div id="loginModal" class="modal" hidden>
    <!-- role-based access: admin vs. pharmacist vs. user -->
  </div>
  <div id="privacyModal" class="modal" hidden>
    <h3>Privacy Policy</h3><p>Your data is not stored beyond session. Genetic data is encrypted…</p>
  </div>
  <div id="disclaimerModal" class="modal" hidden>
    <h3>Disclaimer</h3><p>For informational purposes only. Consult a qualified healthcare professional.</p>
  </div>

  <script>
  // ──────── UTILITIES ────────
  function scrollToSection(id){ document.getElementById(id).scrollIntoView({behavior:'smooth'}); }
  document.getElementById('idUpload').onchange = e => {
    document.getElementById('idFilename').textContent = e.target.files[0]?.name || '';
  };
  // Toggle dark mode
  document.getElementById('themeToggle').onclick = () => document.documentElement.classList.toggle('dark');

  // Simplified modal toggles
  function openLogin(){ document.getElementById('loginModal').hidden=false; }
  function openPrivacy(){ document.getElementById('privacyModal').hidden=false; }
  function openDisclaimer(){ document.getElementById('disclaimerModal').hidden=false; }

  // Attach close handlers
  document.querySelectorAll('.close-btn').forEach(btn=>{
    btn.onclick = ()=> btn.closest('.response, .modal').hidden = true;
  });

  // Disable submit buttons on load
  function wireButton(formId, btnId, handler){
    const form=document.getElementById(formId), btn=document.getElementById(btnId);
    form.onsubmit = async e=>{
      e.preventDefault();
      btn.disabled=true;
      await handler(e);
      btn.disabled=false;
    };
  }

  // Placeholder call to AI proxy
  async function callAI(system, user){ /*…fetch…*/ return "AI response…"; }

  // 1. AI Diagnostics
  wireButton('dx-form','dxSubmit',async()=>{
    const panel=document.getElementById('dxResult');
    panel.querySelector('.result-content').textContent='Brewing…';
    panel.hidden=false;
    const resp=await callAI('You are…','User:'+document.getElementById('dxInput').value);
    panel.querySelector('.result-content').textContent=resp;
  });

  // 2. Identification
  wireButton('id-form','idSubmit',async()=>{
    const panel=document.getElementById('idResult');
    panel.hidden=false;
  });

  // 3. Formulations
  wireButton('pf-form','pfSubmit',async()=>{
    document.getElementById('pfResult').hidden=false;
  });

  // 4. Efficacy Prediction
  wireButton('pred-form','predSubmit',async()=>{
    document.getElementById('predResult').hidden=false;
  });

  // 5. Safety Checker
  wireButton('safety-form','safetySubmit',async()=>{
    const a=document.getElementById('safetyA').value, b=document.getElementById('safetyB').value;
    if(a===b){ alert('Please pick two different items.'); return; }
    document.getElementById('safetyResult').hidden=false;
  });

  // 6. Chatbot
  document.getElementById('chatSubmit').onclick=async()=>{
    const box=document.getElementById('chatBox'), hint=document.getElementById('chatHint');
    hint.hidden=false;
    box.innerHTML+=`<p><strong>You:</strong> ${document.getElementById('chatInput').value}</p>`;
    const resp=await callAI('Hermit…',document.getElementById('chatInput').value);
    hint.hidden=true;
    box.innerHTML+=`<p><strong>Herbalist:</strong> ${resp}</p>`;
    box.scrollTop=box.scrollHeight;
  };

  // 7. Research Summaries
  wireButton('rs-form','rsSubmit',async()=>{
    document.getElementById('rsResult').hidden=false;
  });

  // 8. Inventory Forecast (with Chart.js)
  wireButton('inv-form','invSubmit',async()=>{
    document.getElementById('invResult').hidden=false;
    new Chart(document.getElementById('invChart'),{type:'bar',data:{labels:['Turmeric'],datasets:[{data:[Math.random()*100],label:'Forecast'}]}});
  });

  // 9. Genetics Match
  wireButton('gen-form','genSubmit',async()=>{
    document.getElementById('genResult').hidden=false;
  });

  // 10. Dosage Calculator
  wireButton('dose-form','doseSubmit',async()=>{
    document.getElementById('doseResult').hidden=false;
  });

  // ROI Calculator
  wireButton('roi-form','roiSubmit',async()=>{
    const p=+document.getElementById('roiPrescriptions').value,
          c=+document.getElementById('roiHerbCost').value;
    const savings = p * c * 0.2, revenue = p * c * 0.1;
    const out=`Est. monthly savings: $${savings.toFixed(2)}<br>Projected uplift: $${revenue.toFixed(2)}`;
    const el=document.getElementById('roiContent');
    el.innerHTML=out;
    document.getElementById('usageChart')&&new Chart(document.getElementById('usageChart'),{type:'line',data:{labels:['W1','W2','W3','W4'],datasets:[{label:'Scans',data:[20,30,40,50]}]}});
    document.getElementById('supplyChart')&&new Chart(document.getElementById('supplyChart'),{type:'pie',data:{labels:['Saved','Used'],datasets:[{data:[savings,revenue]}]}});
    document.getElementById('roiResult').hidden=false;
  });

  </script>
</body>
</html>
