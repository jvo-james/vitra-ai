<!DOCTYPE html>
<html lang="en" aria-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Consultation Booking</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
 <script defer src="https://js.paystack.co/v1/inline.js"></script>

<style>
  :root {
    --cb-primary: #3b3f88;
    --cb-primary-alt: #5c4d99;
    --cb-sidebar-width: 250px;
    --cb-sidebar-shrink-width: 80px;
    --cb-text-light: #ffffff;
    --cb-text-muted: #e0e0e0;
    --cb-bg-hover: rgba(255,255,255,0.1);
    --cb-transition: 0.3s ease;
  }

  /* Sidebar base */
  aside#sidebar {
    position: fixed;
    top: 0; left: 0;
    width: var(--cb-sidebar-width);
    height: 100vh;
    background-color: var(--cb-primary);
    color: var(--cb-text-light);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: width var(--cb-transition);
    overflow: hidden;
    z-index: 1000;
  }

  /* Shrinked sidebar */
  body.sidebar-shrink aside#sidebar {
    width: var(--cb-sidebar-shrink-width);
  }

  /* Logo area */
  aside#sidebar .logo {
    display: flex;
    align-items: center;
    padding: 1.5rem 1rem;
  }
  aside#sidebar .logo svg {
    width: 2.5rem;
    height: 2.5rem;
    fill: var(--cb-primary-alt);
    transition: transform var(--cb-transition);
  }
  aside#sidebar .logo-text {
    margin-left: 0.75rem;
    font-family: 'Montserrat', sans-serif;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--cb-text-light);
    transition: opacity var(--cb-transition);
  }
  body.sidebar-shrink aside#sidebar .logo-text {
    opacity: 0;
  }

  /* Navigation */
  aside#sidebar nav ul {
    list-style: none;
    padding: 0;
    margin: 2rem 0;
    flex-grow: 1;
  }
  aside#sidebar nav ul li {
    margin: 0.5rem 0;
  }
  aside#sidebar nav ul li a {
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    color: var(--cb-text-muted);
    font-weight: 500;
    text-decoration: none;
    border-radius: 0.5rem;
    transition: background-color var(--cb-transition), color var(--cb-transition);
  }
  aside#sidebar nav ul li a i {
    margin-right: 0.75rem;
    font-size: 1.2rem;
    width: 1.2rem;
    text-align: center;
  }
  aside#sidebar nav ul li a span {
    transition: opacity var(--cb-transition);
  }
  body.sidebar-shrink aside#sidebar nav ul li a span {
    opacity: 0;
  }

  /* Active & hover states */
  aside#sidebar nav ul li.active a,
  aside#sidebar nav ul li a:hover {
    background-color: var(--cb-bg-hover);
    color: var(--cb-text-light);
  }

  /* Shrink button */
  #shrinkSidebar {
    background-color: var(--cb-primary-alt);
    border: none;
    color: var(--cb-text-light);
    width: 2.5rem;
    height: 2.5rem;
    margin: 1rem auto;
    border-radius: 50%;
    cursor: pointer;
    transition: transform var(--cb-transition), background-color var(--cb-transition);
  }
  #shrinkSidebar i {
    transition: transform var(--cb-transition);
  }
  #shrinkSidebar:hover {
    background-color: var(--cb-primary);
    transform: scale(1.1);
  }
  body.sidebar-shrink #shrinkSidebar i {
    transform: rotate(180deg);
  }

  /* Dark mode adjustments */
  html.dark aside#sidebar {
    background-color: #2b2e66;
  }
  html.dark #shrinkSidebar {
    background-color: var(--cb-primary-alt);
  }
  html.dark aside#sidebar nav ul li a {
    color: #ccc;
  }
  html.dark aside#sidebar nav ul li.active a,
  html.dark aside#sidebar nav ul li a:hover {
    background-color: rgba(255,255,255,0.15);
    color: var(--cb-text-light);
  }

  /* Header container */
header {
  position: fixed;
  top: 0;
  left: var(--cb-sidebar-width);
  right: 0;
  height: 4rem;
  background-color: var(--cb-primary-alt);
  display: flex;
  align-items: center;
  padding: 0 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  transition: left var(--cb-transition), background-color var(--cb-transition);
  z-index: 900;
}
body.sidebar-shrink header {
  left: var(--cb-sidebar-shrink-width);
}

/* Hamburger menu */
#hamburger {
  font-size: 1.5rem;
  color: var(--cb-text-light);
  cursor: pointer;
  margin-right: 1.25rem;
  transition: transform var(--cb-transition), color var(--cb-transition);
}
#hamburger:hover {
  transform: scale(1.1);
}

/* Page title */
header h1 {
  flex-grow: 1;
  font-family: 'Montserrat', sans-serif;
  font-size: 1.6rem;
  font-weight: 600;
  color: var(--cb-text-light);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Theme toggle icon */
#themeToggle {
  font-size: 1.4rem;
  color: var(--cb-text-light);
  cursor: pointer;
  transition: transform var(--cb-transition), color var(--cb-transition);
}
#themeToggle:hover {
  transform: rotate(20deg) scale(1.1);
}

/* Dark mode header */
html.dark header {
  background-color: #4a4d8c;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* Ensure responsiveness */
@media (max-width: 768px) {
  header {
    left: 0;
    padding: 0 1rem;
  }
  body.sidebar-shrink header {
    left: 0;
  }
  #hamburger {
    margin-right: 0.75rem;
  }
  header h1 {
    font-size: 1.4rem;
  }
}

  /* 3. Hero Section */

/* Container */
#hero {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6rem 2rem 4rem calc(var(--cb-sidebar-width) + 2rem);
  background: linear-gradient(135deg, var(--cb-primary-alt) 0%, var(--cb-primary) 100%);
  color: var(--cb-text-light);
  min-height: 70vh;
  transition: padding var(--cb-transition), background var(--cb-transition);
}
body.sidebar-shrink #hero {
  padding-left: calc(var(--cb-sidebar-shrink-width) + 1rem);
}
@media (max-width: 1024px) {
  #hero {
    flex-direction: column-reverse;
    text-align: center;
    padding: 5rem 1.5rem 3rem 1.5rem;
  }
}

/* Hero Text */
#hero .hero-text {
  max-width: 600px;
  animation: fadeInUp 0.8s ease forwards;
}
#hero .hero-text h2 {
  font-size: 2.8rem;
  font-weight: 700;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}
#hero .hero-text h2 i {
  font-size: 2.5rem;
  color: var(--cb-primary-alt);
}
#hero .hero-text p.desc {
  font-size: 1.1rem;
  line-height: 1.6;
  margin-bottom: 2rem;
  opacity: 0.9;
}

/* Hero Buttons */
.btn.hero-btn {
  background-color: var(--cb-text-light);
  color: var(--cb-primary);
  font-weight: 600;
  padding: 0.85rem 1.75rem;
  border: none;
  border-radius: 2rem;
  font-size: 1rem;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  transition: background-color var(--cb-transition), transform var(--cb-transition), box-shadow var(--cb-transition);
}
.btn.hero-btn i { font-size: 1.2rem; }
.btn.hero-btn:hover {
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0,0,0,0.2);
}

/* Tips Link */
#hero .tips {
  margin-top: 1.5rem;
  font-size: 0.95rem;
  opacity: 0.85;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
#hero .tips i { color: var(--cb-primary-alt); }
#hero .tips .link-style {
  background: none;
  border: none;
  color: var(--cb-text-light);
  text-decoration: underline;
  cursor: pointer;
  font-weight: 600;
  padding: 0;
  transition: opacity var(--cb-transition);
}
#hero .tips .link-style:hover {
  opacity: 0.7;
}

/* Hero Graphic */
#hero .hero-graphic {
  max-width: 45%;
  animation: fadeInRight 1s ease forwards;
}
#hero .hero-graphic img {
  width: 100%;
  height: auto;
  border-radius: 1.5rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  transition: transform var(--cb-transition);
}
#hero .hero-graphic img:hover {
  transform: scale(1.03);
}
@media (max-width: 1024px) {
  #hero .hero-graphic { max-width: 80%; margin-bottom: 2rem; }
}

/* Animations */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInRight {
  from { opacity: 0; transform: translateX(50px); }
  to { opacity: 1; transform: translateX(0); }
}

/* Dark Mode Hero */
html.dark #hero {
  background: linear-gradient(135deg, #4a4d8c 0%, #3a3d78 100%);
}
html.dark .btn.hero-btn {
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
}
html.dark .btn.hero-btn:hover {
  background-color: var(--cb-text-light);
  color: var(--cb-primary);
}
html.dark #hero .hero-text p.desc,
html.dark #hero .tips {
  opacity: 0.8;
}

  /* 4. “Find Your Specialist” Section */

/* Section container */
#providerMatch {
  padding: 4rem 2rem calc(2rem + 4rem) calc(var(--cb-sidebar-width) + 2rem);
  transition: padding var(--cb-transition);
  background-color: #f9f9fb;
}
body.sidebar-shrink #providerMatch {
  padding-left: calc(var(--cb-sidebar-shrink-width) + 1rem);
}
@media (max-width: 1024px) {
  #providerMatch {
    padding: 3rem 1.5rem 2rem 1.5rem;
  }
}

/* Section heading */
#providerMatch > h2 {
  font-family: 'Montserrat', sans-serif;
  font-size: 2rem;
  font-weight: 700;
  color: var(--cb-primary);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.5rem;
}
#providerMatch > h2 i { color: var(--cb-primary-alt); }

/* Description text */
#providerMatch > p.desc {
  font-size: 1rem;
  color: #555;
  margin-bottom: 2rem;
  line-height: 1.5;
}

/* Form styling */
#matchForm {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}
#matchForm label {
  display: flex;
  flex-direction: column;
  font-size: 0.95rem;
  color: #333;
  font-weight: 500;
}
#matchForm label i {
  margin-bottom: 0.5rem;
  color: var(--cb-primary-alt);
  font-size: 1.2rem;
}
#matchForm input,
#matchForm select {
  margin-top: 0.5rem;
  padding: 0.65rem 1rem;
  border: 2px solid #ddd;
  border-radius: 0.75rem;
  font-size: 0.95rem;
  transition: border-color var(--cb-transition), box-shadow var(--cb-transition);
}
#matchForm input:focus,
#matchForm select:focus {
  outline: none;
  border-color: var(--cb-primary);
  box-shadow: 0 0 0 3px rgba(59,63,136,0.15);
}
#matchForm select {
  appearance: none;
  background: url('data:image/svg+xml;charset=US-ASCII,<svg fill="%233b3f88" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>') no-repeat right 1rem center;
  background-size: 1rem;
  padding-right: 2.5rem;
}

/* Find button */
#findMatchBtn {
  grid-column: 1 / -1;
  justify-self: start;
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
  border: none;
  padding: 0.85rem 2rem;
  border-radius: 2rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  transition: background-color var(--cb-transition), transform var(--cb-transition);
}
#findMatchBtn:hover {
  background-color: var(--cb-primary-alt);
  transform: translateY(-1px);
}

/* Match results card */
#matchResults {
  position: relative;
  background-color: #fff;
  border-radius: 1rem;
  padding: 2rem;
  box-shadow: 0 6px 18px rgba(0,0,0,0.1);
  display: flex;
  align-items: center;
  gap: 1.5rem;
  margin-bottom: 2rem;
}
#matchResults .card {
  display: flex;
  align-items: center;
  gap: 1rem;
}
#matchResults .card i {
  color: var(--cb-primary-alt);
}
#matchResults .details h4 {
  font-size: 1.2rem;
  margin: 0;
  font-weight: 600;
}
#matchResults .details p {
  margin: 0.25rem 0 0;
  color: #666;
}

/* Close & back buttons */
#matchResults .close-btn,
#matchResults .btn-sm.back {
  position: absolute;
  top: 1rem;
  background: none;
  border: none;
  font-size: 1.1rem;
  cursor: pointer;
  color: #888;
  transition: color var(--cb-transition), transform var(--cb-transition);
}
#matchResults .close-btn { right: 1rem; }
#matchResults .btn-sm.back { left: 1rem; }
#matchResults .close-btn:hover,
#matchResults .btn-sm.back:hover {
  color: var(--cb-primary);
  transform: scale(1.2);
}

/* Schedule button */
#scheduleMatchBtn {
  margin-left: auto;
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
  border: none;
  padding: 0.7rem 1.5rem;
  border-radius: 1.5rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color var(--cb-transition), transform var(--cb-transition);
}
#scheduleMatchBtn:hover {
  background-color: var(--cb-primary);
  transform: translateY(-1px);
}

/* Dark mode adjustments */
html.dark #providerMatch {
  background-color: #2e2f3e;
}
html.dark #providerMatch > p.desc,
html.dark #matchForm label {
  color: #ccc;
}
html.dark #matchForm input,
html.dark #matchForm select {
  background-color: #3a3b4e;
  border-color: #555;
  color: #eee;
}
html.dark #matchForm input:focus,
html.dark #matchForm select:focus {
  box-shadow: 0 0 0 3px rgba(92,77,153,0.3);
}
html.dark #findMatchBtn {
  background-color: var(--cb-primary-alt);
}
html.dark #findMatchBtn:hover {
  background-color: var(--cb-text-light);
  color: var(--cb-primary);
}
html.dark #matchResults {
  background-color: #3a3b4e;
  box-shadow: 0 6px 18px rgba(0,0,0,0.4);
}
html.dark #matchResults .details h4,
html.dark #matchResults .details p {
  color: #eee;
}

  /* 5. Global Input Field Styling */

/* Base inputs/selects/textareas */
input[type="text"],
input[type="email"],
input[type="date"],
input[type="time"],
input[type="search"],
select,
textarea {
  width: 100%;
  padding: 0.75rem 1rem;
  font-family: 'Montserrat', sans-serif;
  font-size: 0.95rem;
  color: #333;
  background-color: #fff;
  border: 2px solid #ddd;
  border-radius: 0.75rem;
  transition: border-color var(--cb-transition), box-shadow var(--cb-transition), background-color var(--cb-transition), color var(--cb-transition);
  box-sizing: border-box;
  margin-top: 0.5rem;
  outline: none;
}

/* Placeholder styling */
input::placeholder,
textarea::placeholder {
  color: #aaa;
  opacity: 1;
}

/* Focus state */
input:focus,
select:focus,
textarea:focus {
  border-color: var(--cb-primary);
  box-shadow: 0 0 0 3px rgba(59,63,136,0.15);
}

/* Hover state */
input:hover,
select:hover,
textarea:hover {
  border-color: var(--cb-primary-alt);
}

/* Disabled state */
input:disabled,
select:disabled,
textarea:disabled {
  background-color: #f0f0f0;
  color: #999;
  cursor: not-allowed;
}

/* Icon-enhanced inputs */
label i + input,
label i + select {
  padding-left: 2.5rem;
  background-repeat: no-repeat;
  background-position: 1rem center;
}
label i + input {
  background-image: none;
}
label i + select {
  background-image: url('data:image/svg+xml;charset=US-ASCII,<svg fill="%233b3f88" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
  background-size: 1rem;
}

/* Textarea extras */
textarea {
  min-height: 120px;
  resize: vertical;
}

/* Inputs within modals/forms */
.modal input,
.modal select,
.modal textarea {
  background-color: #fafafa;
  border-color: #ccc;
}
.modal input:focus,
.modal select:focus,
.modal textarea:focus {
  border-color: var(--cb-primary-alt);
  box-shadow: 0 0 0 3px rgba(92,77,153,0.15);
}

/* Dark mode adjustments */
html.dark input,
html.dark select,
html.dark textarea {
  background-color: #3a3b4e;
  border-color: #555;
  color: #eee;
}
html.dark input::placeholder,
html.dark textarea::placeholder {
  color: #777;
}
html.dark input:focus,
html.dark select:focus,
html.dark textarea:focus {
  box-shadow: 0 0 0 3px rgba(92,77,153,0.3);
}
html.dark input:disabled,
html.dark select:disabled,
html.dark textarea:disabled {
  background-color: #2f2f3f;
  color: #666;
}

  /* 6. Calendar Styling */

/* Calendar grid container */
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 0.25rem;
  margin-top: 1rem;
}

/* Calendar day cell */
.calendar-grid .cell {
  position: relative;
  padding: 0.75rem 0.5rem;
  text-align: center;
  font-family: 'Montserrat', sans-serif;
  font-size: 0.9rem;
  border-radius: 0.5rem;
  cursor: default;
  transition: background-color var(--cb-transition), color var(--cb-transition), transform var(--cb-transition);
}

/* Header weekday cells */
.calendar-grid .cell:first-child,
.calendar-grid .cell:nth-child(-n+7) {
  font-weight: 600;
  color: var(--cb-primary-alt);
}

/* Closed/unavailable days */
.calendar-grid .cell.closed {
  color: #bbb;
  background-color: transparent;
}

/* Available/open days */
.calendar-grid .cell.open {
  color: var(--cb-primary);
  background-color: rgba(59,63,136,0.1);
  cursor: pointer;
}
.calendar-grid .cell.open:hover {
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
  transform: translateY(-2px);
}

/* Active (selected) date */
.calendar-grid .cell.active {
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

/* Today’s date */
.calendar-grid .cell.today::after {
  content: '';
  position: absolute;
  bottom: 4px;
  right: 4px;
  width: 6px;
  height: 6px;
  background-color: var(--cb-primary-alt);
  border-radius: 50%;
}

/* Disabled/past days styling */
.calendar-grid .cell.closed.past {
  opacity: 0.5;
}

/* Time slots container */
#timeSlots {
  margin-top: 1rem;
}
#timeSlots h4 {
  font-size: 1rem;
  margin-bottom: 0.5rem;
  color: var(--cb-primary);
}
#timeSlots ul {
  list-style: none;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0;
}
#timeSlots ul li button {
  background: #fff;
  border: 2px solid var(--cb-primary);
  border-radius: 1.5rem;
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color var(--cb-transition), color var(--cb-transition), transform var(--cb-transition);
}
#timeSlots ul li button:hover {
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
  transform: translateY(-1px);
}

/* Dark mode calendar */
html.dark .calendar-grid .cell {
  color: #ccc;
}
html.dark .calendar-grid .cell.closed {
  color: #555;
}
html.dark .calendar-grid .cell.open {
  background-color: rgba(92,77,153,0.1);
  color: var(--cb-primary-alt);
}
html.dark .calendar-grid .cell.open:hover {
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
}
html.dark .calendar-grid .cell.active {
  background-color: var(--cb-primary-alt);
}
html.dark #timeSlots ul li button {
  background: #3a3b4e;
  border-color: var(--cb-primary-alt);
  color: #eee;
}
html.dark #timeSlots ul li button:hover {
  background-color: var(--cb-text-light);
  color: var(--cb-primary-alt);
}

  /* 7. All Button Styling */

/* Base button */
.btn,
button {
  font-family: 'Montserrat', sans-serif;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.65rem 1.25rem;
  font-size: 1rem;
  font-weight: 600;
  border: none;
  border-radius: 0.75rem;
  cursor: pointer;
  transition: background-color var(--cb-transition), color var(--cb-transition), transform var(--cb-transition), box-shadow var(--cb-transition);
  text-decoration: none;
}

/* Primary button */
.btn {
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.btn:hover {
  background-color: var(--cb-primary-alt);
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}

/* Secondary/smaller buttons */
.btn-sm {
  padding: 0.45rem 0.85rem;
  font-size: 0.85rem;
  border-radius: 0.5rem;
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.btn-sm:hover {
  background-color: var(--cb-primary);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* Link-style button */
button.link-style {
  background: none;
  color: var(--cb-primary);
  padding: 0;
  font-weight: 500;
  text-decoration: underline;
}
button.link-style:hover {
  opacity: 0.8;
  transform: none;
}

/* Close buttons (icon only) */
.close-btn {
  background: none;
  color: #888;
  font-size: 1.2rem;
  padding: 0.25rem;
  border-radius: 50%;
}
.close-btn:hover {
  background-color: var(--cb-bg-hover);
  color: var(--cb-primary);
  transform: scale(1.2);
}

/* Back & Next buttons */
button.back {
  background-color: #eee;
  color: #555;
  padding: 0.5rem 0.8rem;
}
button.back i {
  margin-right: 0.3rem;
}
button.back:hover {
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
}

/* Next-style (explicit) */
button.next {
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
}
button.next:hover {
  background-color: var(--cb-primary-alt);
}

/* Modal action buttons */
.modal .btn {
  width: auto;
  margin: 0.5rem 0.25rem;
}
.modal .btn-sm {
  margin: 0.5rem 0.25rem;
}

/* Disabled state */
.btn:disabled,
.btn-sm:disabled {
  background-color: #ccc;
  color: #777;
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}

/* Dark mode buttons */
html.dark .btn {
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
}
html.dark .btn:hover {
  background-color: var(--cb-text-light);
  color: var(--cb-primary-alt);
}
html.dark .btn-sm {
  background-color: var(--cb-primary);
}
html.dark .btn-sm:hover {
  background-color: var(--cb-primary-alt);
}
html.dark button.back {
  background-color: #3a3b4e;
  color: #ccc;
}
html.dark button.back:hover {
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
}
html.dark .close-btn {
  color: #aaa;
}
html.dark .close-btn:hover {
  background-color: rgba(255,255,255,0.1);
  color: var(--cb-primary-alt);
}

/* Responsive button sizing */
@media (max-width: 768px) {
  .btn {
    font-size: 0.95rem;
    padding: 0.6rem 1rem;
  }
  .btn-sm {
    font-size: 0.8rem;
    padding: 0.4rem 0.7rem;
  }
}

  /* 8. Feature-Rich Dashboard Section */

/* Section container */
#feature-rich-dashboard {
  padding: 4rem 2rem calc(2rem + 4rem) calc(var(--cb-sidebar-width) + 2rem);
  background-color: #fafafb;
  transition: padding var(--cb-transition), background-color var(--cb-transition);
}
body.sidebar-shrink #feature-rich-dashboard {
  padding-left: calc(var(--cb-sidebar-shrink-width) + 1rem);
}
@media (max-width: 1024px) {
  #feature-rich-dashboard {
    padding: 3rem 1.5rem 2rem 1.5rem;
  }
}

/* Section heading */
#feature-rich-dashboard > h2 {
  font-family: 'Montserrat', sans-serif;
  font-size: 2rem;
  font-weight: 700;
  color: var(--cb-primary);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1rem;
}
#feature-rich-dashboard > h2 i { color: var(--cb-primary-alt); }

/* Tabs container */
.dashboard-tabs {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  border-bottom: 2px solid #e0e0e5;
}
.dashboard-tabs button {
  background: none;
  border: none;
  padding: 0.65rem 1.25rem;
  font-family: 'Montserrat', sans-serif;
  font-size: 1rem;
  font-weight: 600;
  color: #666;
  cursor: pointer;
  position: relative;
  transition: color var(--cb-transition);
}
.dashboard-tabs button.active {
  color: var(--cb-primary);
}
.dashboard-tabs button.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 3px;
  background-color: var(--cb-primary);
  border-radius: 2px 2px 0 0;
}
.dashboard-tabs button:hover {
  color: var(--cb-primary-alt);
}

/* Cards grid */
.dashboard-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.5rem;
}
.dashboard-cards .card {
  background-color: #fff;
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 6px 18px rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  gap: 1rem;
  transition: transform var(--cb-transition), box-shadow var(--cb-transition), background-color var(--cb-transition);
}
.dashboard-cards .card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.1);
}

/* Card content */
.dashboard-cards .card i.fa-user-md {
  font-size: 2.5rem;
  color: var(--cb-primary);
}
.dashboard-cards .card .details h4 {
  font-size: 1.1rem;
  margin: 0;
  font-weight: 700;
  color: #333;
}
.dashboard-cards .card .details p {
  margin: 0;
  color: #555;
  font-size: 0.95rem;
}

/* Card actions */
.dashboard-cards .card .actions {
  margin-top: auto;
  display: flex;
  gap: 0.5rem;
}
.dashboard-cards .card .actions button {
  background: none;
  border: 2px solid #ddd;
  padding: 0.5rem;
  border-radius: 50%;
  cursor: pointer;
  transition: border-color var(--cb-transition), color var(--cb-transition), background-color var(--cb-transition);
}
.dashboard-cards .card .actions button i {
  font-size: 1rem;
  color: #666;
}
.dashboard-cards .card .actions button:hover {
  border-color: var(--cb-primary);
  background-color: var(--cb-primary);
}
.dashboard-cards .card .actions button:hover i {
  color: var(--cb-text-light);
}

/* Dark mode adjustments */
html.dark #feature-rich-dashboard {
  background-color: #2f2f3f;
}
html.dark .dashboard-tabs {
  border-color: #444;
}
html.dark .dashboard-tabs button {
  color: #aaa;
}
html.dark .dashboard-tabs button.active {
  color: var(--cb-primary-alt);
}
html.dark .dashboard-tabs button.active::after {
  background-color: var(--cb-primary-alt);
}
html.dark .dashboard-cards .card {
  background-color: #3a3b4e;
  box-shadow: 0 6px 18px rgba(0,0,0,0.4);
}
html.dark .dashboard-cards .card:hover {
  box-shadow: 0 8px 24px rgba(0,0,0,0.6);
}
html.dark .dashboard-cards .card .details h4,
html.dark .dashboard-cards .card .details p {
  color: #eee;
}
html.dark .dashboard-cards .card .actions button {
  border-color: #555;
}
html.dark .dashboard-cards .card .actions button i {
  color: #ccc;
}
html.dark .dashboard-cards .card .actions button:hover {
  background-color: var(--cb-primary-alt);
}

  /* 9. Dashboard Section Buttons */

/* Reschedule & Cancel Buttons */
.dashboard-cards .card .btn-reschedule,
.dashboard-cards .card .btn-cancel {
  background-color: transparent;
  border: 2px solid var(--cb-primary);
  color: var(--cb-primary);
  padding: 0.5rem;
  border-radius: 50%;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color var(--cb-transition), color var(--cb-transition), transform var(--cb-transition);
}

/* Hover states */
.dashboard-cards .card .btn-reschedule:hover {
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
  transform: scale(1.1);
}
.dashboard-cards .card .btn-cancel:hover {
  background-color: #e74c3c;
  border-color: #e74c3c;
  color: #fff;
  transform: scale(1.1);
}

/* Icons inside buttons */
.dashboard-cards .card .btn-reschedule i,
.dashboard-cards .card .btn-cancel i {
  font-size: 1rem;
  transition: color var(--cb-transition);
}

/* Dark mode adjustments */
html.dark .dashboard-cards .card .btn-reschedule {
  border-color: var(--cb-primary-alt);
  color: var(--cb-primary-alt);
}
html.dark .dashboard-cards .card .btn-reschedule:hover {
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
}
html.dark .dashboard-cards .card .btn-cancel {
  border-color: #c0392b;
  color: #c0392b;
}
html.dark .dashboard-cards .card .btn-cancel:hover {
  background-color: #e74c3c;
  color: #fff;
}

  /* 10. “Your Upcoming Appointments” Section */

/* Section container */
#upcomingCalendar {
  padding: 4rem 2rem calc(2rem + 4rem) calc(var(--cb-sidebar-width) + 2rem);
  background-color: #fff;
  transition: padding var(--cb-transition), background-color var(--cb-transition);
}
body.sidebar-shrink #upcomingCalendar {
  padding-left: calc(var(--cb-sidebar-shrink-width) + 1rem);
}
@media (max-width: 1024px) {
  #upcomingCalendar {
    padding: 3rem 1.5rem 2rem 1.5rem;
  }
}

/* Section heading & description */
#upcomingCalendar > h2 {
  font-family: 'Montserrat', sans-serif;
  font-size: 2rem;
  font-weight: 700;
  color: var(--cb-primary);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.5rem;
}
#upcomingCalendar > h2 i { color: var(--cb-primary-alt); }
#upcomingCalendar > p.desc {
  font-size: 1rem;
  color: #555;
  margin-bottom: 2rem;
  line-height: 1.5;
}

/* Calendar widget container */
#upcomingCalendarWidget {
  background-color: #f7f8fa;
  padding: 1.5rem;
  border-radius: 1rem;
  box-shadow: 0 4px 16px rgba(0,0,0,0.05);
  transition: background-color var(--cb-transition), box-shadow var(--cb-transition);
}

/* Widget controls */
#upcomingCalendarWidget > div:first-child {
  display: flex;
  justify-content: space-between;
  margin-bottom: 1rem;
}
#upcomingCalendarWidget button {
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 1.5rem;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color var(--cb-transition), transform var(--cb-transition);
}
#upcomingCalendarWidget button:hover {
  background-color: var(--cb-primary-alt);
  transform: translateY(-1px);
}

/* Widget title */
#upcomingCalendarWidget h4 {
  font-family: 'Montserrat', sans-serif;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--cb-primary);
  margin: 0 0 1rem 0;
  text-align: center;
}

/* Widget calendar grid reuse */
#upcomingCalendarWidget .calendar-grid {
  gap: 0.25rem;
}
#upcomingCalendarWidget .cell {
  background-color: #fff;
  border-radius: 0.5rem;
  padding: 0.6rem 0;
  font-size: 0.85rem;
  color: #666;
  text-align: center;
  transition: background-color var(--cb-transition), color var(--cb-transition), box-shadow var(--cb-transition);
  cursor: default;
}
#upcomingCalendarWidget .cell.open {
  background-color: rgba(59,63,136,0.1);
  color: var(--cb-primary);
  cursor: pointer;
}
#upcomingCalendarWidget .cell.open:hover {
  background-color: var(--cb-primary);
  color: var(--cb-text-light);
  transform: translateY(-1px);
}

/* Today indicator */
#upcomingCalendarWidget .cell.today {
  border: 2px solid var(--cb-primary-alt);
}

/* Responsive grid */
@media (max-width: 768px) {
  #upcomingCalendarWidget {
    padding: 1rem;
  }
  #upcomingCalendarWidget .cell {
    font-size: 0.75rem;
    padding: 0.5rem 0;
  }
}

/* Dark mode adjustments */
html.dark #upcomingCalendar {
  background-color: #2c2d3b;
}
html.dark #upcomingCalendar > p.desc {
  color: #ccc;
}
html.dark #upcomingCalendarWidget {
  background-color: #3a3b4e;
  box-shadow: 0 4px 16px rgba(0,0,0,0.4);
}
html.dark #upcomingCalendarWidget button {
  background-color: var(--cb-primary-alt);
}
html.dark #upcomingCalendarWidget button:hover {
  background-color: var(--cb-text-light);
  color: var(--cb-primary-alt);
}
html.dark #upcomingCalendarWidget .cell {
  background-color: #4a4b5c;
  color: #aaa;
}
html.dark #upcomingCalendarWidget .cell.open {
  background-color: rgba(92,77,153,0.1);
  color: var(--cb-primary-alt);
}
html.dark #upcomingCalendarWidget .cell.open:hover {
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
}
html.dark #upcomingCalendarWidget .cell.today {
  border-color: var(--cb-primary);
}

  /* 11. Global Dark Mode Enhancements */

/* Base page background & text */
html.dark body {
  background-color: #1e1f2e;
  color: #ddd;
}
html.dark main {
  background-color: transparent;
}

/* Section backgrounds */
html.dark section.module {
  background-color: #2c2d3b;
}
html.dark section.module h2,
html.dark section.module p,
html.dark section.module label,
html.dark section.module legend {
  color: #eee;
}

/* Sidebar (reinforce) */
html.dark aside#sidebar {
  background-color: #2a2c3b;
}
html.dark aside#sidebar .logo svg {
  fill: var(--cb-primary);
}
html.dark aside#sidebar nav ul li a {
  color: #ccc;
}
html.dark aside#sidebar nav ul li.active a,
html.dark aside#sidebar nav ul li a:hover {
  background-color: rgba(255,255,255,0.1);
  color: #fff;
}

/* Header */
html.dark header {
  background-color: #3a3b4e;
  color: #fff;
}
html.dark header h1 {
  color: #f0f0f5;
}
html.dark #hamburger,
html.dark #themeToggle {
  color: #ddd;
}

/* Buttons */
html.dark .btn,
html.dark .btn.hero-btn,
html.dark button {
  background-color: var(--cb-primary-alt);
  color: #fff;
}
html.dark .btn:hover,
html.dark button:hover {
  background-color: var(--cb-text-light);
  color: var(--cb-primary-alt);
}

/* Inputs & selects (reinforce) */
html.dark input,
html.dark select,
html.dark textarea {
  background-color: #3a3b4e;
  border-color: #555;
  color: #eee;
}
html.dark input::placeholder,
html.dark textarea::placeholder {
  color: #888;
}

/* Calendars */
html.dark .calendar-grid {
  background-color: transparent;
}
html.dark .calendar-grid .cell {
  background-color: #3a3b4e;
  color: #ccc;
}
html.dark .calendar-grid .cell.open {
  background-color: rgba(92,77,153,0.1);
  color: var(--cb-primary-alt);
}
html.dark .calendar-grid .cell.open:hover {
  background-color: var(--cb-primary-alt);
  color: #fff;
}
html.dark .calendar-grid .cell.today::after {
  background-color: #f5a623;
}

/* Modals */
html.dark .modal {
  background-color: rgba(30,31,46,0.95);
}
html.dark .modal .modal-content {
  background-color: #2e2f3e;
  color: #f0f0f5;
  box-shadow: 0 8px 24px rgba(0,0,0,0.7);
}
html.dark .modal .modal-content h3,
html.dark .modal .modal-content p {
  color: #ddd;
}
html.dark .modal .btn,
html.dark .modal .btn-sm {
  background-color: var(--cb-primary-alt);
  color: #fff;
}
html.dark .modal .btn:hover,
html.dark .modal .btn-sm:hover {
  background-color: var(--cb-text-light);
  color: var(--cb-primary-alt);
}

/* Footer */
html.dark footer {
  background-color: #1f202d;
  color: #777;
}
html.dark footer small {
  color: #888;
}

  /* 12. Modal Styling */

/* Modal overlay */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  z-index: 2000;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--cb-transition);
}
.modal:not([hidden]) {
  opacity: 1;
  pointer-events: auto;
}

/* Modal content container */
.modal .modal-content {
  background-color: #fff;
  border-radius: 1rem;
  max-width: 28rem;
  width: 100%;
  padding: 2rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  position: relative;
  transform: scale(0.9);
  transition: transform var(--cb-transition), box-shadow var(--cb-transition);
}
.modal:not([hidden]) .modal-content {
  transform: scale(1);
}

/* Modal header */
.modal .modal-content h3 {
  font-family: 'Montserrat', sans-serif;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--cb-primary);
  margin-top: 0;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.modal .modal-content h3 i {
  color: var(--cb-primary-alt);
}

/* Modal body */
.modal .modal-content p,
.modal .modal-content div#confirmDetails,
.modal .modal-content #cancelMsg {
  font-size: 1rem;
  line-height: 1.5;
  color: #333;
  margin-bottom: 1.5rem;
}

/* Modal actions */
.modal .modal-content button {
  margin-right: 0.75rem;
}
.modal .modal-content button:last-of-type {
  margin-right: 0;
}

/* Close icon in modal header */
.modal .modal-content .close-btn {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: none;
  font-size: 1.25rem;
  color: #888;
  padding: 0.25rem;
  transition: color var(--cb-transition);
}
.modal .modal-content .close-btn:hover {
  color: var(--cb-primary);
}

/* Dark mode for modals */
html.dark .modal {
  background-color: rgba(0,0,0,0.7);
}
html.dark .modal .modal-content {
  background-color: #2e2f3e;
  box-shadow: 0 8px 24px rgba(0,0,0,0.7);
}
html.dark .modal .modal-content h3 {
  color: var(--cb-primary-alt);
}
html.dark .modal .modal-content p,
html.dark .modal .modal-content div#confirmDetails,
html.dark .modal .modal-content #cancelMsg {
  color: #ddd;
}
html.dark .modal .modal-content .close-btn {
  color: #bbb;
}
html.dark .modal .modal-content .close-btn:hover {
  color: var(--cb-primary);
}
/* 13. Responsive Tweaks for iPhone 11 (414px wide) */
@media (max-width: 600px) {

  /* Sidebar adjustments */
  aside#sidebar {
    position: absolute;
    transform: translateX(-100%);
    transition: transform var(--cb-transition);
  }
  body.sidebar-open aside#sidebar {
    transform: translateX(0);
  }
  body.sidebar-shrink aside#sidebar {
    width: var(--cb-sidebar-width);
  }

  /* Header */
  header {
    padding: 0 1rem;
    height: 3.5rem;
  }
  #hamburger, #themeToggle {
    font-size: 1.2rem;
  }
  header h1 {
    font-size: 1.2rem;
    white-space: normal;
    text-align: center;
  }

  /* Hero */
  #hero {
    flex-direction: column;
    padding: 4rem 1rem 2rem 1rem;
  }
  #hero .hero-text h2 {
    font-size: 2rem;
  }
  #hero .hero-graphic {
    max-width: 90%;
  }

  /* Forms & inputs */
  form, .module {
    padding: 1rem !important;
  }
  input, select, textarea {
    font-size: 0.9rem;
    padding: 0.6rem 0.8rem;
  }

  /* Buttons */
  .btn, button {
    font-size: 0.9rem;
    padding: 0.6rem 1rem;
  }
  .btn.hero-btn {
    width: 100%;
    justify-content: center;
  }

  /* Calendar */
  .calendar-grid {
    gap: 0.15rem;
  }
  .calendar-grid .cell {
    padding: 0.5rem 0;
    font-size: 0.75rem;
  }

  /* Dashboard cards */
  .dashboard-cards {
    grid-template-columns: 1fr;
  }
  .dashboard-cards .card {
    padding: 1rem;
  }

  /* Upcoming widget */
  #upcomingCalendarWidget {
    padding: 1rem;
  }
  #upcomingCalendarWidget .cell {
    font-size: 0.7rem;
    padding: 0.4rem 0;
  }
}
/* 14. Script-Generated / Dynamic Element Styling */

/* Toast notifications */
.toast {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
  padding: 0.75rem 1.25rem;
  border-radius: 0.75rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  opacity: 0;
  transform: translateY(20px);
  transition: opacity var(--cb-transition), transform var(--cb-transition);
  z-index: 3000;
  font-family: 'Montserrat', sans-serif;
  font-size: 0.9rem;
}
.toast.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Spinner inside buttons */
.spinner,
.spinner::before,
.spinner::after {
  border-radius: 50%;
}
.spinner {
  display: inline-block;
  width: 1rem;
  height: 1rem;
  border: 2px solid var(--cb-text-light);
  border-top-color: transparent;
  animation: spin 0.7s linear infinite;
  vertical-align: middle;
  margin-left: 0.5rem;
}
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Disabled state loader */
button .spinner {
  border-color: var(--cb-primary-alt);
  border-top-color: transparent;
}

/* Hidden attribute override for smoother transitions */
[hidden] {
  display: none !important;
  visibility: hidden !important;
}

/* AOS animated elements if used */
[data-aos] {
  opacity: 0;
  transition-property: opacity, transform;
  transition-duration: var(--cb-transition);
}
[data-aos].aos-animate {
  opacity: 1;
}

/* Paystack iframe container override */
iframe.paystack-inline {
  border: none !important;
  border-radius: 1rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15);
}

/* Custom cursor on interactive script elements */
[data-clickable] {
  cursor: pointer;
}

/* Dynamic cards in “Upcoming” widget when alert() replaced by custom popup */
.custom-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  background-color: #fff;
  padding: 2rem;
  border-radius: 1rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  opacity: 0;
  transition: opacity var(--cb-transition), transform var(--cb-transition);
  z-index: 4000;
}
.custom-popup.show {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}
.custom-popup h4 {
  margin-top: 0;
  color: var(--cb-primary);
  font-weight: 700;
}
.custom-popup ul {
  max-height: 200px;
  overflow-y: auto;
  margin: 1rem 0;
  padding-left: 1.2rem;
}
.custom-popup ul li {
  margin-bottom: 0.5rem;
}

/* Dark mode dynamic elements */
html.dark .toast {
  background-color: var(--cb-primary);
}
html.dark .spinner {
  border-color: var(--cb-text-light);
  border-top-color: transparent;
}
html.dark .custom-popup {
  background-color: #3a3b4e;
  color: #eee;
  box-shadow: 0 8px 24px rgba(0,0,0,0.7);
}

  /* 15. Miscellaneous & Global Enhancements */

/* Global resets & typography */
*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  font-family: 'Montserrat', sans-serif;
  line-height: 1.6;
  background-color: #fafafb;
  color: #333;
  transition: background-color var(--cb-transition), color var(--cb-transition);
  overflow-x: hidden;
}
a {
  color: var(--cb-primary);
  text-decoration: none;
  transition: color var(--cb-transition);
}
a:hover {
  color: var(--cb-primary-alt);
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 0.6rem;
  height: 0.6rem;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background-color: rgba(59,63,136,0.4);
  border-radius: 0.3rem;
  border: 2px solid transparent;
  background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover {
  background-color: rgba(59,63,136,0.7);
}

/* Main content wrapper */
main {
  margin-top: 4rem;
  margin-left: var(--cb-sidebar-width);
  transition: margin-left var(--cb-transition);
}
body.sidebar-shrink main {
  margin-left: var(--cb-sidebar-shrink-width);
}
@media (max-width: 768px) {
  main {
    margin-left: 0;
  }
}

/* Section modules */
.module {
  border-bottom: 1px solid #e0e0e5;
  padding-bottom: 2rem;
  margin-bottom: 2rem;
}
.module:last-of-type {
  border: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

/* Tooltips */
[data-tooltip] {
  position: relative;
  cursor: help;
}
[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%) scale(0.8);
  background-color: var(--cb-primary-alt);
  color: var(--cb-text-light);
  padding: 0.4rem 0.6rem;
  border-radius: 0.4rem;
  font-size: 0.75rem;
  opacity: 0;
  pointer-events: none;
  white-space: nowrap;
  transition: opacity var(--cb-transition), transform var(--cb-transition);
}
[data-tooltip]:hover::after {
  opacity: 1;
  transform: translateX(-50%) scale(1);
}

/* Footer styling */
footer {
  background-color: #f1f1f5;
  text-align: center;
  padding: 1.5rem 2rem;
  margin-top: 2rem;
  font-size: 0.9rem;
  color: #777;
  transition: background-color var(--cb-transition), color var(--cb-transition);
}
footer small {
  display: block;
}
html.dark footer {
  background-color: #1f202d;
  color: #aaa;
}

/* Blockquotes and code blocks */
blockquote {
  border-left: 4px solid var(--cb-primary-alt);
  padding-left: 1rem;
  margin: 1rem 0;
  color: #555;
  font-style: italic;
}
pre, code {
  font-family: 'Courier New', Courier, monospace;
  background-color: #f4f4f6;
  padding: 0.4rem 0.6rem;
  border-radius: 0.4rem;
  font-size: 0.9rem;
  overflow-x: auto;
}
html.dark pre,
html.dark code {
  background-color: #3a3b4e;
  color: #eee;
}

/* Lists */
ul, ol {
  margin-left: 1.5rem;
  margin-bottom: 1rem;
}
ul li, ol li {
  margin-bottom: 0.5rem;
}

/* Images & media */
img, video, canvas {
  max-width: 100%;
  height: auto;
  display: block;
}
figure {
  margin: 1.5rem 0;
  text-align: center;
}
figcaption {
  font-size: 0.85rem;
  color: #666;
  margin-top: 0.5rem;
}

/* Accessibility focus states */
:focus {
  outline: 3px solid var(--cb-primary-alt);
  outline-offset: 2px;
}

/* Dark mode global */
html.dark body {
  background-color: #1e1f2e;
  color: #ddd;
}
html.dark a {
  color: var(--cb-primary-alt);
}
html.dark a:hover {
  color: var(--cb-text-light);
}

</style>

  
</head>


<body>

  <aside id="sidebar">
   <div class="logo">
      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" fill="var(--primary)">
        <polygon points="10,10 25,90 50,40 75,90 90,10 65,10 50,70 35,10"/>
      </svg> <span class="logo-text">Vitra AI</span>
    </div>

    <nav>
      <ul>
         <li>
     <a href="dashboard.html"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a>
        </li>
         <li>
     <a href="herbal.html"><i class="fas fa-seedling"></i><span>Herbal Medicine</span></a>
        </li>
         <li>
    <a href="psychology.html"><i class="fas fa-brain"></i><span>Psychology & Mental Health</span></a>
        </li> <li>
    <a href="dietetics.html"><i class="fas fa-utensils"></i><span>Dietetics</span></a>
        </li>
         <li>
    <a href="epharmacy.html"><i class="fas fa-prescription-bottle-alt"></i><span>E-Pharmacy</span></a>
        </li>
        <li class="active">
 <a href="consult.html" id="consult-link" style="position:relative;">
      <i class="fas fa-calendar-check"></i><span>Consultation Booking</span></a>
        </li>
       
      </ul>
    </nav>
    <button id="shrinkSidebar" title="Toggle sidebar">
      <i class="fas fa-chevron-left"></i>
    </button>
  </aside>

  <header>
    <i id="hamburger" class="fas fa-bars"></i>
    <h1>AI-Powered Consultation Booking</h1>
    <i id="themeToggle" class="fas fa-moon"></i>
  </header>

  <main>
    <section id="hero" class="module">
      <div class="hero-text">
        <h2><i class="fas fa-stethoscope"></i> Seamless Consultation Booking</h2>
        <p class="desc">From instant provider match to one-click appointment, powered by AI.</p>
        <button id="heroBookBtn" data-target="#providerMatch" class="btn hero-btn">
          <i class="fas fa-book-medical"></i> Book an Appointment
        </button> <br>
         <p class="tips">
          <i class="fas fa-info-circle"></i>
          Need urgent care? <button id="urgentCare" type="button" class="link-style">Click here</button>
        </p>
      </div>
      <div class="hero-graphic">
        <img src="9E2CDE35-303A-4C5F-A4A9-1B0420CF8B0C.png" alt="Consultation illustration" />
      </div>
    </section>

    <section id="urgentBooking" class="module" hidden>
      <h2><i class="fas fa-exclamation-triangle"></i> Urgent Appointment</h2>
      <p class="desc">Describe your concern, pick a specialist, then choose date/time. ₵500 non-refundable fee.</p>

      <div id="urgentStep1">
        <label>
          <i class="fas fa-notes-medical"></i> Chief Concern:
          <input
            type="text"
            id="urgentConcernInput"
            placeholder="e.g. severe headache"
            required
          />
        </label>
        <button type="button" id="urgentFindMatchBtn" class="btn">
          <i class="fas fa-search"></i> Find Specialist
        </button>
      </div>

      <div id="urgentMatchResults" class="response" hidden>
        <button class="close-btn" id="urgentStep2Close" style="display: none;"><i class="fas fa-times"></i></button>
        <div class="card">
          <i class="fas fa-user-md fa-2x"></i>
          <div class="details">
            <h4 id="urgentMatchedName"></h4>
            <p id="urgentMatchedSpec"></p>
          </div>
        </div>
        <button id="urgentScheduleBtn" class="btn">
          <i class="fas fa-calendar-alt"></i> Schedule
        </button>
        <button class="btn-sm back" id="urgentStep2Back" style="display: none;">Back</button>
      </div>

      <div id="urgentCalendarFlow" hidden>
        <button class="btn-sm back" id="urgentStep3Back" style="display: none;">
          <i class="fas fa-arrow-left"></i> Back
        </button>
        <label>Date: <input type="date" id="urgentDate" /></label>
        <label>Time: <input type="time" id="urgentTime" /></label>
        <button id="urgentNextToDetails" class="btn"><i class="fas fa-arrow-right"></i> Next</button>
        <button class="btn-sm close-btn" id="urgentStep3Close" style="display: none;"><i class="fas fa-times"></i></button>
      </div>

      <form id="urgentDetailsForm" class="module" hidden>
        <button type="button" class="btn-sm back" id="urgentStep4Back" style="display: none;">
          <i class="fas fa-arrow-left" style="display: none;"></i> Back
        </button>
        <button type="button" class="btn-sm close-btn" id="urgentStep4Close"><i class="fas fa-times"></i></button>
        <label>
          <i class="fas fa-user"></i> Your Name:
          <input id="urgentClientName" placeholder="Full Name" required />
        </label>
        <label>
          <i class="fas fa-envelope"></i> Email:
          <input id="urgentClientEmail" type="email" required />
        </label>
        <button type="button" id="urgentConfirmBtn" class="btn">
          <i class="fas fa-check"></i> Review & Pay
        </button>
      </form>
    </section>

    <section id="providerMatch" class="module">
      <h2><i class="fas fa-user-md"></i> Find Your Specialist</h2>
      <p class="desc">Describe your health concern and let our AI pick the best in-network professional.</p>

      <form id="matchForm">
        <label>
          <i class="fas fa-notes-medical"></i> Chief Concern:
          <input
            type="text"
            id="concernInput"
            placeholder="e.g. persistent cough"
            required
          />
        </label>
        <label>
          <i class="fas fa-exclamation-circle"></i> Urgency:
          <select id="urgencyInput">
            <option>Low</option>
            <option>Medium</option>
            <option>High</option>
          </select>
        </label>
        <label>
          <i class="fas fa-language"></i> Language:
          <select id="languageInput">
            <option>English</option>
            <option>Twi</option>
            <option>Ga</option>
          </select>
        </label>
        <button type="button" id="findMatchBtn" class="btn">
          <i class="fas fa-search"></i>Find Specialist
        </button>
      </form>

      <div id="matchResults" class="response" hidden>
<button class="close-btn" id="matchResultsClose"><i class="fas fa-times"></i></button>
    <button class="btn-sm back" id="matchResultsBack" style="display: none;">Back</button>
        <div class="card">
          <i class="fas fa-user-md fa-2x"></i>
          <div class="details">
            <h4 id="matchedName"></h4>
            <p id="matchedSpec"></p>
          </div>
        </div>
        <button id="scheduleMatchBtn" class="btn"><i class="fas fa-calendar-alt"></i> Schedule</button>
      </div>

      <div id="appointmentFlow" hidden>
        <button class="btn-sm close-btn" id="appointmentFlowClose"><i class="fas fa-times"></i></button>
        <h3><i class="fas fa-calendar-alt"></i> Schedule with <span id="chosenProvider"></span></h3>
        <div class="month-nav">
          <button id="prevMonth" class="btn-sm"><i class="fas fa-chevron-left"></i></button>
          <div id="calendarHeader"></div>
          <button id="nextMonth" class="btn-sm"><i class="fas fa-chevron-right"></i></button>
        </div>
        <div id="calendar" class="calendar-grid"></div>
        <div id="timeSlots"></div>

        <form id="confirmForm" class="module" hidden>
          <button class="btn-sm close-btn" id="confirmStep4Close"><i class="fas fa-times"></i></button>
          <button class="btn-sm back" id="confirmStep4Back">Back</button>
          <h4><i class="fas fa-check-circle"></i> Confirm</h4>
          <label>
            <i class="fas fa-user"></i> Your Name:
            <input id="clientName" placeholder="Full Name" required />
          </label>
          <label>
            <i class="fas fa-envelope"></i> Email:
            <input id="clientEmail" type="email" required />
          </label>
          <p id="summaryText"></p>
          <button id="confirmBtn" type="button" class="btn"><i class="fas fa-check"></i> Confirm</button>
        </form>
      </div>
    </section>

    <section id="feature-rich-dashboard" class="module">
      <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
      <div class="dashboard-tabs">
        <button data-tab="rich-upcoming" class="active"><i class="fas fa-calendar-check"></i> Upcoming</button>
        <button data-tab="rich-past"><i class="fas fa-history"></i> Past</button>
        <button data-tab="rich-favorites"><i class="fas fa-heart"></i> Favorites</button>
      </div>
      <div id="rich-upcoming" class="dashboard-cards"></div>
      <div id="rich-past" class="dashboard-cards" hidden></div>
      <div id="rich-favorites" class="dashboard-cards" hidden></div>
    </section>

    <section id="upcomingCalendar" class="module">
      <h2><i class="fas fa-calendar-alt"></i> Your Upcoming Appointments</h2>
      <p class="desc">Click any marked date to view details.</p>
      <div id="upcomingCalendarWidget"></div>
    </section>
  </main>

  <div id="confirmModal" class="modal" hidden>
    <div class="modal-content">
      <h3>Review Your Appointment</h3>
      <div id="confirmDetails"></div>
      <button id="modalEdit" class="btn-sm">Edit</button>
      <button id="modalConfirm" class="btn">Confirm Booking</button>
      <button id="modalClose" class="btn-sm">Cancel</button>
    </div>
  </div>

  <div id="cancelModal" class="modal" hidden>
    <div class="modal-content">
      <h3>Cancel Appointment?</h3>
      <p id="cancelMsg"></p>
      <button id="cancelNo" class="btn-sm">No, Keep It</button>
      <button id="cancelYes" class="btn">Yes, Cancel</button>
    </div>
  </div>

  <footer>
    <small>© 2025 AI-Pharmacy Chain — All rights reserved</small>
  </footer>



 <script defer src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="storage.js"></script>
<script defer>
document.addEventListener("DOMContentLoaded", () => {
  
  const providers = [
    {
      id: "p1",
      name: "Dr. Kwame Asante",
      specialty: "Pulmonologist",
      facility: "Korle Bu Teaching Hospital",
      description: `
        Dr. Kwame Asante is a consultant pulmonologist with 15 years of experience 
        treating complex lung conditions (e.g. COPD, asthma, pneumonia). He focuses 
        on diagnostic bronchoscopy and long‐term management of chronic respiratory diseases. 
        He has published research on tuberculosis diagnosis in Ghanaian adults.
      `
    },
    {
      id: "p2",
      name: "Dr. Abena Owusu",
      specialty: "Cardiologist",
      facility: "37 Military Hospital",
      description: `
        Dr. Abena Owusu is a board‐certified cardiologist with 10 years’ experience 
        managing ischemic heart disease, heart failure, and arrhythmias. She routinely 
        performs echocardiograms and stress tests, and excels at hypertensive emergencies 
        and advanced heart failure therapies.
      `
    },
    {
      id: "p3",
      name: "Dr. Kojo Mensah",
      specialty: "Psychiatrist",
      facility: "Ridge Hospital",
      description: `
        Dr. Kojo Mensah is a consultant psychiatrist specializing in mood disorders 
        (depression, bipolar), anxiety, and schizophrenia. He has 12 years of experience 
        in both inpatient and outpatient psychiatric care. He leads CBT groups for depression 
        and treats resistant cases as well as early‐onset psychosis.
      `
    },
    {
      id: "p4",
      name: "Dr. Yaa Dufie",
      specialty: "Clinical Dietitian",
      facility: "Nyaho Medical Centre",
      description: `
        Dr. Yaa Dufie is a registered clinical dietitian with expertise in diabetes 
        management, obesity treatment, and renal nutrition. With 8 years in hospital 
        practice, she designs personalized meal plans, counsels on weight management, 
        and monitors nutrition for renal failure patients.
      `
    },
    {
      id: "p5",
      name: "Dr. Nana Adjei",
      specialty: "General Practitioner",
      facility: "Cape Coast Teaching Hospital",
      description: `
        Dr. Nana Adjei is a general practitioner with 10 years of experience in primary 
        care. He diagnoses and treats a wide range of common illnesses (hypertension, diabetes, 
        viral infections) and refers patients to specialists as needed. He also runs a minor surgery 
        clinic for wound care and suturing.
      `
    },
    {
      id: "p6",
      name: "Dr. Efua Amponsah",
      specialty: "Endocrinologist",
      facility: "LEKMA Hospital",
      description: `
        Dr. Efua Amponsah is an endocrinologist with 12 years’ experience in managing 
        diabetes, thyroid disorders, and adrenal diseases. She conducts thyroid ultrasounds, 
        manages insulin pump therapy, and provides ongoing education for diabetic patients.
      `
    },
    {
      id: "p7",
      name: "Dr. Michael Addo",
      specialty: "Neurologist",
      facility: "37 Military Hospital",
      description: `
        Dr. Michael Addo is a neurologist specializing in stroke, epilepsy, and migraines. 
        With 9 years of experience, he interprets EEGs, orders and reads MRIs, and manages 
        seizure disorders. He also handles acute stroke thrombolysis and outpatient follow-up.
      `
    },
    {
      id: "p8",
      name: "Dr. Grace Ofori",
      specialty: "Dermatologist",
      facility: "Accra Dermatology Centre",
      description: `
        Dr. Grace Ofori is a dermatologist who treats acne, eczema, psoriasis, and skin infections. 
        With 7 years in practice, she performs skin biopsies, patch testing for allergies, 
        and cosmetic procedures like chemical peels. She also manages chronic dermatologic conditions 
        in both adults and children.
      `
    },
    {
      id: "p9",
      name: "Dr. Joseph Kumi",
      specialty: "Orthopedic Surgeon",
      facility: "Komfo Anokye Teaching Hospital",
      description: `
        Dr. Joseph Kumi is an orthopedic surgeon specializing in fractures, joint replacements, 
        and sports injuries. With 11 years’ experience, he performs hip and knee arthroplasties, 
        arthroscopic ACL repairs, and fracture fixations. He also leads a sports medicine clinic 
        for athletes and active adults.
      `
    },
    {
      id: "p10",
      name: "Dr. Ama Brew",
      specialty: "Pediatrician",
      facility: "The Trust Hospital",
      description: `
        Dr. Ama Brew is a pediatrician with expertise in neonatal care, childhood infections, 
        and developmental monitoring. Over 8 years, she has managed NICU patients, vaccine 
        schedules, and common pediatric illnesses (bronchiolitis, pneumonia). She also runs growth and 
        nutrition assessments for children under five.
      `
    },
    {
      id: "p11",
      name: "Ms. Akosua Baah",
      specialty: "Physiotherapist",
      facility: "Tema General Hospital",
      description: `
        Ms. Akosua Baah is a physiotherapist focusing on orthopedic rehabilitation, 
        post-surgical mobility, and sports injury recovery. With 6 years of experience, 
        she guides patients through exercises for back pain, knee replacement rehab, 
        and sports injury prevention.
      `
    },
    {
      id: "p12",
      name: "Mr. Daniel Boakye",
      specialty: "Pharmacist",
      facility: "Ridge Hospital Pharmacy",
      description: `
        Mr. Daniel Boakye is a clinical pharmacist specializing in medication therapy 
        management, drug interactions, and patient counseling. He has 5 years of experience 
        overseeing dispensation of antibiotics, chronic disease medications (antihypertensives, 
        antidiabetics), and advising on OTC vs prescription use.
      `
    },
    {
      id: "p13",
      name: "Mrs. Esther Kumi",
      specialty: "Occupational Therapist",
      facility: "Cape Coast Teaching Hospital",
      description: `
        Mrs. Esther Kumi is an occupational therapist with 7 years in pediatric and adult 
        rehab. She helps stroke survivors relearn daily tasks, provides adaptive equipment 
        for spinal cord injury patients, and runs sensory integration sessions for children 
        with autism.
      `
    },
    {
      id: "p14",
      name: "Ms. Joy Mensah",
      specialty: "Speech & Language Therapist",
      facility: "LEKMA Hospital",
      description: `
        Ms. Joy Mensah is a speech and language therapist who treats communication disorders, 
        swallowing difficulties, and developmental speech delays. In her 6 years of practice, 
        she has worked with post-stroke aphasia patients, pediatric speech delay, and voice 
        therapy for singers.
      `
    },
    {
      id: "p15",
      name: "Dr. Paul Yeboah",
      specialty: "Dermatologist",
      facility: "Korle Bu Teaching Hospital",
      description: `
        Dr. Paul Yeboah is a senior dermatologist focusing on surgical dermatology, 
        malignant melanoma, and chronic skin diseases. With 14 years’ experience, he 
        performs excisions of suspicious lesions, manages phototherapy for psoriasis, 
        and leads a melanoma screening program.
      `
    },
    {
      id: "p16",
      name: "Dr. Linda Frimpong",
      specialty: "Nephrologist",
      facility: "37 Military Hospital",
      description: `
        Dr. Linda Frimpong is a nephrologist specializing in chronic kidney disease, 
        dialysis, and hypertension management. Over 10 years, she has managed CKD clinics, 
        initiated hemodialysis programs, and treated acute renal failure in ICU settings.
      `
    },
    {
      id: "p17",
      name: "Mr. Kwesi Owusu",
      specialty: "Nutritionist",
      facility: "Nyaho Medical Centre",
      description: `
        Mr. Kwesi Owusu is a nutritionist specializing in sports nutrition, pediatric 
        nutrition, and weight management. He has 5 years of experience developing meal 
        plans for athletes, counseling diabetic children, and creating community 
        nutrition workshops on healthy eating.
      `
    },
    {
      id: "p18",
      name: "Ms. Abena Boateng",
      specialty: "Psychologist",
      facility: "Accra Psychology & Counselling Centre",
      description: `
        Ms. Abena Boateng is a clinical psychologist focusing on cognitive behavioral 
        therapy (CBT), trauma counseling, and stress management. With 8 years in practice, 
        she works with PTSD survivors, adolescent depression, and provides group therapy 
        for anxiety disorders.
      `
    }
  ];

  const availability = {
    p1:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-10": ["09:00","10:00","11:00"], "2025-07-12": ["14:00","15:00"], "2025-07-15": ["08:30","09:30","10:30"] },
    p2:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-03": ["10:00","13:00","16:00"], "2025-07-04": ["09:00","11:00"], "2025-07-15": ["12:00","14:00"] },
    p3:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-08": ["08:00","09:00","10:00","11:00"], "2025-07-11": ["13:30","14:30"], "2025-07-16": ["15:00","16:00"] },
    p4:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-05": ["09:30","10:30","11:30"], "2025-07-09": ["14:00","15:00","16:00"], "2025-07-18": ["08:00","09:00"] },
    p5:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-07": ["08:15","09:15","10:15"], "2025-07-13": ["13:00","14:00"], "2025-07-17": ["10:00","11:00","12:00"] },
    p6:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-02": ["09:00","10:00"], "2025-07-14": ["11:00","12:00","13:00"], "2025-07-19": ["14:00","15:00"] },
    p7:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-06": ["08:30","09:30","10:30"], "2025-07-12": ["13:00","14:00","15:00"], "2025-07-20": ["09:00","10:00"] },
    p8:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-01": ["10:00","11:00","12:00"], "2025-07-11": ["14:30","15:30"], "2025-07-16": ["08:00","09:00","10:00"] },
    p9:  { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-04": ["09:00","10:00","11:00"], "2025-07-13": ["13:00","14:00"], "2025-07-18": ["15:00","16:00"] },
    p10: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-03": ["08:00","09:00","10:00"], "2025-07-10": ["11:00","12:00","13:00"], "2025-07-17": ["14:00","15:00"] },
    p11: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-05": ["09:30","10:30","11:30"], "2025-07-14": ["13:00","14:00","15:00"], "2025-07-19": ["08:00","09:00"] },
    p12: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-02": ["10:00","11:00","12:00"], "2025-07-08": ["14:00","15:00"], "2025-07-20": ["09:00","10:00","11:00"] },
    p13: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-07": ["08:00","09:00","10:00"], "2025-07-12": ["11:30","12:30","13:30"], "2025-07-18": ["14:00","15:00"] },
    p14: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-03": ["09:15","10:15","11:15"], "2025-07-09": ["13:00","14:00","15:00"], "2025-07-16": ["08:00","09:00"] },
    p15: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-05": ["08:30","09:30","10:30"], "2025-07-13": ["11:00","12:00","13:00"], "2025-07-19": ["14:30","15:30"] },
    p16: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-02": ["10:00","11:00","12:00"], "2025-07-11": ["13:15","14:15"], "2025-07-17": ["09:00","10:00","11:00"] },
    p17: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-04": ["09:00","10:00","11:00"], "2025-07-10": ["12:00","13:00","14:00"], "2025-07-15": ["15:00","16:00"] },
    p18: { "2025-06-31": ["09:30","10:30","12:00"], "2025-07-01": ["08:00","09:00","10:00"], "2025-07-08": ["11:30","12:30","13:30"], "2025-07-20": ["14:00","15:00","16:00"] }
  };

  const symptomMap = {
    cough: "p1", wheeze: "p1", asthma: "p1", pneumonia: "p1", bronchitis: "p1",
    chestpain: "p2", "chest pain": "p2", palpitations: "p2", "shortness of breath": "p2",
    anxiety: "p3", depression: "p3", insomnia: "p3", schizophrenia: "p3",
    diabetes: "p4", weight: "p4", nutrition: "p4",
    fatigue: "p5", weakness: "p5", fever: "p5", pain: "p5",
    thyroid: "p6", endocrine: "p6", "blood sugar": "p6",
    headache: "p7", migraine: "p7", seizure: "p7", nerve: "p7",
    rash: "p8", acne: "p8", eczema: "p8", skin: "p8",
    fracture: "p9", joint: "p9", bone: "p9",
    child: "p10", kids: "p10", pediatric: "p10",
    rehab: "p11", mobility: "p11",
    medication: "p12", drug: "p12",
    occupational: "p13",
    speech: "p14",
    kidney: "p16", renal: "p16",
    diet: "p17",
    psychologist: "p18", counsel: "p18"
  };

  const URGENT_FEE_KOBO = 500 * 100;

  const appointments = [];

  let year               = new Date().getFullYear();
  let month              = new Date().getMonth();
  let selDate            = "";    
  let selTime            = "";    
  let urgentProviderName = "";    
  let uDate              = "";    
  let uTime              = "";   
  let urgentFlow         = false; 
  let providerId         = "";   
  let providerName       = "";    
  let widgetYear         = new Date().getFullYear(); 
  let widgetMonth        = new Date().getMonth();   

  const sidebar               = document.getElementById("sidebar");
  const hamburger             = document.getElementById("hamburger");
  const shrinkSidebarBtn      = document.getElementById("shrinkSidebar");
  const themeToggle           = document.getElementById("themeToggle");
  const heroBookBtn           = document.getElementById("heroBookBtn");
  const urgentCareLink        = document.getElementById("urgentCare");

  const urgentBooking         = document.getElementById("urgentBooking");
  const urgentStep1           = document.getElementById("urgentStep1");
  const urgentMatchResults    = document.getElementById("urgentMatchResults");
  const urgentCalendarFlow    = document.getElementById("urgentCalendarFlow");
  const urgentDetailsForm     = document.getElementById("urgentDetailsForm");
  const urgentFindMatchBtn    = document.getElementById("urgentFindMatchBtn");
  const urgentMatchedName     = document.getElementById("urgentMatchedName");
  const urgentMatchedSpec     = document.getElementById("urgentMatchedSpec");
  const urgentScheduleBtn     = document.getElementById("urgentScheduleBtn");
  const urgentDate            = document.getElementById("urgentDate");
  const urgentTime            = document.getElementById("urgentTime");
  const urgentNextToDetails   = document.getElementById("urgentNextToDetails");
  const urgentClientName      = document.getElementById("urgentClientName");
  const urgentClientEmail     = document.getElementById("urgentClientEmail");
  const urgentConfirmBtn      = document.getElementById("urgentConfirmBtn");
  const urgentStep2Back       = document.getElementById("urgentStep2Back");
  const urgentStep2Close      = document.getElementById("urgentStep2Close");
  const urgentStep3Close      = document.getElementById("urgentStep3Close");
  const urgentStep3Back       = document.getElementById("urgentStep3Back");
  const urgentStep4Back       = document.getElementById("urgentStep4Back");
  const urgentStep4Close      = document.getElementById("urgentStep4Close");

  const matchForm             = document.getElementById("matchForm");
  const findMatchBtn          = document.getElementById("findMatchBtn");
  const matchResults          = document.getElementById("matchResults");
  const scheduleMatchBtn      = document.getElementById("scheduleMatchBtn");
  const matchedName           = document.getElementById("matchedName");
  const matchedSpec           = document.getElementById("matchedSpec");
  const appointmentFlow       = document.getElementById("appointmentFlow");
  const chosenProvider        = document.getElementById("chosenProvider");
  const prevMonthBtn          = document.getElementById("prevMonth");
  const nextMonthBtn          = document.getElementById("nextMonth");
  const calendarHeader        = document.getElementById("calendarHeader");
  const calendarGrid          = document.getElementById("calendar");
  const timeSlots             = document.getElementById("timeSlots");
  const confirmForm           = document.getElementById("confirmForm");
  const summaryText           = document.getElementById("summaryText");
  const confirmBtn            = document.getElementById("confirmBtn");
  const matchResultsBack      = document.getElementById("matchResultsBack");
  const matchResultsClose     = document.getElementById("matchResultsClose");
  const appointmentFlowClose  = document.getElementById("appointmentFlowClose");
  const confirmStep4Back      = document.getElementById("confirmStep4Back");
  const confirmStep4Close     = document.getElementById("confirmStep4Close");

  const confirmModal          = document.getElementById("confirmModal");
  const cancelModal           = document.getElementById("cancelModal");
  const modalEdit             = document.getElementById("modalEdit");
  const modalConfirm          = document.getElementById("modalConfirm");
  const modalClose            = document.getElementById("modalClose");
  const cancelYes             = document.getElementById("cancelYes");
  const cancelNo              = document.getElementById("cancelNo");
  const cancelMsg             = document.getElementById("cancelMsg");

  const upcomingCalendarWidget= document.getElementById("upcomingCalendarWidget");

  const dashTabs              = document.querySelectorAll("#feature-rich-dashboard .dashboard-tabs button");
  const richUpcomingSection   = document.getElementById("rich-upcoming");
  const richPastSection       = document.getElementById("rich-past");
  const richFavoritesSection  = document.getElementById("rich-favorites");


  const stored = localStorage.getItem("appointments");
  if (stored) {
    const arr = JSON.parse(stored);
    arr.forEach(a => {
      appointments.push(a);
      addToRichDashboard(a);
    });
    renderUpcomingCalendarWidget();
  }

  const draft = JSON.parse(localStorage.getItem("urgentDraft") || "{}");
  for (let key in draft) {
    const el = document.getElementById("urgent" + key);
    if (el) el.value = draft[key];
  }


  function generateId(prefix = "") {
    return prefix + Date.now().toString();
  }

  function showToast(msg) {
    const t = document.createElement("div");
    t.className = "toast";
    t.innerText = msg;
    document.body.append(t);
    requestAnimationFrame(() => t.classList.add("visible"));
    setTimeout(() => t.remove(), 3000);
  }

  async function callOpenAI(messages) {
    const res = await fetch("/.netlify/functions/openai-proxy", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ messages })
    });
    const j = await res.json();
    return j.choices?.[0]?.message?.content.trim() || "";
  }
Storage.recordCategory("Consult");

  hamburger.addEventListener("click", () => {
    document.body.classList.toggle("sidebar-open");
  });

  shrinkSidebarBtn.addEventListener("click", () => {
    document.body.classList.toggle("sidebar-shrink");
    const icon = shrinkSidebarBtn.querySelector("i");
    icon.classList.toggle("fa-chevron-left");
    icon.classList.toggle("fa-chevron-right");
  });

  themeToggle.addEventListener("click", () => {
    document.documentElement.classList.toggle("dark");
    themeToggle.classList.toggle("fa-moon");
    themeToggle.classList.toggle("fa-sun");
  });

  heroBookBtn.addEventListener("click", () => {
    const target = document.querySelector(heroBookBtn.dataset.target);
    if (target) {
      target.scrollIntoView({ behavior: "smooth" });
    }
  });

  urgentCareLink.addEventListener("click", () => {
    urgentBooking.hidden = false;
  });


  urgentFindMatchBtn.addEventListener("click", async () => {
    const rawConcern = document.getElementById("urgentConcernInput").value.trim();
    if (!rawConcern) {
      showToast("Please enter your concern.");
      return;
    }
    const lower = rawConcern.toLowerCase();

    let matchedProviderId = null;
    Object.keys(symptomMap).forEach(keyword => {
      if (!matchedProviderId && lower.includes(keyword)) {
        matchedProviderId = symptomMap[keyword];
      }
    });

    let chosenProviderObj = matchedProviderId
      ? providers.find(p => p.id === matchedProviderId)
      : null;

    if (!chosenProviderObj) {
      urgentFindMatchBtn.disabled = true;
      urgentFindMatchBtn.innerText = "Matching…";

      const sys = `
You are an AI‐powered medical triage system. A patient will describe their symptoms, and your job is to pick exactly ONE provider ID (p1…p18) who best matches that patient’s needs. Respond only with the provider ID (e.g. "p3"), with no extra commentary.

Below is the detailed profile of each provider. Use the entire description—specialty, experience, procedural skills, patient focus—when deciding.

Providers:
${providers.map(p => `
- ${p.id}: ${p.name}
  • Specialty: ${p.specialty}
  • Facility: ${p.facility}
  • Profile: ${p.description.trim()}
`).join("\n")}
      `.trim();

      const usr = `Concern="${rawConcern}". Return exactly one provider ID (p1…p18).`;
      const rawGPT = await callOpenAI([
        { role: "system", content: sys },
        { role: "user",   content: usr }
      ]);

      const clean = rawGPT.split(/\s+/)[0].trim();
      const isValid = providers.some(p => p.id === clean);
      chosenProviderObj = isValid
        ? providers.find(p => p.id === clean)
        : providers[Math.floor(Math.random() * providers.length)];

      urgentFindMatchBtn.disabled = false;
      urgentFindMatchBtn.innerHTML = `<i class="fas fa-search"></i> Find Specialist`;
    }

    urgentMatchedName.textContent = chosenProviderObj.name;
    urgentMatchedSpec.textContent = `${chosenProviderObj.specialty}, ${chosenProviderObj.facility}`;
    urgentProviderName = chosenProviderObj.name;

    urgentMatchResults.hidden = false;
    urgentStep1.hidden = true;
  });

  urgentStep2Back.addEventListener("click", () => {
    urgentMatchResults.hidden = true;
    urgentStep1.hidden = false;
  });

  urgentStep2Close.addEventListener("click", () => {
    urgentBooking.hidden = true;
  });

  urgentScheduleBtn.addEventListener("click", () => {
    urgentMatchResults.hidden = true;
    urgentCalendarFlow.hidden = false;
  });

  urgentDate.min = new Date().toISOString().split("T")[0];

  urgentStep3Back.addEventListener("click", () => {
    urgentCalendarFlow.hidden = true;
    urgentMatchResults.hidden = false;
  });

  urgentStep3Close.addEventListener("click", () => {
    urgentBooking.hidden = true;
  });

  urgentNextToDetails.addEventListener("click", () => {
    if (!urgentDate.value || !urgentTime.value) {
      showToast("Select date & time.");
      return;
    }
    uDate = urgentDate.value;
    uTime = urgentTime.value;
    urgentCalendarFlow.hidden = true;
    urgentDetailsForm.hidden = false;
    urgentDetailsForm.scrollIntoView({ behavior: "smooth" });
  });

  urgentStep4Back.addEventListener("click", () => {
    urgentDetailsForm.hidden = true;
    urgentCalendarFlow.hidden = false;
  });

  urgentStep4Close.addEventListener("click", () => {
    urgentBooking.hidden = true;
  });

  urgentConfirmBtn.addEventListener("click", () => {
    const name = urgentClientName.value.trim();
    const email = urgentClientEmail.value.trim();
    if (!name || !email) {
      showToast("Enter name & email");
      return;
    }
    document.getElementById("confirmDetails").innerHTML = `
      <p><strong>Urgent Consult</strong></p>
      <p><strong>Provider:</strong> ${urgentProviderName}</p>
      <p><strong>Date:</strong> ${uDate}</p>
      <p><strong>Time:</strong> ${uTime}</p>
      <p><strong>Name:</strong> ${name}</p>
      <p><strong>Email:</strong> ${email}</p>
      <p><strong>Fee:</strong> ₵500</p>
    `;
    confirmModal.hidden = false;
    localStorage.setItem("urgentDraft", JSON.stringify({
      ConcernInput: document.getElementById("urgentConcernInput").value,
      Date: uDate, Time: uTime,
      ClientName: name, ClientEmail: email
    }));
    urgentFlow = true;
  });


  findMatchBtn.addEventListener("click", async () => {
    const rawConcern = document.getElementById("concernInput").value.trim();
    if (!rawConcern) {
      showToast("Enter your concern.");
      return;
    }
    const lower = rawConcern.toLowerCase();

    let matchedProviderId = null;
    Object.keys(symptomMap).forEach(keyword => {
      if (!matchedProviderId && lower.includes(keyword)) {
        matchedProviderId = symptomMap[keyword];
      }
    });

    let chosenProviderObj = matchedProviderId
      ? providers.find(p => p.id === matchedProviderId)
      : null;

    if (!chosenProviderObj) {
      findMatchBtn.disabled = true;
      findMatchBtn.innerHTML = `Matching… <span class="spinner"></span>`;

      const sys = `
You are an AI‐powered medical triage system. A patient will describe their symptoms, urgency level, and language preference. Your job is to pick exactly ONE provider ID (p1…p18) who best matches that patient’s needs. Respond only with the provider ID (e.g. "p7"), with no extra commentary.

Below is the detailed profile of each provider. Use the entire description—specialty, experience, procedural skills, patient focus—when deciding.

Providers:
${providers.map(p => `
- ${p.id}: ${p.name}
  • Specialty: ${p.specialty}
  • Facility: ${p.facility}
  • Profile: ${p.description.trim()}
`).join("\n")}
      `.trim();

      const usr = `Concern="${rawConcern}", Urgency="${document.getElementById("urgencyInput").value}", Language="${document.getElementById("languageInput").value}". Return exactly one provider ID (p1…p18).`;
      const rawGPT = await callOpenAI([
        { role: "system", content: sys },
        { role: "user",   content: usr }
      ]);

      const clean = rawGPT.split(/\s+/)[0].trim();
      const isValid = providers.some(p => p.id === clean);
      chosenProviderObj = isValid
        ? providers.find(p => p.id === clean)
        : providers[Math.floor(Math.random() * providers.length)];

      findMatchBtn.disabled = false;
      findMatchBtn.innerHTML = '<i class="fas fa-search"></i> Predict Specialist';
    }

    matchedName.textContent = chosenProviderObj.name;
    matchedSpec.textContent = `${chosenProviderObj.specialty}, ${chosenProviderObj.facility}`;
    providerId = chosenProviderObj.id;
    providerName = chosenProviderObj.name;

    matchResults.hidden = false;
    matchForm.hidden = true;
  });

  matchResultsBack.addEventListener("click", () => {
    matchResults.hidden = true;
    matchForm.hidden = false;
  });

  matchResultsClose.addEventListener("click", () => {
    matchResults.hidden = true;
    matchForm.hidden = false;
  });

  scheduleMatchBtn.addEventListener("click", () => {
    matchResults.hidden = true;
    appointmentFlow.hidden = false;
    chosenProvider.textContent = providerName;
    buildCalendar(year, month);
  });

  appointmentFlowClose.addEventListener("click", () => {
    appointmentFlow.hidden = true;
  });


  prevMonthBtn.addEventListener("click", () => {
    month = month > 0 ? month - 1 : 11;
    if (month === 11) year--;
    buildCalendar(year, month);
  });

  nextMonthBtn.addEventListener("click", () => {
    month = month < 11 ? month + 1 : 0;
    if (month === 0) year++;
    buildCalendar(year, month);
  });

  function buildCalendar(y, m) {
    calendarHeader.textContent = new Date(y, m).toLocaleString("default", { month: "long", year: "numeric" });
    calendarGrid.innerHTML = "";

    ["Su","Mo","Tu","We","Th","Fr","Sa"].forEach(w => {
      const d = document.createElement("div");
      d.className = "cell";
      d.style.fontWeight = "600";
      d.innerText = w;
      calendarGrid.append(d);
    });

    const first = new Date(y, m, 1).getDay();
    for (let i = 0; i < first; i++) {
      const b = document.createElement("div");
      b.className = "cell closed";
      calendarGrid.append(b);
    }

    const days = new Date(y, m + 1, 0).getDate();
    const avail = availability[providerId] || {};
    const todayMidnight = new Date().setHours(0,0,0,0);

    for (let d = 1; d <= days; d++) {
      const key = `${y}-${String(m+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
      const thisDayTs = new Date(y, m, d).getTime();
      const past = thisDayTs < todayMidnight;
      const open = !past && Array.isArray(avail[key]);
      const cell = document.createElement("div");
      cell.className = `cell ${open ? "open" : "closed"}`;
      cell.dataset.date = key;
      cell.innerText = d;
      if (open) cell.addEventListener("click", () => selectDate(key));
      const today = new Date();
      if (today.getFullYear() === y && today.getMonth() === m && today.getDate() === d) {
        cell.classList.add("today");
      }
      calendarGrid.append(cell);
    }

    timeSlots.innerHTML = "";
    confirmForm.hidden = true;
  }

  function selectDate(key) {
    selDate = key;
    const avail = availability[providerId] || {};
    const slots = avail[key] || [];
    timeSlots.innerHTML = `<h4>Available on ${key}:</h4>`;
    const ul = document.createElement("ul");
    ul.style.display = "flex";
    ul.style.gap = "0.5rem";
    slots.forEach(t => {
      const li = document.createElement("li");
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "btn-sm";
      btn.innerText = t;
      btn.addEventListener("click", () => selectTime(t));
      li.append(btn);
      ul.append(li);
    });
    timeSlots.append(ul);
  }

  function selectTime(t) {
    selTime = t;
    summaryText.textContent = `You selected ${selDate} at ${selTime}.`;
    confirmForm.hidden = false;
    confirmForm.scrollIntoView({ behavior: "smooth" });
  }

  confirmBtn.addEventListener("click", () => {
    const name = document.getElementById("clientName").value.trim();
    if (!name) {
      showToast("Enter your name");
      return;
    }
    document.getElementById("confirmDetails").innerHTML = `
      <p><strong>Provider:</strong> ${providerName}</p>
      <p><strong>Date:</strong> ${selDate}</p>
      <p><strong>Time:</strong> ${selTime}</p>
      <p><strong>Your Name:</strong> ${name}</p>
    `;
    confirmModal.hidden = false;
  });


  modalClose.addEventListener("click", () => {
    confirmModal.hidden = true;
  });

  modalEdit.addEventListener("click", () => {
    confirmModal.hidden = true;
    confirmForm.scrollIntoView({ behavior: "smooth" });
  });

  modalConfirm.addEventListener("click", () => {
    if (urgentFlow) {
      const email = urgentClientEmail.value.trim();
      const handler = PaystackPop.setup({
        key: "pk_test_297586e51710e83d3c159bfe71ff45c7e23411fa",
        email: email,
        amount: URGENT_FEE_KOBO,
        currency: "GHS",
        ref: generateId("U"),
        onClose: function() {},
        callback: function(response) {
          const id = generateId("U");
          appointments.push({ id, name: urgentProviderName, date: uDate, time: uTime, urgent: true });
          localStorage.setItem("appointments", JSON.stringify(appointments));
          addToRichDashboard({ id, name: urgentProviderName, date: uDate, time: uTime, urgent: true });
          renderUpcomingCalendarWidget();
          urgentFlow = false;
          confirmModal.hidden = true;
        }
      });
      handler.openIframe();
    } else {
      const id = generateId();
      appointments.push({ id, name: providerName, date: selDate, time: selTime, urgent: false });
      localStorage.setItem("appointments", JSON.stringify(appointments));
      addToRichDashboard({ id, name: providerName, date: selDate, time: selTime, urgent: false });
      renderUpcomingCalendarWidget();
      confirmModal.hidden = true;
    }
  });


  cancelYes.addEventListener("click", () => {
    const id = cancelYes.dataset.apptId;
    const idx = appointments.findIndex(a => a.id === id);
    if (idx > -1) {
      appointments.splice(idx, 1);
      localStorage.setItem("appointments", JSON.stringify(appointments));
    }
    const card = document.querySelector(`.card[data-id="${id}"]`);
    if (card) card.remove();
    renderUpcomingCalendarWidget();
    cancelModal.hidden = true;
  });

  cancelNo.addEventListener("click", () => {
    cancelModal.hidden = true;
  });


  function renderUpcomingCalendarWidget() {
    upcomingCalendarWidget.innerHTML = "";
    const ctrl = document.createElement("div");
    ctrl.style.display = "flex";
    ctrl.style.justifyContent = "space-between";
    ctrl.style.marginBottom = "0.5rem";
    const prev = document.createElement("button");
    prev.textContent = "‹ Prev";
    prev.className = "btn-sm";
    const next = document.createElement("button");
    next.textContent = "Next ›";
    next.className = "btn-sm";
    ctrl.append(prev, next);
    upcomingCalendarWidget.append(ctrl);

    prev.addEventListener("click", () => {
      widgetMonth--;
      if (widgetMonth < 0) {
        widgetMonth = 11;
        widgetYear--;
      }
      renderWidget();
    });

    next.addEventListener("click", () => {
      widgetMonth++;
      if (widgetMonth > 11) {
        widgetMonth = 0;
        widgetYear++;
      }
      renderWidget();
    });

    function renderWidget() {
      const title = document.createElement("h4");
      title.innerText = new Date(widgetYear, widgetMonth).toLocaleString("default", { month: "long", year: "numeric" });
      const grid = document.createElement("div");
      grid.className = "calendar-grid";

      ["Su","Mo","Tu","We","Th","Fr","Sa"].forEach(w => {
        const hd = document.createElement("div");
        hd.className = "cell";
        hd.style.fontWeight = "600";
        hd.innerText = w;
        grid.append(hd);
      });

      const firstDay = new Date(widgetYear, widgetMonth, 1).getDay();
      for (let i = 0; i < firstDay; i++) {
        const blank = document.createElement("div");
        blank.className = "cell";
        grid.append(blank);
      }

      const days = new Date(widgetYear, widgetMonth + 1, 0).getDate();
      const marks = new Set(
        appointments
          .filter(a => {
            const d = new Date(a.date);
            return d.getFullYear() === widgetYear && d.getMonth() === widgetMonth;
          })
          .map(a => new Date(a.date).getDate())
      );

     for (let d = 1; d <= days; d++) {
  const cell = document.createElement("div");
  const isMarked = marks.has(d);
  cell.className = isMarked ? "cell open" : "cell";
  cell.innerText = d;

  const today = new Date();
  if (
    today.getFullYear() === widgetYear &&
    today.getMonth() === widgetMonth &&
    today.getDate() === d
  ) {
    cell.classList.add("today");
  }

  if (isMarked) {
    cell.addEventListener("click", () => {
      const list = appointments.filter(a => {
        const ad = new Date(a.date);
        return (
          ad.getFullYear() === widgetYear &&
          ad.getMonth() === widgetMonth &&
          ad.getDate() === d
        );
      });
      alert(list.map(a => `${a.name}: ${a.time}`).join("\n"));
    });
  }
  grid.append(cell);
}

      upcomingCalendarWidget.querySelectorAll("h4, .calendar-grid").forEach(n => n.remove());
      upcomingCalendarWidget.append(title, grid);
    }

    renderWidget();
  }


  function addToRichDashboard(appt) {
    const card = document.createElement("div");
    card.className = "card";
    card.dataset.id = appt.id;
    card.innerHTML = `
      <i class="fas fa-user-md fa-2x"></i>
      <div class="details">
        <h4><strong>${appt.name}</strong></h4>
        <p>${appt.date} • ${appt.time}</p>
      </div>
      <div class="actions">
        <button class="btn-reschedule"><i class="fas fa-sync-alt"></i></button>
        <button class="btn-cancel"><i class="fas fa-times"></i></button>
      </div>
    `;

    const btnReschedule = card.querySelector(".btn-reschedule");
    btnReschedule.addEventListener("click", () => {
      if (appt.urgent) {
        urgentProviderName = appt.name;
        urgentBooking.hidden = false;
        urgentStep1.hidden = true;
        urgentMatchResults.hidden = true;
        urgentCalendarFlow.hidden = false;
        urgentDate.value = appt.date;
        urgentTime.value = appt.time;
        uDate = appt.date;
        uTime = appt.time;
      } else {
        const found = providers.find(p => p.name === appt.name);
        if (found) {
          providerId = found.id;
          providerName = appt.name;
          appointmentFlow.hidden = false;
          chosenProvider.textContent = providerName;
          buildCalendar(year, month);
        }
      }
      document.getElementById("confirmDetails").innerHTML = `
        <p><strong>${appt.name}</strong></p>
        <p><strong>Date:</strong> ${appt.date}</p>
        <p><strong>Time:</strong> ${appt.time}</p>
      `;
    });

    const btnCancel = card.querySelector(".btn-cancel");
    btnCancel.addEventListener("click", () => {
      cancelMsg.innerText = appt.urgent
        ? "This was an urgent booking (₵500 non-refundable). Cancel anyway?"
        : "Are you sure you want to cancel this appointment?";
      cancelYes.dataset.apptId = appt.id;
      cancelModal.hidden = false;
    });

    richUpcomingSection.append(card);
  }

  dashTabs.forEach(btn => {
    btn.addEventListener("click", () => {
      dashTabs.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      richUpcomingSection.hidden   = (btn.dataset.tab !== "rich-upcoming");
      richPastSection.hidden       = (btn.dataset.tab !== "rich-past");
      richFavoritesSection.hidden  = (btn.dataset.tab !== "rich-favorites");
    });
  });
});
</script>

  
</body>

</html>
