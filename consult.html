<!DOCTYPE html>
<html lang="en" aria-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>E-Pharmacy AI Portal</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
 <script defer src="https://js.paystack.co/v1/inline.js"></script>
  <style>
    :root {
      --cb-primary: #3b3f88;
      --cb-primary-alt: #5c4d99;
      --cb-accent: #f08a5d;
      --cb-bg: #f7f6f9;
      --cb-surface: #ffffff;
      --cb-text: #2d2d2d;
      --radius: 0.75rem;
      --padding: 1rem;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      --transition: 0.3s ease;
      --sidebar-width: 220px;
      --sidebar-collapsed-width: 60px;
    }
    html.dark {
      --cb-bg: #1a1b2e;
      --cb-surface: #2d2d44;
      --cb-text: #e0e0e0;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: var(--transition);
    }
    body {
      font-family: "Montserrat", sans-serif;
      background: var(--cb-bg);
      color: var(--cb-text);
      line-height: 1.5;
    }
    a {
      color: inherit;
      text-decoration: none;
    }
    img {
      max-width: 100%;
      display: block;
    }

    /* ─── Layout ─────────────────────────────────────────────────── */
    aside#sidebar {
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      width: var(--sidebar-width);
      background: var(--cb-surface);
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      z-index: 1000;
    }
   body.sidebar-shrink aside#sidebar {
  width: var(--sidebar-collapsed-width);
}

/* hide all link text when collapsed, keep icons */
body.sidebar-shrink aside#sidebar nav li a span,
body.sidebar-shrink aside#sidebar .brand span {
  display: none;
  overflow: hidden;
}
    body.sidebar-shrink aside#sidebar nav li a,
body.sidebar-shrink aside#sidebar .brand {
  justify-content: center;
}
    aside#sidebar .brand {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: var(--padding);
      background: var(--cb-primary);
      color: #fff;
      font-size: 1.25rem;
    }
    aside#sidebar nav {
      flex: 1;
      overflow-y: auto;
    }
    aside#sidebar nav ul {
      list-style: none;
    }
    aside#sidebar nav li a {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem var(--padding);
      border-radius: var(--radius);
      color: var(--cb-text);
    }
    aside#sidebar nav li.active a,
    aside#sidebar nav li a:hover {
      background: var(--cb-primary-alt);
      color: #fff;
    }
    #shrinkSidebar {
      background: none;
      border: none;
      font-size: 1.25rem;
      color: var(--cb-primary);
      cursor: pointer;
      margin: var(--padding);
    }
    header {
      position: sticky;
      top: 0;
      margin-left: var(--sidebar-width);
      background: var(--cb-surface);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 var(--padding);
      height: 60px;
      box-shadow: var(--shadow);
      z-index: 1001;
    }
    body.sidebar-shrink header {
      margin-left: var(--sidebar-collapsed-width);
    }
    header h1 {
      font-size: 1.25rem;
      color: var(--cb-primary);
    }
    #hamburger,
    #themeToggle {
      font-size: 1.5rem;
      color: var(--cb-primary);
      cursor: pointer;
    }
    main,
    section,
    footer {
      margin-left: calc(var(--sidebar-width) - 1rem);
      padding: var(--padding);
      transition: margin-left var(--transition);
    }
    body.sidebar-shrink main,
    body.sidebar-shrink section,
    body.sidebar-shrink footer {
 margin-left: calc(var(--sidebar-collapsed-width) - 1rem);    }

    /* ─── Module Base ────────────────────────────────────────────── */
    section.module {
      background: var(--cb-surface);
      border-radius: var(--radius);
      padding: var(--padding);
      margin-bottom: 1.5rem;
      box-shadow: var(--shadow);
    }
    section.module h2 {
      font-size: 1.5rem;
      color: var(--cb-primary);
      margin-bottom: 0.5rem;
    }
    section.module .desc {
      color: var(--cb-primary-alt);
      margin-bottom: 1rem;
    }
 #matchResults .response {
 position: relative;
  padding-top: 2rem; /* give room for close */
 }
    /* ─── Hero & Quick Actions ─────────────────────────────────── */
    #hero {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--padding);
      background: var(--cb-primary-alt);
      color: #fff;
      padding: 2rem var(--padding);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    #hero .hero-text h2 {
      font-size: 2.25rem;
    }
    #hero .hero-text h2,
hero-text .desc {
 color: var(--secondary);
}
    #hero .btn {
      background: var(--cb-accent);
      color: #fff;
    }
    #quickActions .quick-actions {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }
    #quickActions .quick-actions .btn {
      flex: 1 1 auto;
      min-width: 160px;
    }
    #quickActions .view-tabs {
      display: flex;
      gap: 0.5rem;
    }
    #quickActions .view-tabs .btn-sm {
      background: var(--cb-primary-alt);
      color: #fff;
      border-radius: var(--radius);
      padding: 0.5rem 1rem;
      cursor: pointer;
    }
    #quickActions .tips {
      flex: 1 1 100%;
      text-align: right;
      color: var(--cb-bg);
      font-size: 0.9rem;
    }
    #quickActions .tips a {
      text-decoration: underline;
       color: var(--cb-accent);

      cursor: pointer;
    }

    /* ─── Forms & Inputs ──────────────────────────────────────── */
    form label {
      display: block;
      margin-bottom: 1rem;
      font-weight: 600;
    }
    input,
    select,
    textarea,
    button.btn-sm {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--cb-primary-alt);
      border-radius: var(--radius);
      background: var(--cb-bg);
      color: var(--cb-text);
      font-size: 1rem;
    }
    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--cb-accent);
      box-shadow: 0 0 0 3px rgba(240, 138, 93, 0.3);
      outline: none;
    }
    button.btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--cb-accent);
      color: #fff;
      border: none;
      cursor: pointer;
      padding: 0.75rem 1.25rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      font-size: 1rem;
    }
    button.btn:hover {
      background: #d4724f;
    }

    /* ─── Match Panel ─────────────────────────────────────────── */
    #matchResults .result-content {
      margin: 1rem 0;
      font-size: 1.1rem;
    }
    .match-actions {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
    }
#matchResults .close-btn {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: var(--cb-accent);
  color: #fff;
  border-radius: 50%;
  width: 2rem; height: 2rem;
  display: flex; align-items:center; justify-content:center;
 }
    /* ─── Calendar & Time Slots ──────────────────────────────── */
    .month-nav {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .month-nav .btn-sm {
      background: var(--cb-primary-alt);
      color: #fff;
    }
    #calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 1px;
      background: var(--cb-bg);
      border-radius: var(--radius);
    }
    #calendar .cell {
      padding: 0.75rem;
      background: var(--cb-surface);
      text-align: center;
      cursor: pointer;
      transition: transform var(--transition);
    }
    #calendar .cell.closed {
      background: #f0f0f0;
      color: var(--cb-muted);
      cursor: not-allowed;
    }
    #calendar .cell.open {
      background: var(--cb-accent);
      color: #fff;
      font-weight: bold;
    }
    #calendar .cell.open:hover {
      transform: scale(1.05);
      z-index: 1;
    }
    #calendar .cell.today {
      border: 2px dashed var(--cb-primary);
    }
    #timeSlots h4 {
      font-size: 1.1rem;
      color: var(--cb-primary-alt);
      margin-bottom: 0.5rem;
    }
    #timeSlots ul {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      list-style: none;
      padding: 0;
    }
    #timeSlots ul li button {
      background: var(--cb-primary-alt);
      color: #fff;
      border-radius: var(--radius);
      padding: 0.5rem 1rem;
      box-shadow: var(--shadow);
      cursor: pointer;
    }

    /* ─── Final Booking ──────────────────────────────────────── */
    #finalBookingForm label {
      margin-bottom: 1rem;
    }

    /* ─── Rich Dashboard ────────────────────────────────────── */
    #feature-rich-dashboard .dashboard-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    #feature-rich-dashboard .dashboard-tabs button {
      flex: 1;
      padding: 0.75rem;
      border: none;
      border-radius: var(--radius);
      background: var(--cb-primary-alt);
      color: #fff;
      cursor: pointer;
    }
    #feature-rich-dashboard .dashboard-tabs button.active {
      background: var(--cb-accent);
    }
    #feature-rich-dashboard .dashboard-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: var(--padding);
    }
    #feature-rich-dashboard .card {
      background: var(--cb-surface);
      padding: var(--padding);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    #feature-rich-dashboard .card .details {
      flex: 1;
    }
    #feature-rich-dashboard .card .actions button,
    #feature-rich-dashboard .card .actions a {
      background: var(--cb-primary-alt);
      color: #fff;
      border: none;
      padding: 0.5rem;
      border-radius: var(--radius);
      margin-left: 0.25rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    /* ─── Toast ─────────────────────────────────────────────── */
    .toast {
      position: fixed;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%) translateY(100%);
      background: var(--cb-primary-alt);
      color: #fff;
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      opacity: 0;
      transition: transform 0.3s, opacity 0.3s;
      z-index: 2000;
    }
    .toast.visible {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    /* ─── Responsive ───────────────────────────────────────── */
    @media (max-width: 1024px) {
      section.module {
        padding: 0.75rem;
      }
    }
    @media (max-width: 768px) {
      aside#sidebar {
        transform: translateX(-100%);
        position: absolute;
      }
      body.sidebar-open aside#sidebar {
        transform: translateX(0);
      }
      header {
        margin-left: 0;
      }
      main,
      section,
      footer {
        margin-left: 0;
        padding: 0.5rem;
      }
      #hero {
        grid-template-columns: 1fr;
        padding: 1.5rem;
      }
    }
    /* Consistent positioning for all step buttons */
.response  .btn-sm,
#urgentBooking .btn-sm {
  position: absolute;
  bottom: 1rem;
  right: 1rem;
  margin-left: 0.5rem;
}
#urgentBooking .btn-sm.back {
  right: auto;
  left: 1rem;
}

    /* ─── Upcoming Calendar Entries ───────────────────────── */
#upcomingCalendarContainer .calendar-entry {
  padding: .5rem;
  margin-bottom: .5rem;
  border-left: 4px solid var(--cb-accent);
  background: var(--cb-bg);
}
/* ─── CSS for Provider Matching + Scheduling ─────────────────── */
#providerMatch .response,
#providerMatch #appointmentFlow {
  margin-top: 1.5rem;
}

#matchResults {
  position: relative;
  padding: 1.5rem;
  background: var(--cb-surface);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
#matchResults .close-btn {
  position: absolute;
  top: 0.5rem; right: 0.5rem;
  background: var(--cb-accent);
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 2rem; height: 2rem;
  display:flex; align-items:center; justify-content:center;
  cursor: pointer;
}
#matchResults .card {
  display:flex; align-items:center; gap:1rem;
  margin-bottom:1rem;
}
#matchResults .details h4 { margin-bottom:0.25rem; }

.month-nav {
  display:flex; align-items:center; justify-content:center; gap:1rem;
  margin-bottom:1rem;
}
.btn-sm {
  background: var(--cb-primary-alt);
  color:#fff;
  border:none;
  border-radius:var(--radius);
  padding:0.5rem 1rem;
  cursor:pointer;
}

.calendar-grid {
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap:1px;
  margin-bottom:1rem;
}
.calendar-grid .cell {
  background: var(--cb-surface);
  padding:0.5rem;
  text-align:center;
  cursor:pointer;
  transition:transform 0.2s;
}
.calendar-grid .cell.closed {
  background:#f0f0f0;
  color:var(--cb-muted);
  cursor:not-allowed;
}
.calendar-grid .cell.open {
  background:var(--cb-accent);
  color:#fff;
  font-weight:600;
}
.calendar-grid .cell.today {
  border:2px dashed var(--cb-primary);
}
.calendar-grid .cell.open:hover {
  transform:scale(1.05);
}

#timeSlots h4 { margin-bottom:0.5rem; color:var(--cb-primary-alt); }
#timeSlots ul { display:flex; flex-wrap:wrap; gap:0.5rem; padding:0; list-style:none; }
#timeSlots ul li button {
  background:var(--cb-primary-alt);
  color:#fff;
  border:none;
  padding:0.5rem 1rem;
  border-radius:var(--radius);
  cursor:pointer;
}
 .modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center;
    z-index: 2000;
  }
  .modal-content {
    background: var(--cb-surface); padding: 1.5rem; border-radius: var(--radius);
    max-width: 400px; width: 90%; box-shadow: var(--shadow);
  }
  .modal-content h3 { margin-top: 0; color: var(--cb-primary); }
  .modal-content button { margin-right: 0.5rem; }
     .modal[hidden] {
    display: none !important;
  }
    #urgentMatchResults .close-btn {
   position: absolute;
   top: 0.5rem;
   right: 0.5rem;
   background: var(--cb-accent);
   color: #fff;
   border-radius: 50%;
   width: 2rem; height: 2rem;
   display:flex; align-items:center; justify-content:center;
   cursor:pointer;
 }
    @media (prefers-color-scheme: dark), html.dark {
  #calendar .cell.closed { background: #3b3f88; color: #aaa; }
  #calendar .cell.open   { background: #f08a5d; color: #111; }
}

  </style>
</head>

<body>
  <!-- Sidebar -->
  <aside id="sidebar">
    <div class="brand">
      <i class="fas fa-calendar-check"></i>
      <span>Vitra AI Consult</span>
    </div>
    <nav>
      <ul>
        <li class="active">
          <a href="#providerMatch"><i class="fas fa-user-md"></i><span>Provider Match</span></a>
        </li>
        <li>
          <a href="#feature-rich-dashboard"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a>
        </li>
      </ul>
    </nav>
    <button id="shrinkSidebar" title="Toggle sidebar"><i class="fas fa-chevron-left"></i></button>
  </aside>

  <!-- Header -->
  <header>
    <i id="hamburger" class="fas fa-bars"></i>
    <h1>AI-Powered Consultation Booking</h1>
    <i id="themeToggle" class="fas fa-moon"></i>
  </header>

  <main>
    <!-- Hero -->
    <section id="hero" class="module">
      <div class="hero-text">
        <h2><i class="fas fa-stethoscope"></i> Seamless Consultation Booking</h2>
        <p class="desc">From instant provider match to one-click appointment, powered by AI.</p>
        <button class="btn hero-btn"><i class="fas fa-book-medical"></i> Book an Appointment</button>
      </div>
      <div class="hero-graphic">
        <img src="9E2CDE35-303A-4C5F-A4A9-1B0420CF8B0C.png" alt="Consultation illustration" />
      </div>
    </section>

    <!-- Quick Actions -->
    <section id="quickActions" class="module">
      <div class="quick-actions">
        <button class="btn"><i class="fas fa-calendar-plus"></i> Book an Appointment</button>
        <div class="view-tabs">
          <button id="viewUpcoming" class="btn-sm"><i class="fas fa-calendar-check"></i> View Upcoming</button>
          <button id="viewPast" class="btn-sm"><i class="fas fa-history"></i> View Past</button>
        </div>
        <p class="tips"><i class="fas fa-info-circle"></i> Need urgent care? <a id="urgentCare">Click here</a></p>
      </div>
    </section>

    <!-- Urgent Booking Module -->
    <section id="urgentBooking" class="module" hidden>
      <h2><i class="fas fa-exclamation-triangle"></i> Urgent Appointment</h2>
      <p class="desc">Describe your concern, pick a specialist, then choose date/time. ₵500 non-refundable fee.</p>

      <!-- Step 1 -->
      <div id="urgentStep1">
        <label>
          <i class="fas fa-notes-medical"></i> Chief Concern:
          <input type="text" id="urgentConcernInput" placeholder="e.g. severe headache" required />
        </label>
        <button type="button" id="urgentFindMatchBtn" class="btn">
          <i class="fas fa-search"></i> Find Specialist
        </button>
      </div>


      
      <!-- Step 2 -->
      <div id="urgentMatchResults" class="response" hidden>
        <button class="close-btn" id="urgentStep2Close"><i class="fas fa-times"></i></button>
        <div class="card">
          <i class="fas fa-user-md fa-2x"></i>
          <div class="details">
            <h4 id="urgentMatchedName"></h4>
            <p id="urgentMatchedSpec"></p>
          </div>
        </div>
        <button id="urgentScheduleBtn" class="btn">
          <i class="fas fa-calendar-alt"></i> Schedule
        </button>
        <button class="btn-sm back" id="urgentStep2Back">Back</button>
      </div>

      <!-- Step 3 -->
      <div id="urgentCalendarFlow" hidden>
        <label>Date: <input type="date" id="urgentDate" /></label>
        <label>Time: <input type="time" id="urgentTime" /></label>
        <button id="urgentNextToDetails" class="btn"><i class="fas fa-arrow-right"></i> Next</button>
                <button class="btn-sm close-btn" id="urgentStep3Close"><i class="fas fa-times"></i></button>
      </div>

      <!-- Step 4 -->
      <form id="urgentDetailsForm" hidden class="module">
        <label><i class="fas fa-user"></i> Your Name:
          <input id="urgentClientName" placeholder="Full Name" required />
        </label>
        <label><i class="fas fa-envelope"></i> Email:
          <input id="urgentClientEmail" type="email" required />
        </label>
        <button type="button" id="urgentConfirmBtn" class="btn">
          <i class="fas fa-check"></i> Review & Pay
        </button>
           </form>
    </section>

    <!-- Provider Matching -->
    <section id="providerMatch" class="module">
      <h2><i class="fas fa-user-md"></i> Find Your Specialist</h2>
      <p class="desc">Describe your health concern and let our AI pick the best in-network professional.</p>

      <!-- Step 1 -->
      <form id="matchForm">
        <label><i class="fas fa-notes-medical"></i> Chief Concern:
          <input type="text" id="concernInput" placeholder="e.g. persistent cough" required />
        </label>
        <label><i class="fas fa-exclamation-circle"></i> Urgency:
          <select id="urgencyInput"><option>Low</option><option>Medium</option><option>High</option></select>
        </label>
        <label><i class="fas fa-language"></i> Language:
          <select id="languageInput"><option>English</option><option>Twi</option><option>Ga</option></select>
        </label>
        <button type="button" id="findMatchBtn" class="btn">
          <i class="fas fa-search"></i> Predict Specialist
        </button>
      </form>

      <!-- Step 2 -->
      <div id="matchResults" class="response" hidden>
        <button class="close-btn" id="matchResultsClose"><i class="fas fa-times"></i></button>
        <div class="card">
          <i class="fas fa-user-md fa-2x"></i>
          <div class="details">
            <h4 id="matchedName"></h4>
            <p id="matchedSpec"></p>
          </div>
        </div>
        <button id="scheduleMatchBtn" class="btn"><i class="fas fa-calendar-alt"></i> Schedule</button>
            </div>

      <!-- Step 3 -->
      <div id="appointmentFlow" hidden>
        <button class="btn-sm close-btn" id="appointmentFlowClose"><i class="fas fa-times"></i></button>
        <h3><i class="fas fa-calendar-alt"></i> Schedule with <span id="chosenProvider"></span></h3>
        <div class="month-nav">
          <button id="prevMonth" class="btn-sm"><i class="fas fa-chevron-left"></i></button>
          <div id="calendarHeader"></div>
          <button id="nextMonth" class="btn-sm"><i class="fas fa-chevron-right"></i></button>
        </div>
        <div id="calendar" class="calendar-grid"></div>
        <div id="timeSlots"></div>

        <!-- Step 4 -->
        <form id="confirmForm" hidden class="module">
          
          <h4><i class="fas fa-check-circle"></i> Confirm</h4>
          <label><i class="fas fa-user"></i> Your Name:
            <input id="clientName" placeholder="Full Name" required />
          </label>
          <label><i class="fas fa-envelope"></i> Email:
            <input id="clientEmail" type="email" required />
          </label>
          <p id="summaryText"></p>
          <button id="confirmBtn" type="button" class="btn"><i class="fas fa-check"></i> Confirm</button>
        </form>
      </div>
    </section>

    <!-- Dashboard -->
    <section id="feature-rich-dashboard" class="module">
      <h2><i class="fas fa-tachometer-alt"></i> Rich Dashboard</h2>
      <div class="dashboard-tabs">
        <button data-tab="rich-upcoming" class="active"><i class="fas fa-calendar-check"></i> Upcoming</button>
        <button data-tab="rich-past"><i class="fas fa-history"></i> Past</button>
        <button data-tab="rich-favorites"><i class="fas fa-heart"></i> Favorites</button>
      </div>
      <div id="rich-upcoming" class="dashboard-cards"></div>
      <div id="rich-past" class="dashboard-cards" hidden></div>
      <div id="rich-favorites" class="dashboard-cards" hidden></div>
    </section>

    <!-- Upcoming Calendar -->
    <section id="upcomingCalendar" class="module">
      <h2><i class="fas fa-calendar-alt"></i> Your Upcoming Appointments</h2>
      <p class="desc">Click any marked date to view details.</p>
      <div id="upcomingCalendarWidget"></div>
    </section>
  </main>

  <!-- Review Modal -->
  <div id="confirmModal" class="modal" hidden>
    <div class="modal-content">
      <h3>Review Your Appointment</h3>
      <div id="confirmDetails"></div>
      <button id="modalEdit" class="btn-sm">Edit</button>
      <button id="modalConfirm" class="btn">Confirm Booking</button>
      <button id="modalClose" class="btn-sm">Cancel</button>
    </div>
  </div>

  <!-- Cancel Modal -->
  <div id="cancelModal" class="modal" hidden>
    <div class="modal-content">
      <h3>Cancel Appointment?</h3>
      <p id="cancelMsg"></p>
      <button id="cancelNo" class="btn-sm">No, Keep It</button>
      <button id="cancelYes" class="btn">Yes, Cancel</button>
    </div>
  </div>

  <footer>
    <small>© 2025 AI-Pharmacy Chain — All rights reserved</small>
  </footer>


 <script defer src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
 <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // ══════════════════════
  // ── 1) GLOBAL STATE ──
  // ══════════════════════
  const state = {
    appointments: JSON.parse(localStorage.getItem("appointments") || "[]"),
    urgentDraft: JSON.parse(localStorage.getItem("urgentDraft") || "{}"),
    darkMode: localStorage.getItem("darkMode") === "true",
    widgetYear: new Date().getFullYear(),
    widgetMonth: new Date().getMonth(),
    // flows
    urgent: { step: 1, provider: null, date: null, time: null, draftSaved: false },
    match:  { step: 1, providerId: null, providerName: null, date: null, time: null }
  };

 // ─── Providers & Availability ──────────────────────────────────────
    const providers = [
  {
    id: "p1",
    name: "Dr. Kwame Asante",
    specialty: "Pulmonologist",
    facility: "Korle Bu Teaching Hospital"
  },
  {
    id: "p2",
    name: "Dr. Abena Owusu",
    specialty: "Cardiologist",
    facility: "37 Military Hospital"
  },
  {
    id: "p3",
    name: "Dr. Kojo Mensah",
    specialty: "Psychiatrist",
    facility: "Ridge Hospital"
  },
  {
    id: "p4",
    name: "Dr. Yaa Dufie",
    specialty: "Clinical Dietitian",
    facility: "Nyaho Medical Centre"
  },
  {
    id: "p5",
    name: "Dr. Nana Adjei",
    specialty: "General Practitioner",
    facility: "Cape Coast Teaching Hospital"
  },
  {
    id: "p6",
    name: "Dr. Efua Amponsah",
    specialty: "Endocrinologist",
    facility: "LEKMA Hospital"
  },
  {
    id: "p7",
    name: "Dr. Michael Addo",
    specialty: "Neurologist",
    facility: "37 Military Hospital"
  },
  {
    id: "p8",
    name: "Dr. Grace Ofori",
    specialty: "Dermatologist",
    facility: "Accra Dermatology Centre"
  },
  {
    id: "p9",
    name: "Dr. Joseph Kumi",
    specialty: "Orthopedic Surgeon",
    facility: "Komfo Anokye Teaching Hospital"
  },
  {
    id: "p10",
    name: "Dr. Ama Brew",
    specialty: "Pediatrician",
    facility: "The Trust Hospital"
  },
  {
    id: "p11",
    name: "Ms. Akosua Baah",
    specialty: "Physiotherapist",
    facility: "Tema General Hospital"
  },
  {
    id: "p12",
    name: "Mr. Daniel Boakye",
    specialty: "Pharmacist",
    facility: "Ridge Hospital Pharmacy"
  },
  {
    id: "p13",
    name: "Mrs. Esther Kumi",
    specialty: "Occupational Therapist",
    facility: "Cape Coast Teaching Hospital"
  },
  {
    id: "p14",
    name: "Ms. Joy Mensah",
    specialty: "Speech and Language Therapist",
    facility: "LEKMA Hospital"
  },
  {
    id: "p15",
    name: "Dr. Paul Yeboah",
    specialty: "Dermatologist",
    facility: "Korle Bu Teaching Hospital"
  },
  {
    id: "p16",
    name: "Dr. Linda Frimpong",
    specialty: "Nephrologist",
    facility: "37 Military Hospital"
  },
  {
    id: "p17",
    name: "Mr. Kwesi Owusu",
    specialty: "Nutritionist",
    facility: "Nyaho Medical Centre"
  },
  {
    id: "p18",
    name: "Ms. Abena Boateng",
    specialty: "Psychologist",
    facility: "Accra Psychology & Counselling Centre"
  }
];
    const availability = {
      p1:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-10": ["09:00","10:00","11:00"], "2025-06-12": ["14:00","15:00"], "2025-06-15": ["08:30","09:30","10:30"] },
      p2:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-03": ["10:00","13:00","16:00"], "2025-06-04": ["09:00","11:00"], "2025-06-15": ["12:00","14:00"] },
      p3:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-08": ["08:00","09:00","10:00","11:00"], "2025-06-11": ["13:30","14:30"], "2025-06-16": ["15:00","16:00"] },
      p4:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-05": ["09:30","10:30","11:30"], "2025-06-09": ["14:00","15:00","16:00"], "2025-06-18": ["08:00","09:00"] },
      p5:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-07": ["08:15","09:15","10:15"], "2025-06-13": ["13:00","14:00"], "2025-06-17": ["10:00","11:00","12:00"] },
      p6:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-02": ["09:00","10:00"], "2025-06-14": ["11:00","12:00","13:00"], "2025-06-19": ["14:00","15:00"] },
      p7:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-06": ["08:30","09:30","10:30"], "2025-06-12": ["13:00","14:00","15:00"], "2025-06-20": ["09:00","10:00"] },
      p8:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-01": ["10:00","11:00","12:00"], "2025-06-11": ["14:30","15:30"], "2025-06-16": ["08:00","09:00","10:00"] },
      p9:  { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-04": ["09:00","10:00","11:00"], "2025-06-13": ["13:00","14:00"], "2025-06-18": ["15:00","16:00"] },
      p10: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-03": ["08:00","09:00","10:00"], "2025-06-10": ["11:00","12:00","13:00"], "2025-06-17": ["14:00","15:00"] },
      p11: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-05": ["09:30","10:30","11:30"], "2025-06-14": ["13:00","14:00","15:00"], "2025-06-19": ["08:00","09:00"] },
      p12: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-02": ["10:00","11:00","12:00"], "2025-06-08": ["14:00","15:00"], "2025-06-20": ["09:00","10:00","11:00"] },
      p13: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-07": ["08:00","09:00","10:00"], "2025-06-12": ["11:30","12:30","13:30"], "2025-06-18": ["14:00","15:00"] },  
      p14: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-03": ["09:15","10:15","11:15"], "2025-06-09": ["13:00","14:00","15:00"], "2025-06-16": ["08:00","09:00"] },
      p15: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-05": ["08:30","09:30","10:30"], "2025-06-13": ["11:00","12:00","13:00"], "2025-06-19": ["14:30","15:30"] },
      p16: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-02": ["10:00","11:00","12:00"], "2025-06-11": ["13:15","14:15"], "2025-06-17": ["09:00","10:00","11:00"] },
      p17: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-04": ["09:00","10:00","11:00"], "2025-06-10": ["12:00","13:00","14:00"], "2025-06-15": ["15:00","16:00"] },
      p18: { "2025-05-31": ["09:30","10:30","12:00"], "2025-06-01": ["08:00","09:00","10:00"], "2025-06-08": ["11:30","12:30","13:30"], "2025-06-20": ["14:00","15:00","16:00"] }
    };

  // ══════════════════════
  // ── 2) ELEMENT REFS ──
  // ══════════════════════
  const body              = document.body;
  const sidebar           = document.getElementById("sidebar");
  const shrinkBtn         = document.getElementById("shrinkSidebar");
  const hamburger         = document.getElementById("hamburger");
  const themeToggle       = document.getElementById("themeToggle");
  const urgentCareLink    = document.getElementById("urgentCare");
  const bookApptBtns      = document.querySelectorAll(".hero-btn, #quickActions .btn");
  // ** Urgent flow **
  const urgentSection     = document.getElementById("urgentBooking");
  const u = {
    step1:  document.getElementById("urgentStep1"),
    step2:  document.getElementById("urgentMatchResults"),
    step3:  document.getElementById("urgentCalendarFlow"),
    step4:  document.getElementById("urgentDetailsForm"),
    concernInput: document.getElementById("urgentConcernInput"),
    findBtn:      document.getElementById("urgentFindMatchBtn"),
    nameDisplay:  document.getElementById("urgentMatchedName"),
    specDisplay:  document.getElementById("urgentMatchedSpec"),
    scheduleBtn:  document.getElementById("urgentScheduleBtn"),
    dateInput:    document.getElementById("urgentDate"),
    timeInput:    document.getElementById("urgentTime"),
    nextBtn:      document.getElementById("urgentNextToDetails"),
    clientName:   document.getElementById("urgentClientName"),
    clientEmail:  document.getElementById("urgentClientEmail"),
    confirmBtn:   document.getElementById("urgentConfirmBtn"),
    close2:       document.getElementById("urgentStep2Close"),
    back2:        document.getElementById("urgentStep2Back"),
    close3:       document.getElementById("urgentStep3Close")
  };
  // ** Match flow **
  const matchSection     = document.getElementById("providerMatch");
  const m = {
    form:          document.getElementById("matchForm"),
    concern:       document.getElementById("concernInput"),
    urgency:       document.getElementById("urgencyInput"),
    lang:          document.getElementById("languageInput"),
    findBtn:       document.getElementById("findMatchBtn"),
    results:       document.getElementById("matchResults"),
    nameDisplay:   document.getElementById("matchedName"),
    specDisplay:   document.getElementById("matchedSpec"),
    scheduleBtn:   document.getElementById("scheduleMatchBtn"),
    close2:        document.getElementById("matchResultsClose"),
    back2:         document.getElementById("matchResultsBack"),
    flow3:         document.getElementById("appointmentFlow"),
    close3:        document.getElementById("appointmentFlowClose"),
    chosenProvider:document.getElementById("chosenProvider"),
    prevMonth:     document.getElementById("prevMonth"),
    nextMonth:     document.getElementById("nextMonth"),
    calendarHdr:   document.getElementById("calendarHeader"),
    calendarGrid:  document.getElementById("calendar"),
    timeSlots:     document.getElementById("timeSlots"),
    confirmForm:   document.getElementById("confirmForm"),
    close4:        document.getElementById("confirmStep4Close"),
    back4:         document.getElementById("confirmStep4Back"),
    summaryText:   document.getElementById("summaryText"),
    confirmBtn:    document.getElementById("confirmBtn")
  };
  // ** Modals & Dashboard & Toasts **
  const confirmModal     = document.getElementById("confirmModal");
  const cancelModal      = document.getElementById("cancelModal");
  const confirmDetails   = document.getElementById("confirmDetails");
  const cancelMsg        = document.getElementById("cancelMsg");
  const richUpcoming     = document.getElementById("rich-upcoming");
  const upcomingWidget   = document.getElementById("upcomingCalendarWidget");

  // ════════════════════════════════════════════════════════════
  // ── 3) UTILITY FUNCTIONS: toast, save, OpenAI proxy stub  ──
  // ════════════════════════════════════════════════════════════
  function showToast(msg) {
    const t = document.createElement("div");
    t.className = "toast";
    t.textContent = msg;
    document.body.appendChild(t);
    requestAnimationFrame(() => t.classList.add("visible"));
    setTimeout(() => t.remove(), 3000);
  }
  function saveState() {
    localStorage.setItem("appointments", JSON.stringify(state.appointments));
    localStorage.setItem("urgentDraft", JSON.stringify(state.urgentDraft));
    localStorage.setItem("darkMode", state.darkMode);
  }
  async function callOpenAI(messages) {
    const res = await fetch("/.netlify/functions/openai-proxy", {
      method:"POST", headers:{"Content-Type":"application/json"},
      body:JSON.stringify({messages})
    });
    if (!res.ok) throw new Error("OpenAI failed");
    const j = await res.json();
    return j.choices[0].message.content.trim();
  }

  // ════════════════════════════════════════════
  // ── 4) SIDEBAR, THEME & NAVIGATION EVENTS ──
  // ════════════════════════════════════════════
  // a) shrink / expand
  shrinkBtn.addEventListener("click", () => {
    body.classList.toggle("sidebar-shrink");
  });
  // b) mobile hamburger
  hamburger.addEventListener("click", () => {
    body.classList.toggle("sidebar-open");
  });
  // c) dark / light
  function applyTheme() {
    if (state.darkMode) {
      document.documentElement.classList.add("dark");
      themeToggle.classList.replace("fa-moon","fa-sun");
    } else {
      document.documentElement.classList.remove("dark");
      themeToggle.classList.replace("fa-sun","fa-moon");
    }
  }
  themeToggle.addEventListener("click", () => {
    state.darkMode = !state.darkMode;
    applyTheme(); saveState();
  });
  applyTheme();

  // ════════════════════════════════════════
  // ── 5) QUICK-ACTIONS & URGENT CARE LINK ──
  // ════════════════════════════════════════
  bookApptBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      // scroll to providerMatch
      document.getElementById("providerMatch").scrollIntoView({behavior:"smooth"});
    });
  });
  urgentCareLink.addEventListener("click", () => {
    urgentSection.hidden = false;
    urgentSection.scrollIntoView({behavior:"smooth"});
  });

  // ════════════════════════════════════════════════════
  // ── 6) URGENT-FLOW (Steps 1–4) ─────────────────────
  // ════════════════════════════════════════════════════
  // restore draft
  Object.entries(state.urgentDraft).forEach(([k,v]) => {
    const el = document.getElementById("urgent" + k);
    if (el) el.value = v;
  });
  // Step navigation helpers
  function showUrgentStep(n) {
    [u.step1,u.step2,u.step3,u.step4].forEach((el,i)=> el.hidden = (i+1!==n));
    state.urgent.step = n;
  }
  // Prev/Close buttons
  u.back2.addEventListener("click", ()=> showUrgentStep(1));
  u.close2.addEventListener("click", ()=> urgentSection.hidden = true);
  u.close3.addEventListener("click", ()=> urgentSection.hidden = true);

  // Step 1 → Find Specialist
  u.findBtn.addEventListener("click", async () => {
    const concern = u.concernInput.value.trim();
    if (!concern) return showToast("Enter your concern");
    u.findBtn.disabled = true;
    u.findBtn.textContent = "Matching…";
    const sys = `You are a clinical AI. Providers:\n${providers.map(p=>`- ${p.name} – ${p.specialty} at ${p.facility}`).join("\n")}`;
    const usr = `Concern="${concern}". Pick exact provider name.`;
    let pick = await callOpenAI([ {role:"system",content:sys}, {role:"user",content:usr} ]);
    pick = pick.split("\n")[0].trim();
    const found = providers.find(p=>p.name===pick) || providers[Math.floor(Math.random()*providers.length)];
    state.urgent.provider = found;
    u.nameDisplay.textContent = found.name;
    u.specDisplay.textContent = `${found.specialty}, ${found.facility}`;
    u.findBtn.disabled = false;
    u.findBtn.textContent = "Find Specialist";
    showUrgentStep(2);
  });

  // Step 2 → Calendar
  u.scheduleBtn.addEventListener("click", () => {
    showUrgentStep(3);
  });

  // Step 3 → Details Form
  u.nextBtn.addEventListener("click", () => {
    if (!u.dateInput.value || !u.timeInput.value) return showToast("Select date & time");
    state.urgent.date = u.dateInput.value;
    state.urgent.time = u.timeInput.value;
    showUrgentStep(4);
    u.clientName.focus();
  });

  // Step 4 → Review & Pay
  u.confirmBtn.addEventListener("click", () => {
    const name = u.clientName.value.trim();
    const email = u.clientEmail.value.trim();
    if (!name || !email) return showToast("Enter name & email");
    // fill modal
    confirmDetails.innerHTML = `
      <p><strong>Urgent Consult</strong></p>
      <p><strong>Provider:</strong> ${state.urgent.provider.name}</p>
      <p><strong>Date:</strong> ${state.urgent.date}</p>
      <p><strong>Time:</strong> ${state.urgent.time}</p>
      <p><strong>Name:</strong> ${name}</p>
      <p><strong>Email:</strong> ${email}</p>
      <p><strong>Fee:</strong> ₵500</p>
    `;
    // save draft
    state.urgentDraft = {
      ConcernInput: u.concernInput.value,
      Date: state.urgent.date,
      Time: state.urgent.time,
      ClientName: name,
      ClientEmail: email
    };
    saveState();
    confirmModal.hidden = false;
  });

  // ══════════════════════════════════════════════
  // ── 7) MATCH-FLOW (Steps 1–4) ─────────────────
  // ══════════════════════════════════════════════
  function showMatchStep(n) {
    // hide first two steps container
    m.form.hidden        = n>1;
    m.results.hidden     = n!==2;
    m.flow3.hidden       = n!==3;
    m.confirmForm.hidden = n!==4;
    state.match.step = n;
  }
  // Step1 → Predict Specialist
  m.findBtn.addEventListener("click", async () => {
    const concern = m.concern.value.trim();
    if (!concern) return showToast("Enter your concern");
    m.findBtn.disabled = true;
    m.findBtn.textContent = "Matching…";
    const sys = `You are AI match. Providers:\n${providers.map(p=>`- ${p.name} – ${p.specialty} at ${p.facility}`).join("\n")}`;
    const usr = `Concern="${concern}", Urgency="${m.urgency.value}".`;
    let raw = await callOpenAI([ {role:"system",content:sys}, {role:"user",content:usr} ]);
    let nameLine = raw.split("\n")[0].split("–")[0].trim();
    let found = providers.find(p=>p.name===nameLine) || providers[Math.floor(Math.random()*providers.length)];
    state.match.providerId   = found.id;
    state.match.providerName = found.name;
    m.nameDisplay.textContent = found.name;
    m.specDisplay.textContent = `${found.specialty}, ${found.facility}`;
    m.findBtn.disabled = false;
    m.findBtn.textContent = "Predict Specialist";
    showMatchStep(2);
  });

  // Step2 → Calendar
  m.scheduleBtn.addEventListener("click", () => {
    m.chosenProvider.textContent = state.match.providerName;
    buildCalendar();
    showMatchStep(3);
  });

  // calendar navigation
  m.prevMonth.addEventListener("click", ()=> { state.match.month = (state.match.month||new Date().getMonth())-1; if(state.match.month<0){ state.match.month=11; state.match.year--; } buildCalendar(); });
  m.nextMonth.addEventListener("click", ()=> { state.match.month = (state.match.month||new Date().getMonth())+1; if(state.match.month>11){ state.match.month=0; state.match.year++; } buildCalendar(); });

  function buildCalendar() {
    const y = state.match.year  || new Date().getFullYear();
    const mth = state.match.month || new Date().getMonth();
    m.calendarHdr.textContent = new Date(y,mth).toLocaleString("default",{month:"long",year:"numeric"});
    m.calendarGrid.innerHTML = "";
    // weekdays
    ["Su","Mo","Tu","We","Th","Fr","Sa"].forEach(w => {
      const d = document.createElement("div");
      d.className = "cell"; d.style.fontWeight = "600"; d.innerText = w;
      m.calendarGrid.appendChild(d);
    });
    // blanks
    const firstDay = new Date(y,mth,1).getDay();
    for(let i=0;i<firstDay;i++){
      const b = document.createElement("div"); b.className = "cell closed";
      m.calendarGrid.appendChild(b);
    }
    // days
    const daysInMonth = new Date(y,mth+1,0).getDate();
    const avail = availability[state.match.providerId]||{};
    for(let d=1;d<=daysInMonth;d++){
      const dateKey = `${y}-${String(mth+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
      const open = Array.isArray(avail[dateKey]) && new Date(dateKey) >= new Date().setHours(0,0,0,0);
      const cell = document.createElement("div");
      cell.className = `cell ${open?"open":"closed"}`;
      cell.innerText = d;
      if(open) cell.addEventListener("click", ()=> selectMatchDate(dateKey));
      m.calendarGrid.appendChild(cell);
    }
    m.timeSlots.innerHTML = "";
  }

  function selectMatchDate(dateKey) {
    state.match.date = dateKey;
    const slots = availability[state.match.providerId][dateKey] || [];
    m.timeSlots.innerHTML = `<h4>Available on ${dateKey}:</h4>`;
    const ul = document.createElement("ul"); ul.style.display="flex"; ul.style.gap="0.5rem";
    slots.forEach(t => {
      const li = document.createElement("li");
      const btn = document.createElement("button");
      btn.type="button"; btn.className="btn-sm"; btn.innerText = t;
      btn.addEventListener("click", ()=> selectMatchTime(t));
      li.appendChild(btn); ul.appendChild(li);
    });
    m.timeSlots.appendChild(ul);
  }
  function selectMatchTime(time) {
    state.match.time = time;
    m.summaryText.textContent = `You selected ${state.match.date} at ${time}.`;
    showMatchStep(4);
  }

  m.confirmBtn.addEventListener("click", () => {
    const name = document.getElementById("clientName").value.trim();
    const email= document.getElementById("clientEmail").value.trim();
    if (!name||!email) return showToast("Enter name & email");
    // fill review modal
    confirmDetails.innerHTML = `
      <p><strong>Provider:</strong> ${state.match.providerName}</p>
      <p><strong>Date:</strong> ${state.match.date}</p>
      <p><strong>Time:</strong> ${state.match.time}</p>
      <p><strong>Name:</strong> ${name}</p>
      <p><strong>Email:</strong> ${email}</p>
    `;
    confirmModal.hidden = false;
  });

  // ════════════════════════════════════
  // ── 8) MODAL CONTROLS ─────────────
  // ════════════════════════════════════
  // Cancel modal
  document.getElementById("cancelYes").addEventListener("click", () => {
    const idx = state.appointments.findIndex(a => a.id === cancelModal.dataset.appId);
    if (idx>-1) state.appointments.splice(idx,1);
    saveState();
    renderUpcoming();
    showToast("Appointment canceled.");
    cancelModal.hidden = true;
  });
  document.getElementById("cancelNo").addEventListener("click", ()=> cancelModal.hidden = true);
  // Confirm modal
  document.getElementById("modalConfirm").addEventListener("click", () => {
    // decide urgent vs match
    if (state.urgent.step===4) {
      const id = "U"+Date.now();
      state.appointments.push({ id, name: state.urgent.provider.name, date: state.urgent.date, time: state.urgent.time, urgent:true });
      showToast("Urgent appointment saved!");
    } else {
      const id = Date.now().toString();
      state.appointments.push({ id, name: state.match.providerName, date: state.match.date, time: state.match.time, urgent:false });
      showToast("Appointment confirmed!");
    }
    saveState();
    confirmModal.hidden = true;
    renderUpcoming();
    addToDashboard(state.appointments[state.appointments.length-1]);
  });
  document.getElementById("modalClose").addEventListener("click", ()=> confirmModal.hidden = true);

  // ══════════════════════════════════════
  // ── 9) RENDER UPCOMING + DASHBOARD ───
  // ══════════════════════════════════════
  function renderUpcoming() {
    // clear & rebuild widget
    upcomingWidget.innerHTML = "";
    // *** simplistic month nav & grid like above… omitted for brevity ***
  }
  function addToDashboard(appt) {
    const card = document.createElement("div");
    card.className = "card"; card.dataset.id = appt.id;
    card.innerHTML = `
      <i class="fas fa-user-md fa-2x"></i>
      <div class="details">
        <h4>${appt.name}</h4>
        <p>${appt.date} • ${appt.time}</p>
      </div>
      <div class="actions">
        <button class="btn-reschedule"><i class="fas fa-sync-alt"></i></button>
        <button class="btn-cancel"><i class="fas fa-times"></i></button>
      </div>
    `;
    // wire cancel
    card.querySelector(".btn-cancel").addEventListener("click", () => {
      cancelModal.hidden = false;
      cancelModal.dataset.appId = appt.id;
      cancelMsg.textContent = appt.urgent
        ? "This was an urgent booking (₵500 non-refundable). Cancel anyway?"
        : "Are you sure you want to cancel this appointment?";
    });
    richUpcoming.appendChild(card);
  }

  // ─── INITIALIZE DASHBOARD & UPCOMING ─────────────────────────
  renderUpcoming();
  state.appointments.forEach(addToDashboard);
});
</script>
  
</body>

</html>
