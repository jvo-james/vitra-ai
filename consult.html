<!DOCTYPE html>
<html lang="en" aria-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>E-Pharmacy AI Portal</title>

  <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  /*──────────────────── Global Theme ────────────────────*/
  :root {
    --cb-primary: #3b3f88;       /* deep indigo */
    --cb-primary-alt: #5c4d99;   /* lighter indigo */
    --cb-accent: #f08a5d;        /* warm coral */
    --cb-bg: #f7f6f9;            /* light lavender */
    --cb-surface: #ffffff;       /* card backgrounds */
    --cb-text: #2d2d2d;          /* dark text */
    --cb-muted: #777777;         /* secondary text */
    --radius: 0.75rem;
    --padding: 1rem;
    --shadow: 0 4px 12px rgba(0,0,0,0.1);
    --transition: 0.3s ease;
  }
  html.dark {
    --cb-bg: #1a1b2e;
    --cb-surface: #2d2d44;
    --cb-text: #e0e0e0;
    --cb-muted: #aaaaaa;
    --shadow: 0 4px 12px rgba(0,0,0,0.4);
  }
  *, *::before, *::after {
    box-sizing: border-box;
    transition: var(--transition);
  }
  body {
    margin: 0; padding: 0;
    font-family: 'Montserrat', sans-serif;
    background: var(--cb-bg);
    color: var(--cb-text);
    line-height: 1.5;
  }
  a { color: inherit; text-decoration: none; }
  h1,h2,h3,h4 { margin-bottom: 0.5rem; color: var(--cb-primary); }
  p.desc { color: var(--cb-muted); margin-bottom: 1rem; }

  /*──────────────────── Layout ────────────────────*/
  aside#sidebar {
    position: fixed; top: 0; left: 0; bottom: 0;
    width: 220px; background: var(--cb-surface);
    box-shadow: var(--shadow); z-index: 1000;
    display: flex; flex-direction: column;
  }
  aside#sidebar .brand {
    padding: var(--padding);
    font-size: 1.25rem;
    background: var(--cb-primary);
    color: #fff;
    display: flex; align-items: center; gap: 0.5rem;
  }
  aside#sidebar nav ul {
    flex: 1; overflow-y: auto; margin: 0; padding: 0; list-style: none;
  }
  aside#sidebar nav li a {
    display: flex; align-items: center; gap: 0.75rem;
    padding: 0.75rem var(--padding);
    border-radius: var(--radius);
  }
  aside#sidebar nav li.active a,
  aside#sidebar nav li a:hover {
    background: var(--cb-primary-alt);
    color: #fff;
  }
  #shrinkSidebar {
    background: none; border: none; font-size: 1.25rem;
    color: var(--cb-primary); cursor: pointer;
    margin: var(--padding);
  }

  header {
    position: sticky; top: 0; left: 220px; right: 0;
    height: 60px; background: var(--cb-surface);
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 var(--padding); flex-wrap: wrap;
    box-shadow: var(--shadow); z-index: 1001;
  }
  header h1 {
    flex: 1 1 auto;          /* + let the title shrink/grow */
    margin: 0.5rem 0;        /* + some vertical breathing room */
    word-break: break-word;  /* + wrap long titles */
    font-size: 1.25rem;      /* + a slightly smaller base size */
  }
  #hamburger, #themeToggle {
    font-size: 1.5rem; color: var(--cb-primary); cursor: pointer;
  }

  main {
    margin: 100px var(--padding) var(--padding) 240px;
    transition: margin-left var(--transition);
  }
  section.module {
    background: var(--cb-surface);
    border-radius: var(--radius);
    padding: var(--padding);
    margin-bottom: 1.5rem;
    box-shadow: var(--shadow);
  }

  /*──────────────────── Hero ────────────────────*/
  #hero {
    display: grid; grid-template-columns: 1fr 1fr; gap: var(--padding);
    background: var(--cb-primary-alt); color: #fff;
    padding: 2rem var(--padding);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    margin-bottom: 2rem;
  }
  #hero .hero-text h2 { font-size: 2.25rem; margin-bottom: 0.5rem; }
  #hero .hero-features {
    display: flex; flex-direction: column; gap: 1rem;
  }
  #hero .feature-card {
    background: #fff; color: var(--cb-primary);
    padding: 1rem; border-radius: var(--radius);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    display: flex; align-items: center; justify-content: space-between;
    cursor: pointer;
  }
  #hero .feature-card:hover {
    background: var(--cb-accent); color: #fff;
    transform: translateY(-3px);
  }
  #hero .feature-card i { font-size: 2rem; }
  #hero .feature-card .btn {
    background: var(--cb-primary); color: #fff;
    padding: 0.5rem 1rem; border-radius: var(--radius);
  }

  /*──────────────────── Forms & Inputs ────────────────────*/
  label { display: block; margin-bottom: 1rem; }
  input, select, textarea {
    width: 100%; padding: 0.75rem; margin-top: 0.5rem;
    border: 2px solid var(--cb-primary-alt);
    border-radius: var(--radius);
    background: var(--cb-bg);
    color: var(--cb-text);
  }
  input:focus, select:focus, textarea:focus {
    border-color: var(--cb-accent);
    box-shadow: 0 0 0 3px rgba(240,138,93,0.3);
  }
  button.btn {
    background: var(--cb-accent); color: #fff;
    border: none; padding: 0.75rem 1.25rem;
    border-radius: var(--radius); box-shadow: var(--shadow);
    cursor: pointer;
  }
  button.btn:hover { background: #d4724f; }

  /*──────────────────── Response Panels ────────────────────*/
  .response {
    background: var(--cb-surface);
    border-left: 4px solid var(--cb-accent);
    padding: var(--padding);
    margin-top: 1rem;
    position: relative;
    box-shadow: var(--shadow);
  }
  .response .close-btn {
    position: absolute; top: 0.5rem; right: 0.5rem;
    background: none; border: none; font-size: 1.1rem; cursor: pointer;
    color: var(--cb-muted);
  }

  /*──────────────────── Chat & History ────────────────────*/
  .chat-box {
    background: var(--cb-bg);
    border: 2px solid var(--cb-primary-alt);
    border-radius: var(--radius);
    padding: var(--padding);
    max-height: 300px; overflow-y: auto;
    margin-bottom: 1rem;
  }
  .chat-input { display: flex; gap: 0.5rem; }
  .chat-input input { flex: 1; border-radius: var(--radius) 0 0 var(--radius); }
  .chat-input button { border-radius: 0 var(--radius) var(--radius) 0; }
  .user-msg, .bot-msg {
    max-width: 70%; padding: 0.75rem; border-radius: var(--radius);
    margin-bottom: 0.5rem; word-wrap: break-word;
  }
  .user-msg {
    align-self: flex-end; background: var(--cb-primary); color: #fff;
    border-bottom-right-radius: 0;
  }
  .bot-msg {
    align-self: flex-start; background: var(--cb-surface); color: var(--cb-text);
    border-bottom-left-radius: 0;
  }
  .chat-date {
    text-align: center; margin: 1rem 0; font-size: 0.9rem;
    color: var(--cb-muted); font-weight: 600;
  }
  .msg-ts { font-size: 0.75rem; color: var(--cb-muted); }

  /*──────────────────── Modals & History ────────────────────*/
  .modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); display: none;
    align-items: center; justify-content: center; z-index: 2000;
  }
  .modal-content {
    background: var(--cb-surface); padding: 1.5rem;
    border-radius: var(--radius); width: 90%; max-width: 600px;
    box-shadow: var(--shadow); position: relative;
  }
  .close-modal {
    position: absolute; top: 0.5rem; right: 0.75rem;
    font-size: 1.5rem; cursor: pointer; color: var(--cb-muted);
  }
  .history-item {
    background: var(--cb-bg); padding: 0.75rem; margin-bottom: 0.75rem;
    border-radius: var(--radius); display: flex;
    justify-content: space-between; align-items: center;
  }
  .delete-history {
    background: var(--cb-primary-alt); color: #fff;
    border: none; padding: 0.3rem 0.6rem; border-radius: var(--radius);
    cursor: pointer;
  }
  .delete-history:hover { background: var(--cb-primary); }

  /*──────────────────── Analytics Cards & Calendar ────────────────────*/
  .analytics-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr));
    gap: var(--padding);
  }
  .analytics-card {
    background: var(--cb-surface);
    border-radius: var(--radius);
    padding: var(--padding);
    box-shadow: var(--shadow);
  }
  .calendar {
    width: 100%; background: var(--cb-surface);
    border-radius: var(--radius); overflow: hidden;
    box-shadow: var(--shadow);
  }
  .calendar .row {
    display: flex;
  }
  .calendar .cell {
    flex: 1; padding: 0.5rem; border: 1px solid var(--cb-bg);
    text-align: center; cursor: pointer;
  }
  .calendar .cell.closed { background: #eee; color: #999; cursor: not-allowed; }
  .calendar .cell.open { background: var(--cb-accent); color: #fff; }
  .calendar .cell.today { border: 2px solid var(--cb-primary); }

  /*──────────────────── Responsive ────────────────────*/
  @media (max-width: 1024px) {
    header { left: 60px; }
    main { margin-left: 80px; }
  }
  @media (max-width: 768px) {
    aside#sidebar { transform: translateX(-100%); }
    body.sidebar-open aside#sidebar { transform: none; }
    header { left: 0; }
    main { margin-left: 1rem; margin-top: 100px; }
    #hero { grid-template-columns: 1fr; }
  }
    /* make our generated calendar look like your cells */
  #calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 1px;
    background: var(--cb-bg);
    border: 1px solid var(--cb-bg);
  }
</style>
</head>
<body>
  <!-- Sidebar -->
  <aside id="sidebar">
    <div class="brand">
      <i class="fas fa-calendar-check"></i>
      <span>Vitra AI Consult</span>
    </div>
    <nav>
      <ul>
        <li class="active"><a href="#providerMatch"><i class="fas fa-user-md"></i><span>Provider Match</span></a></li>
        <li><a href="#availabilityCalendar"><i class="fas fa-calendar-alt"></i><span>Availability</span></a></li>
        <li><a href="#bookAppointment"><i class="fas fa-book-medical"></i><span>Book Appointment</span></a></li>
        <li><a href="#dashboard"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
        <li><a href="#feedback"><i class="fas fa-star"></i><span>Feedback</span></a></li>
        <li><a href="#analytics"><i class="fas fa-chart-line"></i><span>Analytics</span></a></li>
        <li><a href="#liveChat"><i class="fas fa-comments"></i><span>Live Chat</span></a></li>
      </ul>
    </nav>
    <button id="shrinkSidebar" title="Toggle sidebar"><i class="fas fa-chevron-left"></i></button>
  </aside>

  <!-- Header -->
  <header>
    <i id="hamburger" class="fas fa-bars"></i>
    <h1>AI-Powered Consultation Booking</h1>
    <i id="themeToggle" class="fas fa-moon"></i>
  </header>

  <!-- Hero -->
  <section id="hero" class="module">
    <div class="hero-text">
      <h2><i class="fas fa-stethoscope"></i> Seamless Consultation Booking</h2>
      <p class="desc">From instant provider match to one-click appointment, powered by AI.</p>
      <a href="#providerMatch" class="btn hero-btn"><i class="fas fa-user-md"></i> Get Matched Now</a>
    </div>
    <div class="hero-graphic">
      <!-- You can replace this with an illustrative SVG or image -->
      <img src="hero-consult.svg" alt="Consultation illustration" />
    </div>
  </section>

  <!-- 1. Personalized AI Provider Matching -->
  <section id="providerMatch" class="module">
    <h2><i class="fas fa-user-md"></i> Personalized Provider Matching</h2>
    <p class="desc">Answer a few questions and get instantly matched to the best in-network specialist.</p>
    <form id="matchForm">
      <label>Chief Concern:
        <input type="text" id="concernInput" placeholder="e.g. persistent cough">
      </label>
      <label>Urgency:
        <select id="urgencyInput">
          <option>Low</option>
          <option>Medium</option>
          <option>High</option>
        </select>
      </label>
      <label>Preferred Language:
        <select id="languageInput">
          <option>English</option>
          <option>Twi</option>
          <option>Ga</option>
          <option>Ewe</option>
        </select>
      </label>
      <button id="findMatch" class="btn"><i class="fas fa-search"></i> Find My Specialist</button>
    </form>

    <div id="matchResults" class="response" hidden>
      <button class="close-btn"><i class="fas fa-times"></i></button>
      <div class="result-content">
        <!-- AI will choose among these pseudo-providers -->
        <ul id="providerList">
          <li data-id="p1"><strong>Dr. Kwame Asante</strong> – Pulmonologist, Korle Bu Teaching Hospital</li>
          <li data-id="p2"><strong>Dr. Abena Owusu</strong> – Cardiologist, 37 Military Hospital</li>
          <li data-id="p3"><strong>Dr. Kojo Mensah</strong> – Psychiatrist, Ridge Hospital</li>
          <li data-id="p4"><strong>Dr. Yaa Dufie</strong> – Dietitian, Nyaho Medical Centre</li>
          <li data-id="p5"><strong>Dr. Nana Adjei</strong> – General Practitioner, Cape Coast Polyclinic</li>
          <li data-id="p6"><strong>Dr. Efua Amponsah</strong> – Endocrinologist, LEKMA Hospital</li>
          <li data-id="p7"><strong>Dr. Michael Addo</strong> – Neurologist, 37 Military Hospital</li>
          <li data-id="p8"><strong>Dr. Grace Ofori</strong> – Dermatologist, Accra Dermatology Centre</li>
          <li data-id="p9"><strong>Dr. Joseph Kumi</strong> – Orthopedic Surgeon, Komfo Anokye Teaching Hospital</li>
          <li data-id="p10"><strong>Dr. Ama Brew</strong> – Pediatrician, Trust Hospital</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- 2. Real-Time Availability Calendar -->
  <section id="availabilityCalendar" class="module">
    <h2><i class="fas fa-calendar-alt"></i> Real-Time Availability</h2>
    <p class="desc">Browse open slots, filter by date/time/consultation type, or jump to your next available.</p>
    <div class="calendar-controls">
      <label>Date:
        <input type="date" id="calendarDateInput">
      </label>
      <label>Time of Day:
        <select id="timeOfDayInput">
          <option>Morning</option>
          <option>Afternoon</option>
          <option>Evening</option>
        </select>
      </label>
      <label>Type:
        <select id="visitTypeInput">
          <option>Telehealth</option>
          <option>In-Person</option>
        </select>
      </label>
      <button id="filterSlots" class="btn"><i class="fas fa-filter"></i> Filter</button>
      <button id="nextAvailable" class="btn"><i class="fas fa-forward"></i> Next Available</button>
    </div>
  <div id="calendarGrid">
      <div id="calendar"></div>
   </div>
  </section>

  <!-- 3. Book an Appointment -->
  <section id="bookAppointment" class="module">
    <h2><i class="fas fa-book-medical"></i> Book Your Appointment</h2>
    <p class="desc">Select from our roster of specialists and schedule in seconds.</p>
    <form id="appointmentForm">
      <label>Your Name:
        <input type="text" id="clientName" placeholder="John Doe">
      </label>
      <label>Select Professional:
        <select id="professionalSelect">
          <option>Dr. Kwame Asante (Pulmonologist)</option>
          <option>Dr. Abena Owusu (Cardiologist)</option>
          <option>Dr. Kojo Mensah (Psychiatrist)</option>
          <option>Ms. Akosua Baah (Physical Therapist)</option>
          <option>Mr. Daniel Boakye (Pharmacist)</option>
          <option>Dr. Yaa Dufie (Dietitian)</option>
          <option>Dr. Michael Addo (Neurologist)</option>
          <option>Mrs. Esther Kumi (Occupational Therapist)</option>
          <option>Dr. Grace Ofori (Dermatologist)</option>
          <option>Mr. Stephen Tetteh (Speech Therapist)</option>
          <option>Dr. Joseph Kumi (Orthopedic Surgeon)</option>
          <option>Dr. Ama Brew (Pediatrician)</option>
        </select>
      </label>
      <label>Date:
        <input type="date" id="apptDate">
      </label>
      <label>Time:
        <input type="time" id="apptTime">
      </label>
      <button id="bookNow" class="btn"><i class="fas fa-check"></i> Book Now</button>
    </form>
    <!-- booking confirmation modal -->
    <div id="bookingModal" class="modal" hidden>
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>Confirm Your Appointment</h3>
        <div class="result-content" id="bookingSummary">
          <!-- AI will fill summary and recommendation -->
        </div>
        <button id="confirmBooking" class="btn">Confirm</button>
      </div>
    </div>
  </section>

  <!-- 4. Patient Dashboard & History -->
  <section id="dashboard" class="module">
    <h2><i class="fas fa-tachometer-alt"></i> Your Dashboard</h2>
    <p class="desc">Manage upcoming visits, review past appointments, download summaries.</p>
    <div class="dashboard-tabs">
      <button data-tab="upcoming" class="active">Upcoming</button>
      <button data-tab="past">Past</button>
    </div>
    <div id="upcoming" class="dashboard-list">
      <ul>
        <li>
          <strong>Dr. Abena Owusu</strong> – 2025-05-30 14:00  
          <button class="btn-sm rescheduleBtn">Reschedule</button>
          <button class="btn-sm cancelBtn">Cancel</button>
        </li>
        <!-- more items… -->
      </ul>
    </div>
    <div id="past" class="dashboard-list" hidden>
      <ul>
        <li>
          <strong>Dr. Kojo Mensah</strong> – 2025-04-12 10:00  
          <button class="btn-sm">Download Summary</button>
          <button class="btn-sm">Download Invoice</button>
        </li>
        <!-- more… -->
      </ul>
    </div>
  </section>

  <!-- 5. Feedback & Ratings -->
  <section id="feedback" class="module">
    <h2><i class="fas fa-star"></i> Feedback & Ratings</h2>
    <p class="desc">Help us improve—quick 1-min survey.</p>
    <label>Rate your last visit:  
      <select id="ratingInput">
        <option>⭐</option><option>⭐⭐</option><option>⭐⭐⭐</option><option>⭐⭐⭐⭐</option><option>⭐⭐⭐⭐⭐</option>
      </select>
    </label>
    <label>Comments:
      <textarea id="feedbackInput" rows="3" placeholder="Any suggestions?"></textarea>
    </label>
    <button id="submitFeedback" class="btn"><i class="fas fa-paper-plane"></i> Submit</button>
  </section>

  <!-- 6. Analytics & Optimization -->
  <section id="analytics" class="module">
    <h2><i class="fas fa-chart-line"></i> Analytics & Optimization</h2>
    <div class="chart-container">
      <canvas id="noShowChart"></canvas>
      <canvas id="peakTimesChart" style="margin-top:1rem;"></canvas>
    </div>
    <button id="optimizeStaffing" class="btn"><i class="fas fa-cogs"></i> AI Suggest Staffing</button>
    <div id="optimizationResult" class="response" hidden>
      <button class="close-btn"><i class="fas fa-times"></i></button>
      <div class="result-content"></div>
    </div>
  </section>

  <!-- 7. Live AI Chat Support -->
  <section id="liveChat" class="module">
    <h2><i class="fas fa-comments"></i> Live AI Chat Support</h2>
    <p class="desc">24/7 assistant for all your booking questions.</p>
    <div class="chat-controls">
      <button id="clearChat" class="btn-sm"><i class="fas fa-trash"></i> Clear</button>
      <button id="showHistory" class="btn-sm"><i class="fas fa-history"></i> History</button>
    </div>
    <div id="chatBox" class="chat-box"></div>
    <form id="chatForm" class="chat-input">
      <input id="chatInput" type="text" placeholder="Ask me anything…">
      <button id="sendChat" class="btn"><i class="fas fa-paper-plane"></i></button>
    </form>
    <!-- Chat history modal -->
    <div id="chatHistoryModal" class="modal" hidden>
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>Chat History</h3>
        <div id="chatHistoryList"></div>
        <button id="clearHistoryChat" class="btn-sm">Clear All</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <small>© 2025 AI-Pharmacy Chain — All rights reserved</small>
  </footer>


 <script>
document.addEventListener('DOMContentLoaded', () => {
  // Helper: Toast
  function showToast(msg) {
    const t = document.createElement('div');
    t.className = 'toast';
    t.innerText = msg;
    document.body.append(t);
    requestAnimationFrame(() => t.classList.add('visible'));
    setTimeout(() => t.remove(), 3000);
  }

  // Sidebar toggle
  document.getElementById('hamburger').onclick = () =>
    document.body.classList.toggle('sidebar-open');
  document.getElementById('shrinkSidebar').onclick = () => {
    const sb = document.getElementById('sidebar');
    sb.classList.toggle('collapsed');
    document.querySelector('header').style.left = sb.classList.contains('collapsed') ? '60px' : '220px';
    document.querySelector('main').style.marginLeft = sb.classList.contains('collapsed') ? '70px' : '240px';
  };

  // Theme toggle
  document.getElementById('themeToggle').onclick = () => {
    document.documentElement.classList.toggle('dark');
    document.getElementById('themeToggle').classList.toggle('fa-moon');
    document.getElementById('themeToggle').classList.toggle('fa-sun');
  };

  // Smooth anchor scrolling
  document.querySelectorAll('aside#sidebar nav a').forEach(a => {
    a.onclick = e => {
      e.preventDefault();
      const id = a.getAttribute('href').slice(1);
      document.getElementById(id).scrollIntoView({ behavior:'smooth', block:'start' });
    };
  });

  // 1. Provider Matching
  document.getElementById('findMatch').onclick = e => {
    e.preventDefault();
    const concern = document.getElementById('concernInput').value.trim();
    const urgency = document.getElementById('urgencyInput').value;
    const lang    = document.getElementById('languageInput').value;
    if (!concern) return showToast('Please enter your concern');
    // Simple pseudo-AI: pick random provider from list
    const items = Array.from(document.querySelectorAll('#providerList li'));
    const chosen = items[Math.floor(Math.random() * items.length)];
    document.getElementById('matchResults').hidden = false;
    items.forEach(li => li.style.background = '');
    chosen.style.background = 'var(--cb-accent)';
  };
  document.querySelector('#matchResults .close-btn').onclick = () =>
    document.getElementById('matchResults').hidden = true;

  // 2. Calendar Filtering & Next Available
  document.getElementById('filterSlots').onclick = e => {
    e.preventDefault();
    showToast('Slots filtered (UI stub)');
    // You’d implement real filtering logic here
  };
  document.getElementById('nextAvailable').onclick = e => {
    e.preventDefault();
    showToast('Next available: 2025-06-01 09:00');
  };

    // ——— Generate a simple monthly calendar ———
  function generateCalendar(year, month) {
    const cal = document.getElementById('calendar');
   cal.innerHTML = '';  // clear
   // day names header
   ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(d => {
     const hd = document.createElement('div');
      hd.className = 'cell';
      hd.style.fontWeight = '600';
      hd.innerText = d;
     cal.append(hd);
   });
   // first day offset
    const first = new Date(year, month, 1).getDay();
   // total days
   const days = new Date(year, month+1, 0).getDate();
    // blank cells until first
   for (let i=0; i<first; i++) {
     const blank = document.createElement('div');
    blank.className = 'cell closed';
      cal.append(blank);
    }
    // create day cells
   for (let d=1; d<=days; d++) {
     const cell = document.createElement('div');
     cell.className = 'cell';
     // randomly mark some as closed
     if (Math.random() < 0.3) {
       cell.classList.add('closed');
        cell.innerText = d;
     } else {
        cell.classList.add('open');
       cell.innerText = d;
        cell.onclick = () => {
          document.querySelectorAll('#calendar .cell.open.selected')
            .forEach(c=>c.classList.remove('selected'));
         cell.classList.add('selected');
          showToast(`You selected: ${year}-${month+1}-${d}`);
        };
     }
     // highlight today
      const today = new Date();
     if (today.getFullYear()===year && today.getMonth()===month && today.getDate()===d) {
        cell.classList.add('today');
     }
     cal.append(cell);
   }
 }
 // call initially with current month
  const now = new Date();
 generateCalendar(now.getFullYear(), now.getMonth());

  // optionally regenerate when date input changes
 document.getElementById('calendarDateInput').onchange = e => {
    const d = new Date(e.target.value);
    if (!isNaN(d)) generateCalendar(d.getFullYear(), d.getMonth());
 };
  
  // 3. Booking modal
  const bookingModal = document.getElementById('bookingModal');
  document.getElementById('bookNow').onclick = e => {
    e.preventDefault();
    const name = document.getElementById('clientName').value.trim();
    const prof = document.getElementById('professionalSelect').value;
    const date = document.getElementById('apptDate').value;
    const time = document.getElementById('apptTime').value;
    if (!name || !date || !time) return showToast('Please fill all fields');
    bookingModal.hidden = false;
    document.getElementById('bookingSummary').innerHTML = `
      <p><strong>${name}</strong>, you are booking with <em>${prof}</em></p>
      <p>On <strong>${date}</strong> at <strong>${time}</strong>.</p>
      <p>AI recommends this provider based on your previous answers.</p>
    `;
  };
  bookingModal.querySelector('.close-modal').onclick = () => bookingModal.hidden = true;
  document.getElementById('confirmBooking').onclick = () => {
    bookingModal.hidden = true;
    showToast('Appointment Confirmed!');
  };

  // 4. Dashboard tabs
  document.querySelectorAll('.dashboard-tabs button').forEach(btn => {
    btn.onclick = () => {
      document.querySelectorAll('.dashboard-tabs button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const tab = btn.dataset.tab;
      document.querySelectorAll('.dashboard-list').forEach(d=>d.hidden = d.id!==tab);
    };
  });
  // Reschedule & cancel
  document.querySelectorAll('.rescheduleBtn').forEach(btn => {
    btn.onclick = () => showToast('Reschedule flow triggered');
  });
  document.querySelectorAll('.cancelBtn').forEach(btn => {
    btn.onclick = () => showToast('Appointment cancelled');
  });

  // 5. Feedback submission
  document.getElementById('submitFeedback').onclick = e => {
    e.preventDefault();
    showToast('Thank you for your feedback!');
  };

  // 6. Analytics & staffing optimization
  const noShowCtx = document.getElementById('noShowChart').getContext('2d');
  const peakCtx   = document.getElementById('peakTimesChart').getContext('2d');
  new Chart(noShowCtx, { type:'bar', data:{
      labels:['Week1','Week2','Week3','Week4'], datasets:[{ label:'No-Show %', data:[10,12,8,15] }]
    }});
  new Chart(peakCtx, { type:'line', data:{
      labels:['Mon','Tue','Wed','Thu','Fri'], datasets:[{ label:'Bookings', data:[30,45,60,55,70] }]
    }});
  document.getElementById('optimizeStaffing').onclick = () => {
    document.getElementById('optimizationResult').hidden = false;
    document.querySelector('#optimizationResult .result-content').innerText =
      'AI suggests adding 2 nurses on Wed afternoons and 1 admin on Fridays.';
  };
  document.querySelector('#optimizationResult .close-btn').onclick = () =>
    document.getElementById('optimizationResult').hidden = true;

  // 7. Live Chat Support
  const chatBox  = document.getElementById('chatBox');
  const historyModal = document.getElementById('chatHistoryModal');
  const historyList  = document.getElementById('chatHistoryList');
  let lastDateKey = null;
  const chatHistory = [];
  function addChat(role, text) {
    const now = new Date();
    const dateKey = now.toDateString();
    if (dateKey !== lastDateKey) {
      const sep = document.createElement('div');
      sep.className = 'chat-date';
      const diff = Math.floor((new Date() - new Date(dateKey)) / 864e5);
      sep.innerText = diff===0 ? 'Today' : diff===1 ? 'Yesterday' : now.toLocaleDateString();
      chatBox.append(sep);
      lastDateKey = dateKey;
    }
    const ts = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
    const msg = document.createElement('div');
    msg.className = role==='user' ? 'user-msg' : 'bot-msg';
    msg.innerHTML = `<div class="msg-text">${text}</div><div class="msg-ts">${ts}</div>`;
    chatBox.append(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
    chatHistory.push({ role, text, time:`${dateKey} ${ts}` });
  }
  document.getElementById('sendChat').onclick = e => {
    e.preventDefault();
    const txt = document.getElementById('chatInput').value.trim();
    if (!txt) return showToast('Type a message');
    addChat('user', txt);
    document.getElementById('chatInput').value = '';
    setTimeout(() => addChat('bot', 'AI: ' + txt.split('').reverse().join('')), 500);
  };
  document.getElementById('clearChat').onclick = () => {
    chatBox.innerHTML = '';
    lastDateKey = null;
    chatHistory.length = 0;
  };
  document.getElementById('showHistory').onclick = () => {
    historyList.innerHTML = chatHistory.map((h,i)=>`
      <div class="history-item">
        <span><strong>${h.role==='user'?'You':'AI'}:</strong> ${h.text}</span>
        <div class="msg-ts">${h.time}</div>
        <button class="delete-history" data-i="${i}">&times;</button>
      </div>`).join('');
    historyModal.hidden = false;
  };
  historyModal.querySelector('.close-modal').onclick = () => historyModal.hidden = true;
  historyList.onclick = e => {
    if (e.target.matches('.delete-history')) {
      const i = +e.target.dataset.i;
      chatHistory.splice(i,1);
      e.target.closest('.history-item').remove();
    }
  };
});
</script>
</body>
</html>
